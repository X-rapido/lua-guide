{"./":{"url":"./","title":"å¼€ç¯‡","keywords":"","body":"ç›®å½• è¯´æ˜ ä½œè€…ï¼šåˆ˜ä»å¥ ç¨‹åºå–µåšå®¢ï¼šhttp://www.ibloger.net Lua å®˜æ–¹ï¼šhttps://www.lua.org/home.html åœ¨çº¿è¿è¡Œï¼šhttps://www.lua.org/demo.html æ‰‹å†Œå†…å®¹ï¼Œä¸ªäººå­¦ä¹ è¿‡ç¨‹å‚è€ƒï¼šæ˜“ç™¾æ•™ç¨‹ã€èœé¸Ÿæ•™ç¨‹ã€‚éƒ¨åˆ†å†…å®¹ç¨æœ‰å˜åŠ¨ã€‚ æ¬¢è¿æœ‰å…´è¶£çš„æœ‹å‹ä»¬å†…å®¹è¡¥å……ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-28 11:16:31 "},"base/Luaä»‹ç».html":{"url":"base/Luaä»‹ç».html","title":"Lua ä»‹ç»","keywords":"","body":"Lua ä»‹ç» Lua æ˜¯ä¸€ç§ç”¨Cè¯­è¨€ç¼–å†™çš„å¯æ‰©å±•ï¼Œè½»é‡çº§çš„ç¼–ç¨‹è¯­è¨€ã€‚å®ƒäº1993å¹´ç”±Roberto Ierusalimschyï¼ŒLuiz Henrique de Figueiredoå’ŒWaldemar Celesä½œä¸ºå†…éƒ¨é¡¹ç›®å¼€å§‹ç ”å‘ã€‚ Lua ä»ä¸€å¼€å§‹å°±è®¾è®¡æˆä¸€ä¸ªå¯ä»¥ä¸ç”¨Cè¯­è¨€å’Œå…¶ä»–ä¼ ç»Ÿè¯­è¨€ç¼–å†™çš„ä»£ç é›†æˆçš„è½¯ä»¶ã€‚ è¿™ç§é›†æˆå¸¦æ¥è®¸å¤šå¥½å¤„ã€‚ Lua å¹¶æ²¡æœ‰å°è¯•åšCè¯­è¨€å·²ç»åšè¿‡çš„äº‹æƒ…ï¼Œè€Œæ˜¯æä¾›Cè¯­è¨€ä¸æ“…é•¿çš„ä¸œè¥¿ï¼šä¸ç¡¬ä»¶çš„è‰¯å¥½è·ç¦»ï¼ŒåŠ¨æ€ç»“æ„ï¼Œæ— å†—ä½™ï¼Œæ˜“äºæµ‹è¯•å’Œè°ƒè¯•ã€‚ ä¸ºæ­¤ï¼ŒLuaæ˜¯å…·æœ‰å®‰å…¨çš„ç¯å¢ƒï¼Œè‡ªåŠ¨å†…å­˜ç®¡ç†ä»¥åŠç”¨äºå¤„ç†åŠ¨æ€å¤§å°çš„å­—ç¬¦ä¸²å’Œå…¶ä»–ç±»å‹æ•°æ®çš„è‰¯å¥½å·¥å…·ã€‚ ä¸€ã€è®¾è®¡ç›®çš„ å…¶è®¾è®¡ç›®çš„æ˜¯ä¸ºäº†åµŒå…¥åº”ç”¨ç¨‹åºä¸­ï¼Œä»è€Œä¸ºåº”ç”¨ç¨‹åºæä¾›çµæ´»çš„æ‰©å±•å’Œå®šåˆ¶åŠŸèƒ½ã€‚ äºŒã€Lua ç‰¹æ€§ è½»é‡çº§ è½»é‡çº§Luaè¯­è¨€çš„å®˜æ–¹ç‰ˆæœ¬åªåŒ…æ‹¬ä¸€ä¸ªç²¾ç®€çš„æ ¸å¿ƒå’Œæœ€åŸºæœ¬çš„åº“ã€‚è¿™ä½¿å¾—Luaä½“ç§¯å°ã€å¯åŠ¨é€Ÿåº¦å¿«ï¼Œä»è€Œé€‚åˆåµŒå…¥åœ¨åˆ«çš„ç¨‹åºé‡Œã€‚5.0.2ç‰ˆçš„Luaçš„å†…æ ¸å°äº120KBã€‚ å¯æ‰©å±• å¯æ‰©å±• Luaå¹¶ä¸è±¡å…¶å®ƒè®¸å¤š\"å¤§è€Œå…¨\"çš„è¯­è¨€é‚£æ ·ï¼ŒåŒ…æ‹¬å¾ˆå¤šåŠŸèƒ½ï¼Œæ¯”å¦‚ç½‘ç»œé€šè®¯ã€å›¾å½¢ç•Œé¢ç­‰ã€‚ä½†æ˜¯Luaæä¾›äº†éå¸¸æ˜“äºä½¿ç”¨çš„æ‰©å±•æ¥å£å’Œæœºåˆ¶ï¼šç”±å®¿ä¸»è¯­è¨€(é€šå¸¸æ˜¯Cæˆ–C++)æä¾›è¿™äº›åŠŸèƒ½ï¼ŒLuaå¯ä»¥ä½¿ç”¨å®ƒä»¬ï¼Œå°±åƒæ˜¯æœ¬æ¥å°±å†…ç½®çš„åŠŸèƒ½ä¸€æ ·ã€‚ å…¶å®ƒç‰¹æ€§ æ”¯æŒé¢å‘è¿‡ç¨‹(procedure-oriented)ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹(functional programming)ï¼› è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼› åªæä¾›äº†ä¸€ç§é€šç”¨ç±»å‹çš„è¡¨ï¼ˆtableï¼‰ï¼Œç”¨å®ƒå¯ä»¥å®ç°æ•°ç»„ï¼Œå“ˆå¸Œè¡¨ï¼Œé›†åˆï¼Œå¯¹è±¡ï¼› è¯­è¨€å†…ç½®æ¨¡å¼åŒ¹é…ï¼› é—­åŒ…(closure)ï¼› å‡½æ•°ä¹Ÿå¯ä»¥çœ‹åšä¸€ä¸ªå€¼ï¼› æä¾›å¤šçº¿ç¨‹ï¼ˆååŒè¿›ç¨‹ ï¼Œå¹¶éæ“ä½œç³»ç»Ÿæ‰€æ”¯æŒçš„çº¿ç¨‹ï¼‰æ”¯æŒï¼› é€šè¿‡é—­åŒ…å’Œtableå¯ä»¥å¾ˆæ–¹ä¾¿åœ°æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹æ‰€éœ€è¦çš„ä¸€äº›å…³é”®æœºåˆ¶ï¼Œæ¯”å¦‚æ•°æ®æŠ½è±¡ï¼Œè™šå‡½æ•°ï¼Œç»§æ‰¿å’Œé‡è½½ç­‰ã€‚ ä¸‰ã€Lua åº”ç”¨åœºæ™¯ æ¸¸æˆå¼€å‘ ç‹¬ç«‹åº”ç”¨è„šæœ¬ Web åº”ç”¨è„šæœ¬ æ‰©å±•å’Œæ•°æ®åº“æ’ä»¶å¦‚ï¼šMySQL Proxy å’Œ MySQL WorkBench å®‰å…¨ç³»ç»Ÿï¼Œå¦‚å…¥ä¾µæ£€æµ‹ç³»ç»Ÿ å››ã€ç¬¬ä¸€ä¸ª Lua ç¨‹åº æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ Lua æ¥è¾“å‡º \"Hello World!\" å®ä¾‹(Lua 5.3) print(\"Hello World!\") è¿è¡Œåï¼Œä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤º Hello, world! äº”ã€åœ¨çº¿è¿è¡Œ Lua ç¨‹åº å¦‚æœä½ çš„ç”µè„‘è¿˜æ²¡æœ‰å®‰è£… Lua ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨å®˜ç½‘åœ°å€åœ¨çº¿æ‰§è¡Œè„šæœ¬ Lua å®˜ç½‘æ‰§è¡Œï¼šhttps://www.lua.org/cgi-bin/demo powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 13:33:36 "},"base/Luaå®‰è£….html":{"url":"base/Luaå®‰è£….html","title":"Lua å®‰è£…","keywords":"","body":"å®‰è£… ä¸€ã€Windows ç³»ç»Ÿ ä¸‹è½½æ–¹å¼1 è¿›å…¥Luaå®˜ç½‘ï¼šhttp://www.lua.org ï¼Œç‚¹å‡» download è·å–ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ get a binary ç‚¹å‡»å·¦ä¾§çš„ Downloadï¼Œé€‰æ‹©è‡ªå·±éœ€è¦çš„æ–‡ä»¶è¿›è¡Œä¸‹è½½ ä¸‹è½½æ–¹å¼2 ç›´æ¥æ‰“å¼€ä¸‹è½½åœ°å€ï¼šhttp://joedf.ahkscript.org/LuaBuilds/ ï¼Œæˆ‘çš„æ¼”ç¤ºç‰ˆæœ¬ï¼šLua-5.3.5_Win64_bin.zip ç¯å¢ƒå˜é‡é…ç½® è§£å‹ä¹‹åæœ‰ä¸‰ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯ï¼šlua è§£é‡Šå™¨ã€luac ç¼–è¯‘å™¨ã€lua53.dll åº“æ–‡ä»¶ è®¾ç½®ç¯å¢ƒå˜é‡ï¼ŒæŠŠ Lua çš„è§£å‹è·¯å¾„æ”¾è¿›å»ã€‚ äºŒã€Mac OS ç³»ç»Ÿ åœ¨Mac OS Xä¸Šå®‰è£…è¦åœ¨Mac OS Xä¸­æ„å»º/æµ‹è¯•Luaï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ # ä¸‹è½½ $ curl -R -O http://www.lua.org/ftp/lua-5.3.5.tar.gz # è§£å‹ $ tar zxf lua-5.3.5.tar.gz # è¿›å…¥ $ cd lua-5.3.5 # ç¼–è¯‘ $ make macosx test # å®‰è£… $ make install åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½æ²¡æœ‰å®‰è£… Xcode å’Œå‘½ä»¤è¡Œå·¥å…·ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†æ— æ³•ä½¿ç”¨ make å‘½ä»¤ã€‚ä»mac app storeå®‰è£…Xcodeã€‚ ç„¶åè½¬åˆ°Xcodeçš„å‚è€ƒï¼Œç„¶ååˆ‡æ¢åˆ°Downloadså¹¶å®‰è£…åä¸ºâ€œCommand Line Toolsâ€çš„ç»„ä»¶ã€‚å®Œæˆè¯¥è¿‡ç¨‹åï¼Œå°±å¯ä»¥ä½¿ç”¨makeå‘½ä»¤ã€‚ Google Codeï¼šhttps://code.google.com/archive/p/luaforwindows/downloads GitHubï¼šhttps://github.com/rjpcomputing/luaforwindows/releases powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-28 11:04:06 "},"base/LuaåŸºæœ¬è¯­æ³•.html":{"url":"base/LuaåŸºæœ¬è¯­æ³•.html","title":"Lua åŸºæœ¬è¯­æ³•","keywords":"","body":"Lua åŸºæœ¬è¯­æ³• Lua å­¦ä¹ èµ·æ¥éå¸¸ç®€å•ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºç¬¬ä¸€ä¸ª Lua ç¨‹åºï¼ ä¸€ã€ç¬¬ä¸€ä¸ª Lua ç¨‹åº 1ã€äº¤äº’å¼ç¼–ç¨‹ Lua æä¾›äº†äº¤äº’å¼ç¼–ç¨‹æ¨¡å¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ç¨‹åºå¹¶ç«‹å³æŸ¥çœ‹æ•ˆæœã€‚ Lua äº¤äº’å¼ç¼–ç¨‹æ¨¡å¼å¯ä»¥é€šè¿‡å‘½ä»¤ lua -i æˆ– lua æ¥å¯ç”¨ï¼š $ lua -i $ Lua 5.3.5 Copyright (C) 1994-2018 Lua.org, PUC-Rio > åœ¨å‘½ä»¤è¡Œä¸­ï¼Œè¾“å…¥ä»¥ä¸‹ print(\"Hello Worldï¼\") å‘½ä»¤ï¼Œæ¥ç€æŒ‰ä¸‹å›è½¦é”®ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š > print(\"Hello Worldï¼\") Hello Worldï¼ > 2ã€è„šæœ¬å¼ç¼–ç¨‹ æˆ‘ä»¬å¯ä»¥å°† Lua ç¨‹åºä»£ç ä¿æŒåˆ°ä¸€ä¸ªä»¥ lua ç»“å°¾çš„æ–‡ä»¶ï¼Œå¹¶æ‰§è¡Œï¼Œè¯¥æ¨¡å¼ç§°ä¸ºè„šæœ¬å¼ç¼–ç¨‹ï¼Œå¦‚æˆ‘ä»¬å°†å¦‚ä¸‹ä»£ç å­˜å‚¨åœ¨åä¸º hello.lua çš„è„šæœ¬æ–‡ä»¶ä¸­ï¼š print(\"Hello Worldï¼\") print(\"ç¨‹åºå–µ\") ä½¿ç”¨ lua åæ‰§è¡Œä»¥ä¸Šè„šæœ¬ï¼Œè¾“å‡ºç»“æœä¸ºï¼š $ lua test.lua Hello Worldï¼ ç¨‹åºå–µ æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†ä»£ç ä¿®æ”¹ä¸ºå¦‚ä¸‹å½¢å¼æ¥æ‰§è¡Œè„šæœ¬ï¼ˆåœ¨å¼€å¤´æ·»åŠ ï¼š#!/usr/local/bin/luaï¼‰ï¼š #!/usr/local/bin/lua print(\"Hello Worldï¼\") print(\"ç¨‹åºå–µ\") ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬æŒ‡å®šäº† Lua çš„è§£é‡Šå™¨ /usr/local/bin ç›®å½•ã€‚åŠ ä¸Š # å·æ ‡è®°è§£é‡Šå™¨ä¼šå¿½ç•¥å®ƒã€‚ äºŒã€æ³¨é‡Š 1ã€å•è¡Œæ³¨é‡Š ä¸¤ä¸ªå‡å·æ˜¯å•è¡Œæ³¨é‡Š -- 2ã€å¤šè¡Œæ³¨é‡Š --[[ å¤šè¡Œæ³¨é‡Š å¤šè¡Œæ³¨é‡Š --]] ä¸‰ã€æ ‡ç¤ºç¬¦ Lua è¡¨ç¤ºç¬¦ç”¨äºå®šä¹‰ä¸€ä¸ªå˜é‡ï¼Œå‡½æ•°è·å–å…¶ä»–ç”¨æˆ·å®šä¹‰çš„é¡¹ã€‚æ ‡ç¤ºç¬¦ä»¥ä¸€ä¸ªå­—æ¯ A-Z æˆ– a-z æˆ–ä¸‹åˆ’çº¿ _ å¼€å¤´ååŠ ä¸Š0æˆ–å¤šä¸ªå­—æ¯ï¼Œä¸‹åˆ’çº¿ï¼Œæ•°å­—ï¼ˆ0-9ï¼‰ã€‚ æœ€å¥½ä¸è¦ä½¿ç”¨ä¸‹åˆ’çº¿åŠ å¤§å†™å­—æ¯çš„æ ‡ç¤ºç¬¦ï¼Œå› ä¸º Lua çš„ä¿ç•™å­—ä¹Ÿæ˜¯è¿™æ ·çš„ã€‚ Lua ä¸å…è®¸ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦å¦‚ @, $, å’Œ % æ¥å®šä¹‰æ ‡ç¤ºç¬¦ã€‚ Lua åŒºåˆ†å¤§å° ä»¥ä¸‹åˆ—å‡ºäº†ä¸€äº›æ­£ç¡®çš„æ ‡ç¤ºç¬¦ï¼š mohd zara abc move_name a_123 myname50 _temp j a23b9 retVal å››ã€å…³é”®è¯ ä»¥ä¸‹åˆ—å‡ºäº† Lua çš„ä¿ç•™å…³é”®å­—ã€‚ä¿ç•™å…³é”®å­—ä¸èƒ½ä½œä¸ºå¸¸é‡æˆ–å˜é‡æˆ–å…¶ä»–ç”¨æˆ·è‡ªå®šä¹‰æ ‡ç¤ºç¬¦ã€‚ ä¸€èˆ¬çº¦å®šï¼Œä»¥ä¸‹åˆ’çº¿å¼€å¤´è¿æ¥ä¸€ä¸²å¤§å†™å­—æ¯çš„åå­—ï¼ˆæ¯”å¦‚ _VERSIONï¼‰è¢«ä¿ç•™ç”¨äº Lua å†…éƒ¨å…¨å±€å˜é‡ã€‚ äº”ã€å…¨å±€å˜é‡ åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå˜é‡æ€»æ˜¯è®¤ä¸ºæ˜¯å…¨å±€çš„ã€‚ å…¨å±€å˜é‡ä¸éœ€è¦å£°æ˜ï¼Œç»™ä¸€ä¸ªå˜é‡èµ‹å€¼åå³åˆ›å»ºäº†è¿™ä¸ªå…¨å±€å˜é‡ï¼Œè®¿é—®ä¸€ä¸ªæ²¡æœ‰åˆå§‹åŒ–çš„å…¨å±€å˜é‡ä¹Ÿä¸ä¼šå‡ºé”™ï¼Œåªä¸è¿‡å¾—åˆ°çš„ç»“æœæ˜¯ï¼šnilã€‚ print(b) --> nil b=10 print(b) --> 10 å¦‚æœä½ æƒ³åˆ é™¤ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œåªéœ€è¦å°†å˜é‡èµ‹å€¼ä¸ºnilã€‚ b = nil print(b) --> nil è¿™æ ·å˜é‡ b å°±å¥½åƒä»æ²¡è¢«ä½¿ç”¨è¿‡ä¸€æ ·ã€‚æ¢å¥è¯è¯´, å½“ä¸”ä»…å½“ä¸€ä¸ªå˜é‡ä¸ç­‰äº nil æ—¶ï¼Œè¿™ä¸ªå˜é‡å³å­˜åœ¨ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 14:09:18 "},"base/Luaæ•°æ®ç±»å‹.html":{"url":"base/Luaæ•°æ®ç±»å‹.html","title":"Lua æ•°æ®ç±»å‹","keywords":"","body":"Lua æ•°æ®ç±»å‹ Lua æ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œå› æ­¤å˜é‡æ²¡æœ‰ç±»å‹ï¼Œåªæœ‰å€¼å…·æœ‰ç±»å‹ã€‚å€¼å¯ä»¥å­˜å‚¨åœ¨å˜é‡ä¸­ï¼Œä½œä¸ºå‚æ•°ä¼ é€’å¹¶ä½œä¸ºç»“æœè¿”å›ã€‚ ä¸€ã€åŸºæœ¬ç±»å‹ ç¼–å· å€¼ç±»å‹ æè¿° 1 nil è¡¨ç¤ºä¸€ä¸ªæ— æ•ˆå€¼ã€‚ 2 boolean åŒ…æ‹¬trueå’Œfalseä½œä¸ºå€¼ 3 number è¡¨ç¤ºåŒç²¾åº¦ç±»å‹çš„å®æµ®ç‚¹æ•°ã€‚ 4 string å­—ç¬¦ä¸²ç”±ä¸€å¯¹åŒå¼•å·æˆ–å•å¼•å·æ¥è¡¨ç¤ºã€‚ 5 function ç”± C æˆ– Lua ç¼–å†™çš„å‡½æ•°ã€‚ 6 table è¡¨ç¤ºæ™®é€šæ•°ç»„ï¼Œç¬¦å·è¡¨ï¼Œé›†åˆï¼Œè®°å½•ï¼Œå›¾å½¢ï¼Œæ ‘ç­‰ï¼Œå¹¶å®ç°å…³è”æ•°ç»„ã€‚å®ƒå¯ä»¥ä¿å­˜ä»»ä½•å€¼(é™¤äº†nil)ã€‚ 7 thread è¡¨ç¤ºæ‰§è¡Œçš„ç‹¬ç«‹çº¿è·¯ï¼Œç”¨äºæ‰§è¡ŒååŒç¨‹åºã€‚ 8 userdata è¡¨ç¤ºä»»æ„å­˜å‚¨åœ¨å˜é‡ä¸­çš„Cæ•°æ®ç»“æ„ã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ type å‡½æ•°æµ‹è¯•ç»™å®šå˜é‡æˆ–è€…å€¼çš„ç±»å‹ï¼š print(type(\"Hello world\")) --> string print(type(10.4*3)) --> number print(type(print)) --> function print(type(type)) --> function print(type(true)) --> boolean print(type(nil)) --> nil print(type(type(X))) --> string é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨åˆ†é…å€¼æˆ–åˆå§‹åŒ–ä¹‹å‰ï¼Œæ‰€æœ‰å˜é‡éƒ½å°†æŒ‡å‘ nilã€‚åœ¨æ¡ä»¶æ£€æŸ¥çš„æƒ…å†µä¸‹ï¼Œé›¶å’Œç©ºå­—ç¬¦ä¸²è®¤ä¸ºæ˜¯ï¼štrueã€‚ å› æ­¤ï¼Œä½¿ç”¨å¸ƒå°”è¿ç®—æ—¶å¿…é¡»å°å¿ƒã€‚ 1ã€nilï¼ˆç©ºï¼‰ nil ç±»å‹è¡¨ç¤ºä¸€ç§æ²¡æœ‰ä»»ä½•æœ‰æ•ˆå€¼ï¼Œå®ƒåªæœ‰ä¸€ä¸ªå€¼ï¼šnilï¼Œä¾‹å¦‚æ‰“å°ä¸€ä¸ªæ²¡æœ‰èµ‹å€¼çš„å˜é‡ï¼Œä¾¿ä¼šè¾“å‡ºä¸€ä¸ª nil å€¼ï¼š > print(type(a)) nil > å¯¹äºå…¨å±€å˜é‡å’Œ tableï¼Œnil è¿˜æœ‰ä¸€ä¸ª\"åˆ é™¤\"ä½œç”¨ï¼Œç»™å…¨å±€å˜é‡æˆ–è€… table è¡¨é‡Œçš„å˜é‡èµ‹ä¸€ä¸ª nil å€¼ï¼Œç­‰åŒäºæŠŠå®ƒä»¬åˆ æ‰ï¼Œå¦‚ä¸‹ï¼š tab1 = { key1 = \"val1\", key2 = \"val2\", \"val3\" } for k, v in pairs(tab1) do print(k .. \" - \" .. v) end tab1.key1 = nil for k, v in pairs(tab1) do print(k .. \" - \" .. v) end nuil ç±»å‹æ¯”è¾ƒ nil ä½œæ¯”è¾ƒæ—¶åº”è¯¥åŠ ä¸Šï¼šå•é“¶è¡Œ ' æˆ–åŒå¼•å· \"ã€‚ > type(X) nil > type(X) == nil false > type(X) == \"nil\" true > è¿™æ˜¯å› ä¸º type(X)==nil ç»“æœä¸º false è€Œ type(type(X)) çš„ç»“æœæ˜¯ stringã€‚ 2ã€booleanï¼ˆå¸ƒå°”ï¼‰ boolean ç±»å‹åªæœ‰ä¸¤ä¸ªå€¼ï¼štrueï¼ˆçœŸï¼‰ å’Œ falseï¼ˆå‡ï¼‰ï¼ŒLua æŠŠ false å’Œ nil çœ‹ä½œæ˜¯\"å‡\"ï¼Œå…¶ä»–çš„éƒ½ä¸º\"çœŸ\"ã€‚ print(type(true)) print(type(false)) print(type(nil)) if type(false) or type(nil) then print(\"false and nil are false!\") else print(\"other is true!\") end ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š boolean boolean nil false and nil are false! 3ã€numberï¼ˆæ•°å­—ï¼‰ Lua é»˜è®¤åªæœ‰ä¸€ç§ number ç±»å‹ï¼šdoubleï¼ˆåŒç²¾åº¦ï¼‰ç±»å‹ï¼ˆé»˜è®¤ç±»å‹å¯ä»¥ä¿®æ”¹ luaconf.h é‡Œçš„å®šä¹‰ï¼‰ï¼Œä»¥ä¸‹å‡ ç§å†™æ³•éƒ½è¢«çœ‹ä½œæ˜¯ number ç±»å‹ï¼š print(type(2)) print(type(2.2)) print(type(0.2)) print(type(2e+1)) print(type(0.2e-1)) print(type(7.8263692594256e-06)) ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœéƒ½æ˜¯ï¼šnumber 4ã€stringï¼ˆå­—ç¬¦ä¸²ï¼‰ å­—ç¬¦ä¸²ç”±ä¸€å¯¹åŒå¼•å·æˆ–å•å¼•å·æ¥è¡¨ç¤ºã€‚ string1 = \"this is string1\" string2 = 'this is string2' å­—ç¬¦ä¸²å— ä¹Ÿå¯ä»¥ç”¨ 2 ä¸ªæ–¹æ‹¬å· [[ ]] æ¥è¡¨ç¤º\"ä¸€å—\"å­—ç¬¦ä¸²ã€‚ html = [[ ç¨‹åºå–µ ]] print(html) ä»¥ä¸‹ä»£ç æ‰§è¡Œç»“æœä¸ºï¼š ç¨‹åºå–µ å­—ç¬¦ä¸²ç®—æœ¯è¿ç®— åœ¨å¯¹ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ä¸Šè¿›è¡Œç®—æœ¯æ“ä½œæ—¶ï¼ŒLua ä¼šå°è¯•å°†è¿™ä¸ªæ•°å­—å­—ç¬¦ä¸²è½¬æˆä¸€ä¸ªæ•°å­—ï¼Œè¿™ç‚¹åŒºåˆ†äºjavaä¹‹ç±»è¯­è¨€ã€‚ print(\"2\" + 6) --> 8.0 print(\"2\" + \"6\") --> 8.0 print(\"2 + 6\") --> 2 + 6 print(\"-2e2\" * \"6\") --> -1200.0 print(\"error\" + 1) --> input:5: attempt to perform arithmetic on a string value å­—ç¬¦ä¸²æ‹¼æ¥ å­—ç¬¦ä¸²è¿æ¥ä½¿ç”¨çš„æ˜¯ .. ï¼Œå¦‚ï¼š print(\"a\" .. 'b') --> ab print(157 .. 428) --> 157428 å­—ç¬¦ä¸²é•¿åº¦ ä½¿ç”¨ # æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ”¾åœ¨å­—ç¬¦ä¸²å‰é¢ã€‚ æ±‰å­—å ç”¨ 3 ä¸ªå­—ç¬¦é•¿åº¦ è¡¨æƒ…ç¬¦å·å ç”¨ 4 ä¸ªå­—ç¬¦é•¿åº¦ã€‚ å¦‚ä¸‹å®ä¾‹ï¼š len = \"www.ibloger.net\" print(#len) --> 15 print(#\"å–µ\") --> 3 print(#\"ç¨‹åºå–µ\") --> 9 print(#\"ğŸ±\") --> 4 5ã€tableï¼ˆè¡¨ï¼‰ åœ¨ Lua é‡Œ table çš„åˆ›å»ºæ˜¯é€šè¿‡\"æ„é€ è¡¨è¾¾å¼\"æ¥å®Œæˆï¼Œæœ€ç®€å•æ„é€ è¡¨è¾¾å¼æ˜¯{}ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºè¡¨ã€‚ä¹Ÿå¯ä»¥åœ¨è¡¨é‡Œæ·»åŠ ä¸€äº›æ•°æ®ï¼Œç›´æ¥åˆå§‹åŒ–è¡¨ã€‚ -- åˆ›å»ºä¸€ä¸ªç©ºçš„ table local tbl1 = {} -- ç›´æ¥åˆå§‹è¡¨ local tbl2 = {\"apple\", \"pear\", \"orange\", \"grape\"} Lua ä¸­çš„è¡¨ï¼ˆtableï¼‰å…¶å®æ˜¯ä¸€ä¸ª\"å…³è”æ•°ç»„\"ï¼ˆassociative arraysï¼‰ï¼Œæ•°ç»„çš„ç´¢å¼•å¯ä»¥æ˜¯æ•°å­—æˆ–è€…æ˜¯å­—ç¬¦ä¸²ã€‚ a = {} a[\"k\"] = \"v\" key = 10 a[key] = 22 a[key] = a[key] + 11 for k, v in pairs(a) do print(k .. \" : \" .. v) end è„šæœ¬æ‰§è¡Œç»“æœä¸ºï¼š k : v 10 : 33 ä¸åŒäºå…¶ä»–è¯­è¨€çš„æ•°ç»„æŠŠ 0 ä½œä¸ºæ•°ç»„çš„åˆå§‹ç´¢å¼•ï¼Œåœ¨ Lua é‡Œè¡¨çš„é»˜è®¤åˆå§‹ç´¢å¼•æ˜¯ä»¥ 1 å¼€å§‹ã€‚ local tbl = {\"apple\", \"pear\", \"orange\", \"grape\"} for key, val in pairs(tbl) do print(\"Key\", key) end è„šæœ¬æ‰§è¡Œç»“æœä¸ºï¼š Key 1 Key 2 Key 3 Key 4 table ä¸ä¼šå›ºå®šé•¿åº¦å¤§å°ï¼Œæœ‰æ–°æ•°æ®æ·»åŠ æ—¶ table é•¿åº¦ä¼šè‡ªåŠ¨å¢é•¿ï¼Œæ²¡åˆå§‹çš„ table éƒ½æ˜¯ nilã€‚ ç´¢å¼• Lua å¯¹ table çš„ç´¢å¼•ä½¿ç”¨æ–¹æ‹¬å· []ã€‚ä¹Ÿæä¾›äº† . æ“ä½œã€‚ t[i] t.i -- å½“ç´¢å¼•ä¸ºå­—ç¬¦ä¸²ç±»å‹æ—¶çš„ä¸€ç§ç®€åŒ–å†™æ³• ä¾‹å¦‚ï¼š site = {} site[\"key\"] = \"www.ibloger.net\" print(site[\"key\"]) --> www.ibloger.net print(site.key) --> www.ibloger.net 6ã€functionï¼ˆå‡½æ•°ï¼‰ åœ¨ Lua ä¸­ï¼Œå‡½æ•°æ˜¯è¢«çœ‹ä½œæ˜¯\"ç¬¬ä¸€ç±»å€¼ï¼ˆFirst-Class Valueï¼‰\"ï¼Œå‡½æ•°å¯ä»¥å­˜åœ¨å˜é‡é‡Œã€‚ function factorial1(n) if n == 0 then return 1 else return n * factorial1(n - 1) end end print(factorial1(5)) --> 120 factorial2 = factorial1 print(factorial2(5)) --> 120 function å¯ä»¥ä»¥åŒ¿åå‡½æ•°ï¼ˆanonymous functionï¼‰çš„æ–¹å¼é€šè¿‡å‚æ•°ä¼ é€’ã€‚ function anonymous(tab, fun) for k, v in pairs(tab) do print(fun(k, v)) end end tab = { key1 = \"val1\", key2 = \"val2\" } anonymous(tab, function(key, val) -- function åŒ¿åå‡½æ•° return key .. \" = \" .. val end) è„šæœ¬æ‰§è¡Œç»“æœä¸ºï¼š key1 = val1 key2 = val2 7ã€threadï¼ˆçº¿ç¨‹ï¼‰ åœ¨ Lua é‡Œï¼Œæœ€ä¸»è¦çš„çº¿ç¨‹æ˜¯ååŒç¨‹åºï¼ˆcoroutineï¼‰ã€‚å®ƒè·Ÿçº¿ç¨‹ï¼ˆthreadï¼‰å·®ä¸å¤šï¼Œæ‹¥æœ‰è‡ªå·±ç‹¬ç«‹çš„æ ˆã€å±€éƒ¨å˜é‡å’ŒæŒ‡ä»¤æŒ‡é’ˆï¼Œå¯ä»¥è·Ÿå…¶ä»–ååŒç¨‹åºå…±äº«å…¨å±€å˜é‡å’Œå…¶ä»–å¤§éƒ¨åˆ†ä¸œè¥¿ã€‚ çº¿ç¨‹è·Ÿåç¨‹çš„åŒºåˆ« çº¿ç¨‹å¯ä»¥åŒæ—¶å¤šä¸ªè¿è¡Œ åç¨‹ä»»æ„æ—¶åˆ»åªèƒ½è¿è¡Œä¸€ä¸ªï¼Œå¹¶ä¸”å¤„äºè¿è¡ŒçŠ¶æ€çš„åç¨‹åªæœ‰è¢«æŒ‚èµ·ï¼ˆsuspendï¼‰æ—¶æ‰ä¼šæš‚åœã€‚ 8ã€userdataï¼ˆè‡ªå®šä¹‰ç±»å‹ï¼‰ userdata æ˜¯ä¸€ç§ç”¨æˆ·è‡ªå®šä¹‰æ•°æ®ï¼Œç”¨äºè¡¨ç¤ºä¸€ç§ç”±åº”ç”¨ç¨‹åºæˆ– C/C++ è¯­è¨€åº“æ‰€åˆ›å»ºçš„ç±»å‹ï¼Œå¯ä»¥å°†ä»»æ„ C/C++ çš„ä»»æ„æ•°æ®ç±»å‹çš„æ•°æ®ï¼ˆé€šå¸¸æ˜¯ struct å’Œ æŒ‡é’ˆï¼‰å­˜å‚¨åˆ° Lua å˜é‡ä¸­è°ƒç”¨ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 15:45:18 "},"base/Luaå˜é‡.html":{"url":"base/Luaå˜é‡.html","title":"Lua å˜é‡","keywords":"","body":"Lua å˜é‡ å˜é‡åœ¨ä½¿ç”¨å‰ï¼Œå¿…é¡»åœ¨ä»£ç ä¸­è¿›è¡Œå£°æ˜ï¼Œå³åˆ›å»ºè¯¥å˜é‡ã€‚ç¼–è¯‘ç¨‹åºæ‰§è¡Œä»£ç ä¹‹å‰ç¼–è¯‘å™¨éœ€è¦çŸ¥é“å¦‚ä½•ç»™è¯­å¥å˜é‡å¼€è¾Ÿå­˜å‚¨åŒºï¼Œç”¨äºå­˜å‚¨å˜é‡çš„å€¼ã€‚ ä¸€ã€å˜é‡ç±»å‹ Lua å˜é‡æœ‰ä¸‰ç§ç±»å‹ï¼šå…¨å±€å˜é‡ã€å±€éƒ¨å˜é‡ã€è¡¨ä¸­çš„åŸŸã€‚ å‡½æ•°å¤–çš„å˜é‡é»˜è®¤ä¸ºå…¨å±€å˜é‡ï¼Œé™¤éç”¨ local æ˜¾ç¤ºå£°æ˜ã€‚ å±€éƒ¨å˜é‡çš„ä½œç”¨åŸŸä¸ºä»å£°æ˜ä½ç½®å¼€å§‹åˆ°æ‰€åœ¨è¯­å¥å—ç»“æŸï¼ˆæˆ–è€…æ˜¯ç›´åˆ°ä¸‹ä¸€ä¸ªåŒåå±€éƒ¨å˜é‡çš„å£°æ˜ï¼‰ã€‚ å˜é‡çš„é»˜è®¤å€¼å‡ä¸º nilã€‚ å¦‚ä¸‹ç¤ºä¾‹ a = 5 -- å…¨å±€å˜é‡ local b = 5 -- å±€éƒ¨å˜é‡ function joke() c = 5 -- å…¨å±€å˜é‡ local d = 6 -- å±€éƒ¨å˜é‡ end joke() print(c, d) --> 5 nil do local a = 6 -- å±€éƒ¨å˜é‡ b = 8 -- å…¨å±€å˜é‡ print(a, b); --> 6 8 end print(a, b) --> 5 8 äºŒã€èµ‹å€¼è¯­å¥ èµ‹å€¼æ˜¯æ”¹å˜ä¸€ä¸ªå˜é‡çš„å€¼å’Œæ”¹å˜è¡¨åŸŸçš„æœ€åŸºæœ¬çš„æ–¹æ³•ã€‚ a = \"hello\" .. \"world\" t.n = t.n + 1 Lua å¯ä»¥å¯¹å¤šä¸ªå˜é‡åŒæ—¶èµ‹å€¼ï¼Œå˜é‡åˆ—è¡¨å’Œå€¼åˆ—è¡¨çš„å„ä¸ªå…ƒç´ ç”¨é€—å·åˆ†å¼€ï¼Œèµ‹å€¼è¯­å¥å³è¾¹çš„å€¼ä¼šä¾æ¬¡èµ‹ç»™å·¦è¾¹çš„å˜é‡ã€‚ a, b = 10, 2*x --> a=10; b=2*x é‡åˆ°èµ‹å€¼è¯­å¥ Lua ä¼šå…ˆè®¡ç®—å³è¾¹æ‰€æœ‰çš„å€¼ç„¶åå†æ‰§è¡Œèµ‹å€¼æ“ä½œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·è¿›è¡Œäº¤æ¢å˜é‡çš„å€¼ï¼š x, y = y, x -- swap 'x' for 'y' a[i], a[j] = a[j], a[i] -- swap 'a[i]' for 'a[j]' å½“å˜é‡ä¸ªæ•°å’Œå€¼çš„ä¸ªæ•°ä¸ä¸€è‡´æ—¶ï¼ŒLuaä¼šä¸€ç›´ä»¥å˜é‡ä¸ªæ•°ä¸ºåŸºç¡€é‡‡å–ä»¥ä¸‹ç­–ç•¥ï¼š å˜é‡ä¸ªæ•° > å€¼çš„ä¸ªæ•°ï¼šæŒ‰å˜é‡ä¸ªæ•°è¡¥è¶³nil å˜é‡ä¸ªæ•° ï¼šå¤šä½™çš„å€¼ä¼šè¢«å¿½ç•¥ ä¾‹å¦‚ï¼š a, b, c = 0, 1 print(a,b,c) --> 0 1 nil a, b = a+1, b+1, b+2 -- value of b+2 is ignored print(a,b) --> 1 2 a, b, c = 0 print(a,b,c) --> 0 nil nil ä¸Šé¢æœ€åä¸€ä¸ªä¾‹å­æ˜¯ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æƒ…å†µï¼Œæ³¨æ„ï¼šå¦‚æœè¦å¯¹å¤šä¸ªå˜é‡èµ‹å€¼å¿…é¡»ä¾æ¬¡å¯¹æ¯ä¸ªå˜é‡èµ‹å€¼ã€‚ a, b, c = 0, 0, 0 print(a,b,c) --> 0 0 0 å¤šå€¼èµ‹å€¼ç»å¸¸ç”¨æ¥äº¤æ¢å˜é‡ï¼Œæˆ–å°†å‡½æ•°è°ƒç”¨è¿”å›ç»™å˜é‡ï¼š a, b = f() f() è¿”å›ä¸¤ä¸ªå€¼ï¼Œç¬¬ä¸€ä¸ªèµ‹ç»™aï¼Œç¬¬äºŒä¸ªèµ‹ç»™bã€‚ åº”è¯¥å°½å¯èƒ½çš„ä½¿ç”¨å±€éƒ¨å˜é‡ï¼Œæœ‰ä¸¤ä¸ªå¥½å¤„ï¼š é¿å…å‘½åå†²çªã€‚ è®¿é—®å±€éƒ¨å˜é‡çš„é€Ÿåº¦æ¯”å…¨å±€å˜é‡æ›´å¿«ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 14:29:13 "},"base/Luaå¾ªç¯.html":{"url":"base/Luaå¾ªç¯.html","title":"Lua å¾ªç¯","keywords":"","body":"Lua å¾ªç¯ å¾ˆå¤šæƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦åšä¸€äº›æœ‰è§„å¾‹æ€§çš„é‡å¤æ“ä½œï¼Œå› æ­¤åœ¨ç¨‹åºä¸­å°±éœ€è¦é‡å¤æ‰§è¡ŒæŸäº›è¯­å¥ã€‚ ä¸€ç»„è¢«é‡å¤æ‰§è¡Œçš„è¯­å¥ç§°ä¹‹ä¸ºå¾ªç¯ä½“ï¼Œèƒ½å¦ç»§ç»­é‡å¤ï¼Œå†³å®šå¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶ã€‚ å¾ªç¯ç»“æ„æ˜¯åœ¨ä¸€å®šæ¡ä»¶ä¸‹åå¤æ‰§è¡ŒæŸæ®µç¨‹åºçš„æµç¨‹ç»“æ„ï¼Œè¢«åå¤æ‰§è¡Œçš„ç¨‹åºè¢«ç§°ä¸ºå¾ªç¯ä½“ã€‚ å¾ªç¯è¯­å¥æ˜¯ç”±å¾ªç¯ä½“åŠå¾ªç¯çš„ç»ˆæ­¢æ¡ä»¶ä¸¤éƒ¨åˆ†ç»„æˆçš„ã€‚ ä¸€ã€å¾ªç¯æ–¹å¼ Lua æä¾›äº†ä»¥ä¸‹å‡ ç§å¾ªç¯å¤„ç†æ–¹å¼ï¼š å¾ªç¯ç±»å‹ æè¿° while å¾ªç¯ åœ¨æ¡ä»¶ä¸º true æ—¶ï¼Œè®©ç¨‹åºé‡å¤åœ°æ‰§è¡ŒæŸäº›è¯­å¥ã€‚æ‰§è¡Œè¯­å¥å‰ä¼šå…ˆæ£€æŸ¥æ¡ä»¶æ˜¯å¦ä¸º true for å¾ªç¯ é‡å¤æ‰§è¡ŒæŒ‡å®šè¯­å¥ï¼Œé‡å¤æ¬¡æ•°å¯åœ¨ for è¯­å¥ä¸­æ§åˆ¶ã€‚ Lua repeat...until é‡å¤æ‰§è¡Œå¾ªç¯ï¼Œç›´åˆ° æŒ‡å®šçš„æ¡ä»¶ä¸ºçœŸæ—¶ä¸ºæ­¢ å¾ªç¯åµŒå¥— å¯ä»¥åœ¨å¾ªç¯å†…åµŒå¥—ä¸€ä¸ªæˆ–å¤šä¸ªå¾ªç¯è¯­å¥ï¼ˆwhileã€forã€do..whileï¼‰ å¾ªç¯æ§åˆ¶ å¾ªç¯æ§åˆ¶è¯­å¥ç”¨äºæ§åˆ¶ç¨‹åºçš„æµç¨‹ï¼Œä»¥å®ç°ç¨‹åºçš„å„ç§ç»“æ„æ–¹å¼ã€‚ æ§åˆ¶è¯­å¥ æè¿° break è¯­å¥ é€€å‡ºå½“å‰å¾ªç¯æˆ–è¯­å¥ï¼Œå¹¶å¼€å§‹è„šæœ¬æ‰§è¡Œç´§æ¥ç€çš„è¯­å¥ã€‚ æµç¨‹å›¾å¦‚ä¸‹ å¦å¤–ï¼šLua å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼ contrnue çš„è¯­å¥ã€‚ äºŒã€å¾ªç¯ç±»å‹ä»‹ç» 1ã€while å¾ªç¯ Lua ç¼–ç¨‹è¯­è¨€ä¸­ while å¾ªç¯è¯­å¥åœ¨åˆ¤æ–­æ¡ä»¶ä¸º true æ—¶ä¼šé‡å¤æ‰§è¡Œå¾ªç¯ä½“è¯­å¥ã€‚ è¯­æ³• while(condition) do statements end statementsï¼ˆå¾ªç¯ä½“è¯­å¥ï¼‰å¯ä»¥æ˜¯ä¸€æ¡æˆ–å¤šæ¡è¯­å¥ï¼Œcondition(æ¡ä»¶) å¯ä»¥æ˜¯ä»»æ„è¡¨è¾¾å¼ï¼Œåœ¨ condition(æ¡ä»¶) ä¸º true æ—¶æ‰§è¡Œå¾ªç¯ä½“è¯­å¥ã€‚ æµç¨‹å›¾å¦‚ä¸‹ï¼š åœ¨ä»¥ä¸Šæµç¨‹å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨ condition(æ¡ä»¶)ä¸º false æ—¶ä¼šè·³è¿‡å½“å‰å¾ªç¯å¹¶å¼€å§‹è„šæœ¬æ‰§è¡Œç´§æ¥ç€çš„è¯­å¥ã€‚ å®ä¾‹ ä»¥ä¸‹å®ä¾‹å¾ªç¯è¾“å‡º a çš„å€¼ï¼š a=10 while(a æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š a çš„å€¼ä¸º: 10 a çš„å€¼ä¸º: 11 a çš„å€¼ä¸º: 12 2ã€for å¾ªç¯ Lua for å¾ªç¯æ˜¯ä¸€ç§é‡å¤æ§åˆ¶ç»“æ„ï¼Œç”¨äºæœ‰æ•ˆåœ°ç¼–å†™éœ€è¦æ‰§è¡Œç‰¹å®šæ¬¡æ•°çš„å¾ªç¯ã€‚ å…¶ä¸­ for è¯­å¥æœ‰ï¼šæ•°å€¼å¾ªç¯ã€æ³›å‹å¾ªç¯ ä¸¤ç§ç±»å‹ã€‚ æ•°å€¼forå¾ªç¯ è¯­æ³•æ ¼å¼ for var=exp1, exp2, exp3 do end var ä» exp1 å˜åŒ–åˆ° exp2ï¼Œæ¯æ¬¡å˜åŒ–ä»¥ exp3 ä¸ºæ­¥é•¿é€’å¢ varï¼Œå¹¶æ‰§è¡Œä¸€æ¬¡\"æ‰§è¡Œä½“\"ã€‚exp3 æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œé»˜è®¤ä¸º1ã€‚ for i=1, 6 do print(i) --> ä¾æ¬¡æ‰“å°ï¼š1åˆ°6 end for i=10, 1, -1 do print(i) --> ä¾æ¬¡æ‰“å°ï¼š10åˆ°1 end ä¸‰ä¸ªè¡¨è¾¾å¼åœ¨å¾ªç¯å¼€å§‹å‰ä¸€æ¬¡æ€§æ±‚å€¼ï¼Œä»¥åä¸å†è¿›è¡Œæ±‚å€¼ã€‚æ¯”å¦‚ä¸‹é¢çš„ f(x) åªä¼šåœ¨å¾ªç¯å¼€å§‹å‰æ‰§è¡Œä¸€æ¬¡ï¼Œå…¶ç»“æœç”¨åœ¨åé¢çš„å¾ªç¯ä¸­ã€‚ function f(x) print(\"function\") return x*2 end for i=1, f(3) do print(i) end ç»“æœå¦‚ä¸‹ function 1 2 3 4 5 6 å¯ä»¥çœ‹åˆ° å‡½æ•° f(x) åªåœ¨å¾ªç¯å¼€å§‹å‰æ‰§è¡Œä¸€æ¬¡ã€‚ æ³›å‹forå¾ªç¯ æ³›å‹forå¾ªç¯é€šè¿‡ä¸€ä¸ªè¿­ä»£å™¨å‡½æ•°æ¥éå†æ‰€æœ‰å€¼ï¼Œç±»ä¼¼javaä¸­çš„ foreach è¯­å¥ã€‚è¯­æ³•æ ¼å¼å¦‚ä¸‹ã€‚ --æ‰“å°æ•°ç»„açš„æ‰€æœ‰å€¼ for i, v in ipairs(a) do print(v) end i æ˜¯æ•°ç»„ç´¢å¼•å€¼ v æ˜¯å¯¹åº”ç´¢å¼•çš„æ•°ç»„å…ƒç´ å€¼ã€‚ ipairs æ˜¯Luaæä¾›çš„ä¸€ä¸ªè¿­ä»£å™¨å‡½æ•°ï¼Œç”¨æ¥è¿­ä»£æ•°ç»„ã€‚ å®ä¾‹å¦‚ä¸‹ days = {\"Suanday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"} for i, v in ipairs(days) do print(i, v) end ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœä¸ºï¼š 1 Suanday 2 Monday 3 Tuesday 4 Wednesday 5 Thursday 6 Friday 7 Saturday 3ã€repeat...until å¾ªç¯ repeat...until å¾ªç¯ä¿è¯è‡³å°‘æ‰§è¡Œä¸€æ¬¡ï¼Œå¾ªç¯åœ¨åº•éƒ¨æ£€æŸ¥å¾ªç¯çš„æ¡ä»¶ã€‚ç±»ä¼¼äºjavaä¸­çš„ do..while å¾ªç¯ã€‚ è¯­æ³•å¦‚ä¸‹ repeat statement(s) until( condition ) statements (å¾ªç¯ä½“è¯­å¥)ï¼šå¯ä»¥æ˜¯ä¸€æ¡æˆ–å¤šæ¡è¯­å¥ condition (æ¡ä»¶)ï¼šå¯ä»¥æ˜¯ä»»æ„è¡¨è¾¾å¼ï¼Œæ¡ä»¶ä¸º true æ—¶æ‰§è¡Œå¾ªç¯ä½“è¯­å¥ï¼Œä¸º false æ—¶ä¼šè·³è¿‡å½“å‰å¾ªç¯ã€‚ å¾ªç¯æµç¨‹å›¾å¦‚ä¸‹ï¼š ç¤ºä¾‹ä»£ç  a = 10 repeat print(\"value of a:\", a) a = a + 1 until( a > 13 ) æ‰§è¡Œç»“æœ value of a: 10 value of a: 11 value of a: 12 value of a: 13 4ã€å¾ªç¯åµŒå¥— Lua ç¼–ç¨‹è¯­è¨€ä¸­å…è®¸å¾ªç¯ä¸­åµŒå…¥å¾ªç¯ã€‚ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº† Lua å¾ªç¯åµŒå¥—çš„åº”ç”¨ã€‚ for å¾ªç¯åµŒå¥—è¯­æ³•æ ¼å¼ for init, max/min value, increment do for init, max/min value, increment do statements end statements end while å¾ªç¯åµŒå¥—è¯­æ³•æ ¼å¼: while(condition) do while(condition) do statement(s) end statement(s) end repeat...until å¾ªç¯åµŒå¥—è¯­æ³•æ ¼å¼: repeat statements repeat statements until(condition) until(condition) é™¤äº†ä»¥ä¸ŠåŒç±»å‹å¾ªç¯åµŒå¥—å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ä¸åŒçš„å¾ªç¯ç±»å‹æ¥åµŒå¥—ï¼Œå¦‚ for å¾ªç¯ä½“ä¸­åµŒå¥— while å¾ªç¯ã€‚ j = 2 for i=2,10 do for j=2,(i/j) , 2 do if(not(i%j)) then break end if(j > (i/j)) then print(\"i çš„å€¼ä¸ºï¼š\",i) end end end è¿è¡Œç»“æœ i çš„å€¼ä¸ºï¼š 8 i çš„å€¼ä¸ºï¼š 9 i çš„å€¼ä¸ºï¼š 10 powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 15:40:17 "},"base/Luaè¿ç®—ç¬¦.html":{"url":"base/Luaè¿ç®—ç¬¦.html","title":"Lua è¿ç®—ç¬¦","keywords":"","body":"Lua è¿ç®—ç¬¦ è¿ç®—ç¬¦æ˜¯å‘Šè¯‰è§£é‡Šå™¨æ‰§è¡Œç‰¹å®šæ•°å­¦æˆ–é€»è¾‘æ“ä½œçš„ç¬¦å·ã€‚ Luaè¯­è¨€å†…ç½®è¿ç®—ç¬¦ä¸°å¯Œï¼Œå¹¶æä¾›ä»¥ä¸‹ç±»å‹çš„è¿ç®—ç¬¦ã€‚ ç®—æœ¯è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ é€»è¾‘è¿ç®—ç¬¦ å…¶å®ƒè¿ç®—ç¬¦ ä¸€ã€ç®—æœ¯è¿ç®—ç¬¦ ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„å¸¸ç”¨ç®—æœ¯è¿ç®—ç¬¦ï¼Œè®¾å®š A çš„å€¼ä¸º10ï¼ŒB çš„å€¼ä¸º 20ã€‚ æ“ä½œç¬¦ æè¿° å®ä¾‹ + åŠ æ³• A + B = 30 - å‡æ³• A - B = -10 * ä¹˜æ³• A * B = 200 / é™¤æ³• B / A = 2 % å–ä½™ B % A = 0 ^ ä¹˜å¹‚ A^2 = 100 - è´Ÿå· -A = -10 äºŒã€å…³ç³»è¿ç®—ç¬¦ ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„å¸¸ç”¨å…³ç³»è¿ç®—ç¬¦ï¼Œè®¾å®š A çš„å€¼ä¸º10ï¼ŒB çš„å€¼ä¸º 20ã€‚ æ“ä½œç¬¦ æè¿° å®ä¾‹ == ç­‰äºï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› trueï¼Œå¦åˆ™è¿”å› false (A == B) ä¸º falseã€‚ ~= ä¸ç­‰äºï¼Œæ£€æµ‹ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼Œç›¸ç­‰è¿”å› falseï¼Œå¦åˆ™è¿”å› true (A ~= B) ä¸º trueã€‚ > å¤§äºï¼Œå¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false (A > B) ä¸º falseã€‚ å°äºï¼Œå¦‚æœå·¦è¾¹çš„å€¼å¤§äºå³è¾¹çš„å€¼ï¼Œè¿”å› falseï¼Œå¦åˆ™è¿”å› true (A >= å¤§äºç­‰äºï¼Œå¦‚æœå·¦è¾¹çš„å€¼å¤§äºç­‰äºå³è¾¹çš„å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false (A >= B) is not true. å°äºç­‰äºï¼Œ å¦‚æœå·¦è¾¹çš„å€¼å°äºç­‰äºå³è¾¹çš„å€¼ï¼Œè¿”å› trueï¼Œå¦åˆ™è¿”å› false (A ä¸‰ã€é€»è¾‘è¿ç®—ç¬¦ ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„å¸¸ç”¨é€»è¾‘è¿ç®—ç¬¦ï¼Œè®¾å®š A çš„å€¼ä¸º trueï¼ŒB çš„å€¼ä¸º falseã€‚ æ“ä½œç¬¦ æè¿° å®ä¾‹ and é€»è¾‘ä¸æ“ä½œç¬¦ã€‚ å¦‚æœä¸¤è¾¹çš„æ“ä½œéƒ½ä¸º true åˆ™æ¡ä»¶ä¸º trueã€‚ (A and B) ä¸º falseã€‚ or é€»è¾‘æˆ–æ“ä½œç¬¦ã€‚ å¦‚æœä¸¤è¾¹çš„æ“ä½œä»»ä¸€ä¸€ä¸ªä¸º true åˆ™æ¡ä»¶ä¸º trueã€‚ (A or B) ä¸º trueã€‚ not é€»è¾‘éæ“ä½œç¬¦ã€‚ä¸é€»è¾‘è¿ç®—ç»“æœç›¸åï¼Œå¦‚æœæ¡ä»¶ä¸º trueï¼Œé€»è¾‘éä¸º falseã€‚ not(A and B) ä¸º trueã€‚ å››ã€å…¶ä»–è¿ç®—ç¬¦ ä¸‹è¡¨åˆ—å‡ºäº† Lua è¯­è¨€ä¸­çš„è¿æ¥è¿ç®—ç¬¦ä¸è®¡ç®—è¡¨æˆ–å­—ç¬¦ä¸²é•¿åº¦çš„è¿ç®—ç¬¦ï¼š æ“ä½œç¬¦ æè¿° å®ä¾‹ .. è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸² a..b ï¼Œå…¶ä¸­ a ä¸º \"Hello \"ï¼Œb ä¸º \"World\", è¾“å‡ºç»“æœä¸º \"Hello World\"ã€‚ # ä¸€å…ƒè¿ç®—ç¬¦ï¼Œè¿”å›å­—ç¬¦ä¸²æˆ–è¡¨çš„é•¿åº¦ã€‚ #\"Hello\" è¿”å› 5 äº”ã€è¿ç®—ç¬¦ä¼˜å…ˆçº§ ä»é«˜åˆ°ä½çš„é¡ºåºï¼š ^ not - (unary) * / + - .. = ~= == and or é™¤äº† ^ å’Œ .. å¤–æ‰€æœ‰çš„äºŒå…ƒè¿ç®—ç¬¦éƒ½æ˜¯å·¦è¿æ¥çš„ã€‚ a+i (a+i) 5+((x^2)*8) a (a -(x^2) x^y^z --> x^(y^z) ç¤ºä¾‹ a = 20 b = 10 c = 15 d = 5 e = (a + b) * c / d; -- (30 * 15) / 5 print(\"(a + b) * c / d è¿ç®—å€¼ä¸º :\", e) e = ((a + b) * c) / d; -- (30 * 15) / 5 print(\"((a + b) * c) / d è¿ç®—å€¼ä¸º :\", e) e = (a + b) * (c / d); -- (30) * (15/5) print(\"(a + b) * (c / d) è¿ç®—å€¼ä¸º :\", e) e = a + (b * c) / d; -- 20 + (150/5) print(\"a + (b * c) / d è¿ç®—å€¼ä¸º :\", e) powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 16:48:41 "},"base/Luaæµç¨‹æ§åˆ¶.html":{"url":"base/Luaæµç¨‹æ§åˆ¶.html","title":"Lua æµç¨‹æ§åˆ¶","keywords":"","body":"Lua æµç¨‹æ§åˆ¶ Lua ç¼–ç¨‹è¯­è¨€æµç¨‹æ§åˆ¶è¯­å¥é€šè¿‡ç¨‹åºè®¾å®šä¸€ä¸ªæˆ–å¤šä¸ªæ¡ä»¶è¯­å¥æ¥è®¾å®šã€‚åœ¨æ¡ä»¶ä¸º true æ—¶æ‰§è¡ŒæŒ‡å®šç¨‹åºä»£ç ï¼Œåœ¨æ¡ä»¶ä¸º false æ—¶æ‰§è¡Œå…¶ä»–æŒ‡å®šä»£ç ã€‚ æ§åˆ¶ç»“æ„çš„æ¡ä»¶è¡¨è¾¾å¼ç»“æœå¯ä»¥æ˜¯ä»»ä½•å€¼ï¼Œå…¶ä¸­ false å’Œ nil ä¸ºå‡ï¼Œtrue å’Œ énil éƒ½ä¸ºçœŸï¼ŒåŒ…æ‹¬ 0 å’Œè´Ÿæ•°ã€‚ --[ 0 ä¸º true ] if(0) then print(\"0 ä¸º true\") end if(1) then print(\"1 ä¸º true\") end if(-1) then print(\"-1 ä¸º true\") end è¾“å‡ºç»“æœä¸ºï¼š 0 ä¸º true 1 ä¸º true -1 ä¸º true ä¸€ã€if è¯­å¥ ç”±ä¸€ä¸ªå¸ƒå°”è¡¨è¾¾å¼ä½œä¸ºæ¡ä»¶åˆ¤æ–­ï¼Œå…¶åç´§è·Ÿå…¶ä»–è¯­å¥ç»„æˆã€‚ è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š if(å¸ƒå°”è¡¨è¾¾å¼) then --[ åœ¨å¸ƒå°”è¡¨è¾¾å¼ä¸º true æ—¶æ‰§è¡Œçš„è¯­å¥ --] ends æµç¨‹å›¾å¦‚ä¸‹ å¦‚ä¸‹ç¤ºä¾‹ï¼š a = 10; if(a äºŒã€if...else è¯­å¥ if è¯­å¥å¯ä»¥ä¸ else è¯­å¥æ­é…ä½¿ç”¨, åœ¨ if æ¡ä»¶è¡¨è¾¾å¼ä¸º false æ—¶æ‰§è¡Œ else è¯­å¥ä»£ç å—ã€‚ è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š if(å¸ƒå°”è¡¨è¾¾å¼) then --[ å¸ƒå°”è¡¨è¾¾å¼ä¸º true æ—¶æ‰§è¡Œè¯¥è¯­å¥å— --] else --[ å¸ƒå°”è¡¨è¾¾å¼ä¸º false æ—¶æ‰§è¡Œè¯¥è¯­å¥å— --] end æµç¨‹å›¾å¦‚ä¸‹ å¦‚ä¸‹ç¤ºä¾‹ï¼š a = 100; if(a ä¸‰ã€if...else if...else è¯­å¥ åœ¨ if æ¡ä»¶è¡¨è¾¾å¼ä¸º false æ—¶æ‰§è¡Œ else if...else è¯­å¥ä»£ç å—ï¼Œç”¨äºæ£€æµ‹å¤šä¸ªæ¡ä»¶è¯­å¥ã€‚ è¯­æ³•æ ¼å¼ï¼š if(å¸ƒå°”è¡¨è¾¾å¼ 1) then --[ åœ¨å¸ƒå°”è¡¨è¾¾å¼ 1 ä¸º true æ—¶æ‰§è¡Œè¯¥è¯­å¥å— --] elseif(å¸ƒå°”è¡¨è¾¾å¼ 2) --[ åœ¨å¸ƒå°”è¡¨è¾¾å¼ 2 ä¸º true æ—¶æ‰§è¡Œè¯¥è¯­å¥å— --] elseif(å¸ƒå°”è¡¨è¾¾å¼ 3) --[ åœ¨å¸ƒå°”è¡¨è¾¾å¼ 3 ä¸º true æ—¶æ‰§è¡Œè¯¥è¯­å¥å— --] else --[ å¦‚æœä»¥ä¸Šå¸ƒå°”è¡¨è¾¾å¼éƒ½ä¸ä¸º true åˆ™æ‰§è¡Œè¯¥è¯­å¥å— --] end å¦‚ä¸‹ç¤ºä¾‹ï¼š a = 100 if(a == 10) then print(\"a çš„å€¼ä¸º 10\" ) elseif( a == 20 ) then print(\"a çš„å€¼ä¸º 20\" ) elseif( a == 30 ) then print(\"a çš„å€¼ä¸º 30\" ) else print(\"æ²¡æœ‰åŒ¹é… a çš„å€¼\" ) end print(\"a çš„çœŸå®å€¼ä¸º: \", a) æ‰§è¡Œç»“æœï¼š æ²¡æœ‰åŒ¹é… a çš„å€¼ a çš„çœŸå®å€¼ä¸º: 100 powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-25 19:42:26 "},"base/Luaå‡½æ•°.html":{"url":"base/Luaå‡½æ•°.html","title":"Lua å‡½æ•°","keywords":"","body":"Lua å‡½æ•° å‡½æ•°æ˜¯å¯¹è¯­å¥å’Œè¡¨è¾¾å¼è¿›è¡ŒæŠ½è±¡çš„ä¸»è¦æ–¹æ³•ã€‚æ—¢å¯ä»¥ç”¨æ¥å¤„ç†ä¸€äº›ç‰¹æ®Šçš„å·¥ä½œï¼Œä¹Ÿå¯ä»¥ç”¨æ¥è®¡ç®—ä¸€äº›å€¼ã€‚ Lua æä¾›äº†è®¸å¤šçš„å†…å»ºå‡½æ•°ï¼Œä½ å¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ç¨‹åºä¸­è°ƒç”¨å®ƒä»¬ï¼Œå¦‚ print() å‡½æ•°å¯ä»¥å°†ä¼ å…¥çš„å‚æ•°æ‰“å°åœ¨æ§åˆ¶å°ä¸Šã€‚ Lua å‡½æ•°ä¸»è¦æœ‰ä¸¤ç§ç”¨é€”ï¼š å®ŒæˆæŒ‡å®šçš„ä»»åŠ¡ï¼Œè¿™ç§æƒ…å†µä¸‹å‡½æ•°ä½œä¸ºè°ƒç”¨è¯­å¥ä½¿ç”¨ï¼› è®¡ç®—å¹¶è¿”å›å€¼ï¼Œè¿™ç§æƒ…å†µä¸‹å‡½æ•°ä½œä¸ºèµ‹å€¼è¯­å¥çš„è¡¨è¾¾å¼ä½¿ç”¨ã€‚ ä¸€ã€å‡½æ•°å®šä¹‰ æ ¼å¼å¦‚ä¸‹ï¼š optional_function_scope function function_name(argument1, argument2, argument3..., argumentn) function_body return result_params_comma_separated end optional_function_scopeï¼šè¯¥å‚æ•°æ˜¯å¯é€‰çš„åˆ¶å®šå‡½æ•°æ˜¯å…¨å±€å‡½æ•°è¿˜æ˜¯å±€éƒ¨å‡½æ•°ï¼Œæœªè®¾ç½®è¯¥å‚æ•°æœ«å°¾ä¸ºå…¨å±€å‡½æ•°ï¼Œå¦‚æœä½ éœ€è¦è®¾ç½®å‡½æ•°ä¸ºå±€éƒ¨å‡½æ•°éœ€è¦ä½¿ç”¨å…³é”®å­— localã€‚ function_nameï¼šæŒ‡å®šå‡½æ•°åç§°ã€‚ argument1, argument2, argument3..., argumentnï¼šå‡½æ•°å‚æ•°ï¼Œå¤šä¸ªå‚æ•°ä»¥é€—å·éš”å¼€ï¼Œå‡½æ•°ä¹Ÿå¯ä»¥ä¸å¸¦å‚æ•°ã€‚ function_bodyï¼šå‡½æ•°ä½“ï¼Œå‡½æ•°ä¸­éœ€è¦æ‰§è¡Œçš„ä»£ç è¯­å¥å—ã€‚ result_params_comma_separatedï¼šå‡½æ•°è¿”å›å€¼ï¼ŒLuaè¯­è¨€å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªå€¼ï¼Œæ¯ä¸ªå€¼ä»¥é€—å·éš”å¼€ã€‚ ä»¥ä¸‹æ˜¯ max() å‡½æ•°çš„æºä»£ç ã€‚ æ­¤å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°num1å’Œnum2ï¼Œå¹¶è¿”å›ä¸¤è€…çš„æœ€å¤§å€¼ --[[ å‡½æ•°è¿”å›ä¸¤ä¸ªå€¼çš„æœ€å¤§å€¼ --]] function max(num1, num2) if (num1 > num2) then result = num1; else result = num2; end return result; end -- è°ƒç”¨å‡½æ•° print(\"ä¸¤å€¼æ¯”è¾ƒæœ€å¤§å€¼ä¸º \",max(10, 4)) print(\"ä¸¤å€¼æ¯”è¾ƒæœ€å¤§å€¼ä¸º \",max(5, 6)) äºŒã€ä¼ é€’å‡½æ•° åœ¨Luaä¸­ï¼Œå°†å‡½æ•°èµ‹å€¼ç»™å˜é‡ï¼Œä¹Ÿå¯ä»¥å°†å®ƒä»¬ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°ä¼ é€’ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œå®ç°åœ¨Luaä¸­åˆ†é…å’Œä¼ é€’å‡½æ•°ä½œä¸ºå‚æ•°ã€‚ myprint = function(param) print(\"è¿™æ˜¯æ‰“å°å‡½æ•° - ##\", param, \"##\") end function add(num1, num2, functionPrint) result = num1 + num2 -- è°ƒç”¨ä¼ é€’çš„å‡½æ•°å‚æ•° functionPrint(result) end myprint(10) -- myprint å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ add(2, 5, myprint) ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š è¿™æ˜¯æ‰“å°å‡½æ•° - ## 10 ## è¿™æ˜¯æ‰“å°å‡½æ•° - ## 7 ## ä¸‰ã€å¯å˜å‚æ•°çš„å‡½æ•° ä½¿ç”¨ ... ä½œä¸ºå‚æ•°åœ¨Luaä¸­åˆ›å»ºå…·æœ‰å¯å˜å‚æ•°çš„å‡½æ•°ã€‚ ä¸‹é¢æ˜¯é€šè¿‡å‡½æ•°è®¡ç®—è¿”å›å¹³å‡å€¼ï¼Œå¹¶é‡‡ç”¨å˜é‡å‚æ•°çš„ç¤ºä¾‹ã€‚ function average(...) result = 0 local arg={...} for i,v in ipairs(arg) do result = result + v end print(\"æ€»å…±ä¼ å…¥ \" .. #arg .. \" ä¸ªæ•°\") return result/#arg end print(\"å¹³å‡å€¼ä¸º\",average(10,5,3,4,5,6)) è¿è¡Œç»“æœï¼š æ€»å…±ä¼ å…¥ 6 ä¸ªæ•° å¹³å‡å€¼ä¸º 5.5 å››ã€å¤šè¿”å›å€¼ Lua å‡½æ•°å¯ä»¥è¿”å›å¤šä¸ªç»“æœå€¼ï¼Œæ¯”å¦‚è‡ªå¸¦çš„ string.findï¼Œå…¶è¿”å›åŒ¹é…ä¸²\"å¼€å§‹å’Œç»“æŸçš„ä¸‹æ ‡\"ï¼ˆå¦‚æœä¸å­˜åœ¨åŒ¹é…ä¸²è¿”å› nilï¼‰ã€‚ s, e = string.find(\"www.ibloger.net\", \"ibloger\") print(s, e) --> 5 11 Lua å‡½æ•°ä¸­ï¼Œåœ¨ return ååˆ—å‡ºè¦è¿”å›çš„å€¼å¾—åˆ—è¡¨å³å¯è¿”å›å¤šå€¼ï¼Œå¦‚ï¼š function maximum (a) local mi = 1 -- æœ€å¤§å€¼ç´¢å¼• local m = a[mi] -- æœ€å¤§å€¼ for i,val in ipairs(a) do if val > m then mi = i m = val end end return m, mi end print(maximum({8, 10, 23, 12, 5})) --> 23 3 powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 19:41:59 "},"base/Luaå­—ç¬¦ä¸².html":{"url":"base/Luaå­—ç¬¦ä¸².html","title":"Lua å­—ç¬¦ä¸²","keywords":"","body":"Lua å­—ç¬¦ä¸² å­—ç¬¦ä¸²æ˜¯ç”±ä¸€ç³»åˆ—å­—ç¬¦ä»¥åŠæ§åˆ¶å­—ç¬¦ç»„æˆï¼Œå¦‚æ¢é¡µç¬¦ã€‚ å­—ç¬¦ä¸²å¯ä»¥ç”¨ä¸‰ç§å½¢å¼åˆå§‹åŒ–ï¼ŒåŒ…æ‹¬ å•å¼•å·ä¹‹é—´çš„å­—ç¬¦ åŒå¼•å·ä¹‹é—´çš„å­—ç¬¦ [[ å’Œ ]]ä¹‹é—´çš„å­—ç¬¦ string1 = \"Lua\" print(\"\\\"String 1 is\\\"\", string1) string2 = 'ç¨‹åºå–µ' print(\"String 2 is\", string2) string3 = [[\"Java å¤©ä¸‹ç¬¬ä¸€\"]] print(\"String 3 is\",string3) å½“è¿è¡Œä¸Šé¢çš„ç¨‹åºæ—¶ï¼Œå°†å¾—åˆ°ä»¥ä¸‹è¾“å‡º \"String 1 is\" Lua String 2 is ç¨‹åºå–µ String 3 is \"Java å¤©ä¸‹ç¬¬ä¸€\" è½¬ä¹‰å­—ç¬¦ç”¨äºè¡¨ç¤ºä¸èƒ½ç›´æ¥æ˜¾ç¤ºçš„å­—ç¬¦ï¼Œæ¯”å¦‚åé€€é”®ï¼Œå›è½¦é”®ï¼Œç­‰ã€‚å¦‚åœ¨å­—ç¬¦ä¸²è½¬æ¢åŒå¼•å·å¯ä»¥ä½¿ç”¨ \"\\\"\"ã€‚ ä¸€ã€è½¬ä¹‰å­—ç¬¦å¯¹åº”å…³ç³» è½¬ä¹‰å­—ç¬¦ æ„ä¹‰ ASCIIç å€¼ï¼ˆåè¿›åˆ¶ï¼‰ \\a å“é“ƒ(BEL) 007 \\b é€€æ ¼(BS) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°å‰ä¸€åˆ— 008 \\f æ¢é¡µ(FF)ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹é¡µå¼€å¤´ 012 \\n æ¢è¡Œ(LF) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°ä¸‹ä¸€è¡Œå¼€å¤´ 010 \\r å›è½¦(CR) ï¼Œå°†å½“å‰ä½ç½®ç§»åˆ°æœ¬è¡Œå¼€å¤´ 013 \\t æ°´å¹³åˆ¶è¡¨(HT) ï¼ˆè·³åˆ°ä¸‹ä¸€ä¸ªTABä½ç½®ï¼‰ 009 \\v å‚ç›´åˆ¶è¡¨(VT) 011 \\\\ ä»£è¡¨ä¸€ä¸ªåæ–œçº¿å­—ç¬¦''\\' 092 \\' ä»£è¡¨ä¸€ä¸ªå•å¼•å·ï¼ˆæ’‡å·ï¼‰å­—ç¬¦ 039 \\\" ä»£è¡¨ä¸€ä¸ªåŒå¼•å·å­—ç¬¦ 034 ç©ºå­—ç¬¦(NULL) 000 \\ddd 1åˆ°3ä½å…«è¿›åˆ¶æ•°æ‰€ä»£è¡¨çš„ä»»æ„å­—ç¬¦ ä¸‰ä½å…«è¿›åˆ¶ \\xhh 1åˆ°2ä½åå…­è¿›åˆ¶æ‰€ä»£è¡¨çš„ä»»æ„å­—ç¬¦ äºŒä½åå…­è¿›åˆ¶ äºŒã€å­—ç¬¦ä¸²æ“ä½œ Lua æä¾›äº†å¾ˆå¤šçš„æ–¹æ³•æ¥æ”¯æŒå­—ç¬¦ä¸²çš„æ“ä½œï¼š ï¼ˆ1ï¼‰string.upper(argument)ï¼šå­—ç¬¦ä¸²å…¨éƒ¨å¤§å†™å­—æ¯ã€‚ print(string.upper(\"Java\")) --> JAVA ï¼ˆ2ï¼‰string.lower(argument)ï¼šå­—ç¬¦ä¸²å…¨éƒ¨å°å†™å­—æ¯ã€‚ print(string.lower(\"Java\")) --> java ï¼ˆ3ï¼‰string.gsub(mainString, findString, replaceString, num)ï¼šå­—ç¬¦ä¸²ä¸­æ›¿æ¢ mainStringï¼šè¦æ›¿æ¢çš„å­—ç¬¦ findStringï¼šè¢«æ›¿æ¢çš„å­—ç¬¦ replaceStringï¼šè¦æ›¿æ¢çš„å­—ç¬¦ numï¼šæ›¿æ¢æ¬¡æ•°ï¼ˆå¿½ç•¥åˆ™å…¨éƒ¨æ›¿æ¢ï¼‰ å¤šè¿”å›å€¼ç»“æœ print(string.gsub(\"aaaa\", \"a\", \"z\", 3)); --> zzza 3 ï¼ˆ4ï¼‰string.find(str, substr, [init, [end]])ï¼šå­—ç¬¦æœç´¢ åœ¨ä¸€ä¸ªæŒ‡å®šçš„ç›®æ ‡å­—ç¬¦ä¸²ä¸­æœç´¢æŒ‡å®šçš„å†…å®¹(ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºç´¢å¼•)ï¼Œè¿”å›å…¶å…·ä½“ä½ç½®ã€‚ä¸å­˜åœ¨åˆ™è¿”å› nilã€‚ print(string.find(\"Hello Lua user\", \"Lua\", 1)) --> ï¼ˆ5ï¼‰string.reverse(arg)ï¼šå­—ç¬¦ç¿»è½¬ å­—ç¬¦ä¸²åè½¬ print(string.reverse(\"Java\")) --> avaJ ï¼ˆ6ï¼‰string.format(...)ï¼šæ ¼å¼åŒ– ä¸€ä¸ªç±»ä¼¼ printf çš„æ ¼å¼åŒ–å­—ç¬¦ä¸² print(string.format(\"the value isï¼š%d\", 4)) --> the value isï¼š4 print(string.format(\"å­—ç¬¦ä¸²æ ¼å¼åŒ– %s %s\", \"Hello \", \"World\")) --> å­—ç¬¦ä¸²æ ¼å¼åŒ– Hello World print(string.format(\"%.4f\", 1/3)) --> 0.3333 date = 2; month = 1; year = 2019 print(string.format(\"æ—¥æœŸæ ¼å¼åŒ– %02d/%02d/%03d\", date, month, year)) --> æ—¥æœŸæ ¼å¼åŒ– 02/01/2019 ï¼ˆ7ï¼‰string.char(arg) å’Œ string.byte(arg[,int])ï¼šå­—ç¬¦å’Œå­—èŠ‚è¡¨ç¤º char å°†æ•´å‹æ•°å­—è½¬æˆå­—ç¬¦å¹¶è¿æ¥ byte è½¬æ¢å­—ç¬¦ä¸ºæ•´æ•°å€¼(å¯ä»¥æŒ‡å®šæŸä¸ªå­—ç¬¦ï¼Œé»˜è®¤ç¬¬ä¸€ä¸ªå­—ç¬¦) -- è½¬æ¢ç¬¬ä¸€ä¸ªå­—ç¬¦ print(string.byte(\"Lua\")) --> 76 -- è½¬æ¢ç¬¬ä¸‰ä¸ªå­—ç¬¦ print(string.byte(\"Lua\", 3)) --> 97 -- è½¬æ¢æœ«å°¾ç¬¬ä¸€ä¸ªå­—ç¬¦ print(string.byte(\"Lua\", -1)) --> 97 -- ç¬¬äºŒä¸ªå­—ç¬¦ print(string.byte(\"Lua\", 2)) --> 117 -- è½¬æ¢æœ«å°¾ç¬¬äºŒä¸ªå­—ç¬¦ print(string.byte(\"Lua\", -2)) --> 117 -- æ•´æ•° ASCII ç è½¬æ¢ä¸ºå­—ç¬¦ print(string.char(97)) --> a print(string.char(97, 98, 99, 100)) --> abcd ï¼ˆ8ï¼‰string.len(arg)ï¼šå­—ç¬¦ä¸²é•¿åº¦ è®¡ç®—å­—ç¬¦ä¸²é•¿åº¦ ä¸€ä¸ªå­—æ¯ã€æ•°å­—å„å  1 ä¸ªé•¿åº¦ ä¸€ä¸ªæ±‰å­—å  3 ä¸ªé•¿åº¦ ä¸€ä¸ªè¡¨æƒ…å  4 ä¸ªå­—ç¬¦print(string.len(\"chengxumiao\")) --> 11 print(string.len(\"ç¨‹åºå–µ\")) --> 9 print(string.len(\"ğŸ±\")) --> 4 ï¼ˆ9ï¼‰string.rep(string, n)ï¼šå­—ç¬¦ä¸²æ‹·è´ è¿”å›å­—ç¬¦ä¸²stringçš„nä¸ªæ‹·è´ print(string.rep(\"Java\", 3)) --> JavaJavaJava ï¼ˆ10ï¼‰.. ï¼šå­—ç¬¦ä¸²æ‹¼æ¥ print(\"www.ibloger\" .. \".net\") --> www.ibloger.net print(\"ç¨‹\"..\"åº\"..\"å–µ\"..\"ğŸ±\") --> ç¨‹åºå–µğŸ± powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 20:38:39 "},"base/Luaæ•°ç»„.html":{"url":"base/Luaæ•°ç»„.html","title":"Lua æ•°ç»„","keywords":"","body":"Lua æ•°ç»„ æ•°ç»„ï¼Œå°±æ˜¯ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ æŒ‰ä¸€å®šé¡ºåºæ’åˆ—çš„é›†åˆï¼Œå¯ä»¥æ˜¯ä¸€ç»´æ•°ç»„å’Œå¤šç»´æ•°ç»„ã€‚ Lua æ•°ç»„çš„ç´¢å¼•é”®å€¼å¯ä»¥ä½¿ç”¨æ•´æ•°è¡¨ç¤ºï¼Œæ•°ç»„çš„å¤§å°ä¸æ˜¯å›ºå®šçš„ã€‚ ä¸€ã€ä¸€ç»´æ•°ç»„ ä¸€ç»´æ•°ç»„æ˜¯æœ€ç®€å•çš„æ•°ç»„ï¼Œå…¶é€»è¾‘ç»“æ„æ˜¯çº¿æ€§è¡¨ã€‚ä¸€ç»´æ•°ç»„å¯ä»¥ç”¨forå¾ªç¯å‡ºæ•°ç»„ä¸­çš„å…ƒç´ ï¼Œ å¦‚ä¸‹ç¤ºä¾‹ï¼š array = {\"Lua\", \"Tutorial\"} for i= 0, 2 do print(array[i]) end ä»¥ä¸Šä»£ç æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š nil Lua Tutorial åœ¨ Lua ç´¢å¼•å€¼æ˜¯ä»¥ 1 ä¸ºèµ·å§‹ï¼Œä½†ä½ ä¹Ÿå¯ä»¥æŒ‡å®š 0 å¼€å§‹ã€‚å¦‚æœçŸ¥é“çš„ç´¢å¼•æ²¡æœ‰å€¼åˆ™è¿”å› nilã€‚ é™¤æ­¤å¤–æˆ‘ä»¬è¿˜å¯ä»¥ä»¥è´Ÿæ•°ä¸ºæ•°ç»„ç´¢å¼•å€¼ï¼š å¦‚ä¸‹ç¤ºä¾‹ array = {} for i= -2, 2 do array[i] = i *2 end for i = -2,2 do print(array[i]) end ä»¥ä¸Šä»£ç æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š -4 -2 0 2 4 äºŒã€å¤šç»´æ•°ç»„ å¤šç»´æ•°ç»„å³æ•°ç»„ä¸­åŒ…å«æ•°ç»„æˆ–ä¸€ç»´æ•°ç»„çš„ç´¢å¼•é”®å¯¹åº”ä¸€ä¸ªæ•°ç»„ã€‚ ä»¥ä¸‹æ˜¯ä¸€ä¸ªä¸‰è¡Œä¸‰åˆ—çš„é˜µåˆ—å¤šç»´æ•°ç»„ï¼š array = {} for i=1, 3 do array[i] = {} for j=1, 3 do array[i][j] = i*j end end -- è®¿é—®æ•°ç»„ for i=1,3 do for j=1,3 do print('iï¼š'..i, 'j:'..j, '= '..array[i][j]) end end ä»¥ä¸Šä»£ç æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š iï¼š1 j:1 = 1 iï¼š1 j:2 = 2 iï¼š1 j:3 = 3 iï¼š2 j:1 = 2 iï¼š2 j:2 = 4 iï¼š2 j:3 = 6 iï¼š3 j:1 = 3 iï¼š3 j:2 = 6 iï¼š3 j:3 = 9 ä¸åŒç´¢å¼•é”®çš„ä¸‰è¡Œä¸‰åˆ—é˜µåˆ—å¤šç»´æ•°ç»„ã€‚å¦‚ä¸‹ç¤ºä¾‹ -- åˆå§‹åŒ–æ•°ç»„ array = {} maxRows = 3 maxColumns = 3 for row=1,maxRows do for col=1,maxColumns do array[row*maxColumns +col] = row*col end end -- è®¿é—®æ•°ç»„ for row=1,maxRows do for col=1,maxColumns do print(array[row*maxColumns +col]) end end ä»¥ä¸Šä»£ç æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š 1 2 3 2 4 6 3 6 9 å¦‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ‰€çœ‹åˆ°çš„ï¼Œæ•°æ®æ˜¯åŸºäºç´¢å¼•å­˜å‚¨çš„ã€‚å¯ä»¥ä»¥ç¨€ç–çš„æ–¹å¼æ”¾ç½®å…ƒç´ ï¼Œè¿™æ˜¯Luaå®ç°æ•°ç»„çš„æ–¹å¼ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-16 20:58:08 "},"base/Luaè¿­ä»£å™¨.html":{"url":"base/Luaè¿­ä»£å™¨.html","title":"Lua è¿­ä»£å™¨","keywords":"","body":"Lua è¿­ä»£å™¨ è¿­ä»£å™¨ï¼ˆiteratorï¼‰æ˜¯ä¸€ç§å¯¹è±¡ï¼Œå®ƒèƒ½å¤Ÿç”¨æ¥éå†æ ‡å‡†æ¨¡æ¿åº“å®¹å™¨ä¸­çš„éƒ¨åˆ†æˆ–å…¨éƒ¨å…ƒç´ ï¼Œæ¯ä¸ªè¿­ä»£å™¨å¯¹è±¡ä»£è¡¨å®¹å™¨ä¸­çš„ç¡®å®šçš„åœ°å€. åœ¨Luaä¸­è¿­ä»£å™¨æ˜¯ä¸€ç§æ”¯æŒæŒ‡é’ˆç±»å‹çš„ç»“æ„ï¼Œå®ƒå¯ä»¥éå†é›†åˆçš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚ ä¸€ã€è¯­æ³• æ³›å‹ for åœ¨è‡ªå·±å†…éƒ¨ä¿å­˜è¿­ä»£å‡½æ•°ï¼Œå®é™…ä¸Šå®ƒä¿å­˜ä¸‰ä¸ªå€¼ï¼šè¿­ä»£å‡½æ•°ã€çŠ¶æ€å¸¸é‡ã€æ§åˆ¶å˜é‡ã€‚ æ³›å‹ for è¿­ä»£å™¨æä¾›äº†é›†åˆçš„ key/value å¯¹ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š for k, v in pairs(t) do print(k, v) end kï¼šé”®å€¼å¯¹çš„key vï¼šé”®å€¼å¯¹çš„Value pairs(t)ï¼šä¸ºè¡¨è¾¾å¼åˆ—è¡¨ã€‚ æŸ¥çœ‹ä»¥ä¸‹å®ä¾‹: array = {\"Lua\", \"Tutorial\"} for key,value in ipairs(array) do print(key, value) end ä»¥ä¸Šä»£ç æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š 1 Lua 2 Tutorial ä»¥ä¸Šå®ä¾‹ä¸­ä½¿ç”¨äº† Lua é»˜è®¤æä¾›çš„è¿­ä»£å‡½æ•° ipairsã€‚ äºŒã€æ‰§è¡Œè¿‡ç¨‹ æ³›å‹ for çš„æ‰§è¡Œè¿‡ç¨‹ é¦–å…ˆï¼Œåˆå§‹åŒ–ï¼Œè®¡ç®— in åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œè¡¨è¾¾å¼åº”è¯¥è¿”å›èŒƒæ€§foréœ€è¦çš„ä¸‰ä¸ªå€¼ï¼šè¿­ä»£å‡½æ•°ã€çŠ¶æ€å¸¸é‡ã€æ§åˆ¶å˜é‡ï¼›ä¸å¤šå€¼èµ‹å€¼ä¸€æ ·ï¼Œå¦‚æœè¡¨è¾¾å¼è¿”å›çš„ç»“æœä¸ªæ•°ä¸è¶³ä¸‰ä¸ªä¼šè‡ªåŠ¨ç”¨nilè¡¥è¶³ï¼Œå¤šå‡ºéƒ¨åˆ†ä¼šè¢«å¿½ç•¥ã€‚ ç¬¬äºŒï¼Œå°†çŠ¶æ€å¸¸é‡å’Œæ§åˆ¶å˜é‡ä½œä¸ºå‚æ•°è°ƒç”¨è¿­ä»£å‡½æ•°ï¼ˆæ³¨æ„ï¼šå¯¹äºforç»“æ„æ¥è¯´ï¼ŒçŠ¶æ€å¸¸é‡æ²¡æœ‰ç”¨å¤„ï¼Œä»…ä»…åœ¨åˆå§‹åŒ–æ—¶è·å–ä»–çš„å€¼å¹¶ä¼ é€’ç»™è¿­ä»£å‡½æ•°ï¼‰ã€‚ ç¬¬ä¸‰ï¼Œå°†è¿­ä»£å‡½æ•°è¿”å›çš„å€¼èµ‹ç»™å˜é‡åˆ—è¡¨ã€‚ ç¬¬å››ï¼Œå¦‚æœè¿”å›çš„ç¬¬ä¸€ä¸ªå€¼ä¸ºnilå¾ªç¯ç»“æŸï¼Œå¦åˆ™æ‰§è¡Œå¾ªç¯ä½“ã€‚ ç¬¬äº”ï¼Œå›åˆ°ç¬¬äºŒæ­¥å†æ¬¡è°ƒç”¨è¿­ä»£å‡½æ•°ã€‚ åœ¨ Lua ä¸­æˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨å‡½æ•°æ¥æè¿°è¿­ä»£å™¨ï¼Œæ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°å°±è¿”å›é›†åˆçš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ Lua çš„è¿­ä»£å™¨åŒ…å«ä»¥ä¸‹ä¸¤ç§ç±»å‹ï¼šæ— çŠ¶æ€çš„è¿­ä»£å™¨ã€æœ‰çŠ¶æ€çš„è¿­ä»£å™¨ã€‚ æ— çŠ¶æ€çš„è¿­ä»£å™¨ æ— çŠ¶æ€çš„è¿­ä»£å™¨æ˜¯æŒ‡ä¸ä¿ç•™ä»»ä½•çŠ¶æ€çš„è¿­ä»£å™¨ï¼Œå› æ­¤åœ¨å¾ªç¯ä¸­æˆ‘ä»¬å¯ä»¥åˆ©ç”¨æ— çŠ¶æ€è¿­ä»£å™¨é¿å…åˆ›å»ºé—­åŒ…èŠ±è´¹é¢å¤–çš„ä»£ä»·ã€‚ æ¯ä¸€æ¬¡è¿­ä»£ï¼Œè¿­ä»£å‡½æ•°éƒ½æ˜¯ç”¨ä¸¤ä¸ªå˜é‡ï¼ˆçŠ¶æ€å¸¸é‡å’Œæ§åˆ¶å˜é‡ï¼‰çš„å€¼ä½œä¸ºå‚æ•°è¢«è°ƒç”¨ï¼Œä¸€ä¸ªæ— çŠ¶æ€çš„è¿­ä»£å™¨åªåˆ©ç”¨è¿™ä¸¤ä¸ªå€¼å¯ä»¥è·å–ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ è¿™ç§æ— çŠ¶æ€è¿­ä»£å™¨çš„å…¸å‹çš„ç®€å•çš„ä¾‹å­æ˜¯ ipairsï¼Œä»–éå†æ•°ç»„çš„æ¯ä¸€ä¸ªå…ƒç´ ã€‚ ä»¥ä¸‹å®ä¾‹ä½¿ç”¨äº†ä¸€ä¸ªç®€å•çš„å‡½æ•°æ¥å®ç°è¿­ä»£å™¨ï¼Œå®ç°æ•°å­— n çš„å¹³æ–¹ï¼š function square(iteratorMaxCount, currentNumber)s if(currentNumber ä»¥ä¸Šå®ä¾‹è¾“å‡ºç»“æœä¸ºï¼š 1 1 2 4 3 9 ç¨å¾®ä¿®æ”¹ä¸Šé¢çš„ä»£ç ï¼Œä»¥æ¨¡ä»¿è¿­ä»£å™¨çš„ipairså‡½æ•°çš„å·¥ä½œæ–¹å¼ã€‚è¾“å‡ºç»“æœç›¸åŒã€‚ function square(iteratorMaxCount, currentNumber) if(currentNumber å¤šçŠ¶æ€çš„è¿­ä»£å™¨ ä¸Šé¢ä½¿ç”¨å‡½æ•°çš„è¿­ä»£ç¤ºä¾‹ä¸ä¿ç•™çŠ¶æ€ã€‚æ¯æ¬¡è°ƒç”¨è¯¥å‡½æ•°æ—¶ï¼Œå®ƒéƒ½ä¼šæ ¹æ®å‘é€ç»™å‡½æ•°çš„ç¬¬äºŒä¸ªå˜é‡è¿”å›é›†åˆçš„ä¸‹ä¸€ä¸ªå…ƒç´ ã€‚ è¦ä¿æŒå½“å‰å…ƒç´ çš„çŠ¶æ€ï¼Œå¯ä½¿ç”¨é—­åŒ…(Closure)ã€‚é—­åŒ…åœ¨å‡½æ•°è°ƒç”¨ä¸­ä¿ç•™å˜é‡å€¼ã€‚è¦åˆ›å»ºä¸€ä¸ªæ–°çš„é—­åŒ…ï¼Œè¿™é‡Œé¦–å…ˆåˆ›å»ºä¸¤ä¸ªå‡½æ•°ï¼ŒåŒ…æ‹¬é—­åŒ…æœ¬èº«å’Œä¸€ä¸ªå·¥å‚ï¼Œå³åˆ›å»ºé—­åŒ…çš„å‡½æ•°ã€‚ å¦‚ä¸‹æ˜¯ä¸€ä¸ªåˆ›å»ºè¿­ä»£å™¨çš„ä¾‹å­ï¼Œå¹¶å°†ä½¿ç”¨é—­åŒ…ã€‚ array = {\"Java\", \"JavaScript\"} function elementIterator(collection) local index = 0 local count = #collection -- é—­åŒ…å‡½æ•° return function () index = index + 1 if index è¾“å‡ºç»“æœï¼š Java JavaScript ä»¥ä¸Šå®ä¾‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒelementIterator å†…ä½¿ç”¨äº†é—­åŒ…å‡½æ•°ï¼Œå®ç°è®¡ç®—é›†åˆå¤§å°å¹¶è¾“å‡ºå„ä¸ªå…ƒç´ ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-17 14:34:48 "},"base/Luaè¡¨table.html":{"url":"base/Luaè¡¨table.html","title":"Lua table è¡¨","keywords":"","body":"Lua è¡¨ table table æ˜¯ Lua çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç”¨æ¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸åŒçš„æ•°æ®ç±»å‹ï¼Œå¦‚ï¼šæ•°å­—ã€å­—å…¸ç­‰ã€‚ table ä½¿ç”¨å…³è”å‹æ•°ç»„ï¼Œä½ å¯ä»¥ç”¨ä»»æ„ç±»å‹çš„å€¼æ¥ä½œæ•°ç»„çš„ç´¢å¼•ï¼Œä½†è¿™ä¸ªå€¼ä¸èƒ½æ˜¯ nilã€‚ table æ˜¯ä¸å›ºå®šå¤§å°çš„ï¼Œä½ å¯ä»¥æ ¹æ®è‡ªå·±éœ€è¦è¿›è¡Œæ‰©å®¹ã€‚ table å¯ä»¥è§£å†³æ¨¡å—ï¼ˆmoduleï¼‰ã€åŒ…ï¼ˆpackageï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰çš„è¡¨ç¤ºã€‚ä¾‹å¦‚ string.format è¡¨ç¤ºä½¿ç”¨ format æ¥ç´¢å¼• table stringã€‚ ä¸€ã€table(è¡¨)çš„æ„é€  æ„é€ å™¨æ˜¯åˆ›å»ºå’Œåˆå§‹åŒ–è¡¨çš„è¡¨è¾¾å¼ã€‚è¡¨æ˜¯ Lua ç‰¹æœ‰çš„åŠŸèƒ½å¼ºå¤§çš„ä¸œè¥¿ã€‚æœ€ç®€å•çš„æ„é€ å‡½æ•°æ˜¯ {}ï¼Œç”¨æ¥åˆ›å»ºä¸€ä¸ªç©ºè¡¨ã€‚å¯ä»¥ç›´æ¥åˆå§‹åŒ–æ•°ç»„ã€‚ -- åˆå§‹åŒ–è¡¨ mytable = {} -- æŒ‡å®šå€¼ mytable[1]= \"Lua\" -- ç§»é™¤å¼•ç”¨ mytable = nil -- lua åƒåœ¾å›æ”¶ä¼šé‡Šæ”¾å†…å­˜ å½“æˆ‘ä»¬ä¸º table a å¹¶è®¾ç½®å…ƒç´ ï¼Œç„¶åå°† a èµ‹å€¼ç»™ bï¼Œåˆ™ a ä¸ b éƒ½æŒ‡å‘åŒä¸€ä¸ªå†…å­˜ã€‚å¦‚æœ a è®¾ç½®ä¸º nilï¼Œåˆ™ b åŒæ ·èƒ½è®¿é—® table çš„å…ƒç´ ã€‚å½“æ²¡æœ‰å¯¹è¡¨çš„å¼•ç”¨æ—¶ï¼ŒLuaçš„åƒåœ¾å›æ”¶æœºåˆ¶ä¼šæ¸…ç†ç›¸å¯¹åº”çš„å†…å­˜ã€‚ -- ç®€å•çš„ table mytable = {} print(\"mytable çš„ç±»å‹æ˜¯ \",type(mytable)) --> mytable çš„ç±»å‹æ˜¯ table mytable[1]= \"Lua\" mytable[\"wow\"] = \"ä¿®æ”¹å‰\" print(\"mytable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯ \", mytable[1]) --> mytable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯ Lua print(\"mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ \", mytable[\"wow\"]) --> mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ ä¿®æ”¹å‰ -- alternatetableå’Œmytableçš„æ˜¯æŒ‡åŒä¸€ä¸ª table alternatetable = mytable print(\"alternatetable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯ \", alternatetable[1]) --> mytable ç´¢å¼•ä¸º 1 çš„å…ƒç´ æ˜¯ Lua print(\"mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ \", alternatetable[\"wow\"]) --> mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ ä¿®æ”¹å‰ alternatetable[\"wow\"] = \"ä¿®æ”¹å\" print(\"mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ \", mytable[\"wow\"]) --> mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ ä¿®æ”¹å -- é‡Šæ”¾å˜é‡ alternatetable = nil print(\"alternatetable æ˜¯ \", alternatetable) --> alternatetable æ˜¯ nil -- mytable ä»ç„¶å¯ä»¥è®¿é—® print(\"mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ \", mytable[\"wow\"]) --> mytable ç´¢å¼•ä¸º wow çš„å…ƒç´ æ˜¯ ä¿®æ”¹å mytable = nil print(\"mytable æ˜¯ \", mytable) --> mytable æ˜¯ nil äºŒã€Table æ“ä½œ ï¼ˆ1ï¼‰table.concat (table [, step [, start [, end]]])ï¼šè¿æ¥ æ ¹æ®ç»™å®šçš„å‚æ•°è¿æ¥è¡¨ä¸­çš„å­—ç¬¦ä¸²ï¼Œtable.concat() åˆ—å‡ºå‚æ•°ä¸­æŒ‡å®š table æ•°ç»„éƒ¨åˆ†ä» start ä½ç½®åˆ° end ä½ç½®çš„æ‰€æœ‰å…ƒç´ ï¼Œå…ƒç´ é—´ä»¥æŒ‡å®šçš„åˆ†éš”ç¬¦ step éš”å¼€ã€‚ fruits = {\"banana\",\"orange\",\"apple\"} -- è¿”å› table è¿æ¥åçš„å­—ç¬¦ä¸² print(\"è¿æ¥åçš„å­—ç¬¦ä¸² \",table.concat(fruits)) --> è¿æ¥åçš„å­—ç¬¦ä¸² bananaorangeapple -- æŒ‡å®šè¿æ¥å­—ç¬¦ print(\"è¿æ¥åçš„å­—ç¬¦ä¸² \",table.concat(fruits,\", \")) --> è¿æ¥åçš„å­—ç¬¦ä¸² banana, orange, apple -- æŒ‡å®šç´¢å¼•æ¥è¿æ¥ table print(\"è¿æ¥åçš„å­—ç¬¦ä¸² \",table.concat(fruits,\", \", 2,3)) --> è¿æ¥åçš„å­—ç¬¦ä¸² orange, apple ï¼ˆ2ï¼‰table.insert (table, [pos,] value)ï¼šæ’å…¥ åœ¨ table çš„æ•°ç»„éƒ¨åˆ†æŒ‡å®šä½ç½® pos æ’å…¥ä¸€ä¸ªå€¼ä¸º value çš„å…ƒç´ ï¼Œpos å‚æ•°å¯é€‰, é»˜è®¤ä¸ºæ•°ç»„éƒ¨åˆ†æœ«å°¾ã€‚ fruits = {\"banana\",\"orange\",\"apple\"} -- åœ¨æœ«å°¾æ’å…¥ table.insert(fruits, \"mango\") print(\"ç´¢å¼•ä¸º 4 çš„å…ƒç´ ä¸º \",fruits[4]) --> ç´¢å¼•ä¸º 4 çš„å…ƒç´ ä¸º mango -- åœ¨ç´¢å¼•ä¸º 2 çš„é”®å¤„æ’å…¥ table.insert(fruits,2, \"grapes\") print(\"ç´¢å¼•ä¸º 2 çš„å…ƒç´ ä¸º \", fruits[2]) --> ç´¢å¼•ä¸º 2 çš„å…ƒç´ ä¸º grapes print(\"æœ€åä¸€ä¸ªå…ƒç´ ä¸º \", fruits[5]) --> æœ€åä¸€ä¸ªå…ƒç´ ä¸º mango -- åœ¨æœ«å°¾ç§»é™¤ table.remove(fruits) print(\"ç§»é™¤åæœ€åä¸€ä¸ªå…ƒç´ ä¸º \", fruits[5]) ï¼ˆ3ï¼‰table.maxn (table)ï¼šæœ€å¤§keyå€¼ æŒ‡å®š table ä¸­æ‰€æœ‰æ­£æ•° key å€¼ä¸­æœ€å¤§çš„ key å€¼ï¼Œå¦‚æœä¸å­˜åœ¨ key å€¼ä¸ºæ­£æ•°çš„å…ƒç´ , åˆ™è¿”å› 0ã€‚ Lua5.2 ä¹‹åè¯¥æ–¹æ³•å·²ç»ä¸å­˜åœ¨äº†ï¼Œæœ¬æ–‡ä½¿ç”¨äº†è‡ªå®šä¹‰å‡½æ•°å®ç° function table_maxn(t) local mn = 0 for k, v in pairs(t) do if mn tbl é•¿åº¦ 3 print(\"tbl æœ€å¤§å€¼ \", table_maxn(tbl)) --> tbl æœ€å¤§å€¼ 26 ï¼ˆ4ï¼‰table.remove (table [, pos])ï¼šç§»é™¤ è¿”å› table æ•°ç»„éƒ¨åˆ†ä½äº pos ä½ç½®çš„å…ƒç´ ï¼Œå…¶åçš„å…ƒç´ ä¼šè¢«å‰ç§»ï¼Œposå‚æ•°å¯é€‰, é»˜è®¤ä¸º table é•¿åº¦, å³ä»æœ€åä¸€ä¸ªå…ƒç´ åˆ èµ·ã€‚ ï¼ˆ5ï¼‰table.sort (table [, comp])ï¼šæ’åº æ ¹æ®å¯é€‰çš„æ¯”è¾ƒå™¨å‚æ•° comp å¯¹è¡¨è¿›è¡Œå‡åºæ’åºã€‚ fruits = {\"banana\",\"orange\",\"apple\",\"grapes\"} for k,v in ipairs(fruits) do print(k,v) end table.sort(fruits) print(\"æ’åº\") for k,v in ipairs(fruits) do print(k,v) end powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-17 15:29:59 "},"base/Luaæ¨¡å—ä¸åŒ….html":{"url":"base/Luaæ¨¡å—ä¸åŒ….html","title":"Lua æ¨¡å—ä¸åŒ…","keywords":"","body":"Lua æ¨¡å—ä¸åŒ… æ¨¡å—ç±»ä¼¼äºä¸€ä¸ªå°è£…åº“ï¼Œä» Lua 5.1 å¼€å§‹ï¼ŒLua åŠ å…¥äº†æ ‡å‡†çš„æ¨¡å—ç®¡ç†æœºåˆ¶ï¼Œå¯ä»¥æŠŠä¸€äº›å…¬ç”¨çš„ä»£ç æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶é‡Œï¼Œä»¥ API æ¥å£çš„å½¢å¼åœ¨å…¶ä»–åœ°æ–¹è°ƒç”¨ï¼Œæœ‰åˆ©äºä»£ç çš„é‡ç”¨å’Œé™ä½ä»£ç è€¦åˆåº¦ã€‚ ä¸€ã€æ¨¡å— Lua çš„æ¨¡å—æ˜¯ç”±å˜é‡ã€å‡½æ•°ç­‰å·²çŸ¥å…ƒç´ ç»„æˆçš„ tableï¼Œå› æ­¤åˆ›å»ºä¸€ä¸ªæ¨¡å—å¾ˆç®€å•ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª tableï¼Œç„¶åæŠŠéœ€è¦å¯¼å‡ºçš„å¸¸é‡ã€å‡½æ•°æ”¾å…¥å…¶ä¸­ï¼Œæœ€åè¿”å›è¿™ä¸ª table å°±è¡Œã€‚ ä»¥ä¸‹ä¸ºåˆ›å»ºè‡ªå®šä¹‰æ¨¡å— module.luaï¼Œæ–‡ä»¶ä»£ç æ ¼å¼å¦‚ä¸‹ï¼š -- æ–‡ä»¶åä¸º module.lua -- å®šä¹‰ä¸€ä¸ªåä¸º module çš„æ¨¡å— module = {} -- å®šä¹‰ä¸€ä¸ªå¸¸é‡ module.constant = \"è¿™æ˜¯ä¸€ä¸ªå¸¸é‡\" -- å®šä¹‰ä¸€ä¸ªå‡½æ•° function module.func1() io.write(\"è¿™æ˜¯ä¸€ä¸ªå…¬æœ‰å‡½æ•°ï¼\\n\") end local function func2() print(\"è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼\") end function module.func3() func2() end return module ç”±ä¸Šå¯çŸ¥ï¼Œæ¨¡å—çš„ç»“æ„å°±æ˜¯ä¸€ä¸ª table çš„ç»“æ„ï¼Œå› æ­¤å¯ä»¥åƒæ“ä½œè°ƒç”¨ table é‡Œçš„å…ƒç´ é‚£æ ·æ¥æ“ä½œè°ƒç”¨æ¨¡å—é‡Œçš„å¸¸é‡æˆ–å‡½æ•°ã€‚ ä¸Šé¢çš„ func2 å£°æ˜ä¸ºç¨‹åºå—çš„å±€éƒ¨å˜é‡ï¼Œå³è¡¨ç¤ºä¸€ä¸ªç§æœ‰å‡½æ•°ï¼Œå› æ­¤æ˜¯ä¸èƒ½ä»å¤–éƒ¨è®¿é—®æ¨¡å—é‡Œçš„è¿™ä¸ªç§æœ‰å‡½æ•°ï¼Œå¿…é¡»é€šè¿‡æ¨¡å—é‡Œçš„å…¬æœ‰å‡½æ•°æ¥è°ƒã€‚ äºŒã€require å‡½æ•° Lua æä¾›äº†ä¸€ä¸ªåä¸º require çš„å‡½æ•°ç”¨æ¥åŠ è½½æ¨¡å—ã€‚è¦åŠ è½½ä¸€ä¸ªæ¨¡å—ï¼Œåªéœ€è¦ç®€å•åœ°è°ƒç”¨å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ï¼š require(\"\") -- æˆ–è€… require \"\" æ‰§è¡Œ require åä¼šè¿”å›ä¸€ä¸ªç”±æ¨¡å—å¸¸é‡æˆ–å‡½æ•°ç»„æˆçš„ tableï¼Œå¹¶ä¸”è¿˜ä¼šå®šä¹‰ä¸€ä¸ªåŒ…å«è¯¥ table çš„å…¨å±€å˜é‡ã€‚ -- module æ¨¡å—ä¸ºä¸Šæ–‡æåˆ°åˆ° module.lua require(\"module\") print(module.constant) --> è¿™æ˜¯ä¸€ä¸ªå¸¸é‡ module.func1() --> è¿™æ˜¯ä¸€ä¸ªå…¬æœ‰å‡½æ•°ï¼ module.func3() --> è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼ æ³¨æ„ï¼š ï¼ˆ1ï¼‰å°†è¿è¡Œçš„æ¨¡å—å’Œæ–‡ä»¶æ”¾åœ¨åŒä¸€ç›®å½•ä¸­ã€‚ï¼ˆ2ï¼‰æ¨¡å—åç§°åŠå…¶æ–‡ä»¶åç›¸åŒã€‚ æˆ–è€…å¯ä»¥ç»™åŠ è½½çš„æ¨¡å—å®šä¹‰ä¸€ä¸ªå±€éƒ¨çš„åˆ«åå˜é‡ã€‚ -- åˆ«åå˜é‡ m local m = require(\"module\") print(m.constant) --> è¿™æ˜¯ä¸€ä¸ªå¸¸é‡ m.func1() --> è¿™æ˜¯ä¸€ä¸ªå…¬æœ‰å‡½æ•°ï¼ m.func3() --> è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼ è¿˜å¯ä»¥ä¸ºä¸ªåˆ«å‡½æ•°è®¾ç½®ä¸åŒçš„åç§°ã€‚ local m = require(\"module\") local f = m.func1 print(m.constant) --> è¿™æ˜¯ä¸€ä¸ªå¸¸é‡ f() --> è¿™æ˜¯ä¸€ä¸ªå…¬æœ‰å‡½æ•°ï¼ m.func3() --> è¿™æ˜¯ä¸€ä¸ªç§æœ‰å‡½æ•°ï¼ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-17 16:30:13 "},"base/Luaå…ƒè¡¨.html":{"url":"base/Luaå…ƒè¡¨.html","title":"Lua å…ƒè¡¨","keywords":"","body":"Lua å…ƒè¡¨ï¼ˆMetatableï¼‰ åœ¨ Lua table ä¸­æˆ‘ä»¬å¯ä»¥è®¿é—®å¯¹åº”çš„ key æ¥å¾—åˆ° value å€¼ï¼Œä½†æ˜¯å´æ— æ³•å¯¹ä¸¤ä¸ª table è¿›è¡Œæ“ä½œã€‚ å› æ­¤ Lua æä¾›äº†å…ƒè¡¨ï¼ˆMetatableï¼‰ï¼Œå…è®¸æˆ‘ä»¬æ”¹å˜ table çš„è¡Œä¸ºï¼Œæ¯ä¸ªè¡Œä¸ºå…³è”äº†å¯¹åº”çš„å…ƒæ–¹æ³•ï¼ˆMetaMethodï¼‰ã€‚ ä¾‹å¦‚ï¼šä½¿ç”¨å…ƒè¡¨å¯ä»¥å®šä¹‰è®¡ç®—ä¸¤ä¸ª table çš„ç›¸åŠ æ“ä½œã€‚å…ˆæ£€æŸ¥ä¸¤è€…ä¹‹ä¸€æ˜¯å¦æœ‰å…ƒè¡¨ï¼Œä¹‹åæ£€æŸ¥æ˜¯å¦æœ‰ä¸€ä¸ªå« __add çš„å…ƒæ–¹æ³•ï¼Œè‹¥æ‰¾åˆ°ï¼Œåˆ™è°ƒç”¨å¯¹åº”çš„å€¼ã€‚ ä¸€ã€è®¾ç½®ä¸è·å– æœ‰ä¸¤ä¸ªå¾ˆé‡è¦çš„å‡½æ•°æ¥å¤„ç†å…ƒè¡¨ï¼š setmetatable(table, metatable)ï¼šä¸ºè¡¨è®¾ç½®å…ƒè¡¨ã€‚ getmetatable(table)ï¼šè·å–è¡¨çš„å…ƒè¡¨ã€‚ å¦‚ä¸‹ç¤ºä¾‹ï¼šå¯¹æŒ‡å®šçš„è¡¨è®¾ç½®å…ƒè¡¨ã€‚ mytable = {} -- æ™®é€šè¡¨ mymetatable = {} -- å…ƒè¡¨ setmetatable(mytable, mymetatable) -- æŠŠ mymetatable è®¾ä¸º mytable çš„å…ƒè¡¨ ç­‰åŒäº mytable = setmetatable({},{}) å¦‚ä¸‹ç¤ºä¾‹ï¼šè¿”å›å¯¹è±¡å…ƒè¡¨ã€‚ getmetatable(mytable) -- è¿”å› mymetatable äºŒã€__index å…ƒæ–¹æ³• è¿™æ˜¯ metatable æœ€å¸¸ç”¨çš„é”®ã€‚ å½“ä½ é€šè¿‡é”®æ¥è®¿é—® table çš„æ—¶å€™ï¼Œå¦‚æœè¿™ä¸ªé”®æœ‰å€¼å°±ç›´æ¥è¿”å›ï¼›å¦‚æœæ²¡æœ‰å€¼ï¼Œé‚£ä¹ˆ Lua å°±ä¼šå¯»æ‰¾è¯¥ table çš„ metatableï¼Œå‡å®š metatable ä¸­æœ‰ __index é”®ã€‚å¦‚æœ __index åŒ…å«ä¸€ä¸ªè¡¨æ ¼ï¼ŒLua ä¼šåœ¨è¡¨æ ¼ä¸­æŸ¥æ‰¾ç›¸åº”çš„é”®ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨ lua å‘½ä»¤è¿›å…¥äº¤äº’æ¨¡å¼æŸ¥çœ‹ï¼š Lua 5.3.5 Copyright (C) 1994-2018 Lua.org, PUC-Rio > other = {foo=3} > t = setmetatable({}, {__index = other}) > t.foo 3 > t.abc nil > å¦‚æœ __index åŒ…å«ä¸€ä¸ªå‡½æ•°çš„è¯ï¼ŒLua å°±ä¼šè°ƒç”¨é‚£ä¸ªå‡½æ•°ï¼Œtable å’Œé”®ä¼šä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ã€‚ __index å…ƒæ–¹æ³•æŸ¥çœ‹è¡¨ä¸­å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›ç»“æœä¸º nilï¼›å¦‚æœå­˜åœ¨åˆ™ç”± __index è¿”å›ç»“æœã€‚ mytable = setmetatable({key1 = \"value1\"}, { __index = function(mytable, key) if key == \"key2\" then return \"metatablevalue\" else return nil end end }) print(mytable.key1, mytable.key2) --> value1 metatablevalue è§£æï¼š mytable è¡¨èµ‹å€¼ä¸º {key1 = \"value1\"}ã€‚ mytable è®¾ç½®äº†å…ƒè¡¨ï¼Œå…ƒæ–¹æ³•ä¸º __indexã€‚ åœ¨ mytable è¡¨ä¸­æŸ¥æ‰¾ key1ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œè¿”å›è¯¥å…ƒç´ ï¼Œæ‰¾ä¸åˆ°åˆ™ç»§ç»­ã€‚ åœ¨ mytable è¡¨ä¸­æŸ¥æ‰¾ key2ï¼Œå¦‚æœæ‰¾åˆ°ï¼Œè¿”å›è¯¥å…ƒç´ ï¼Œæ‰¾ä¸åˆ°åˆ™ç»§ç»­ã€‚ åˆ¤æ–­å…ƒè¡¨æœ‰æ²¡æœ‰ __index æ–¹æ³•ï¼Œå¦‚æœ __index æ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è°ƒç”¨è¯¥å‡½æ•°ã€‚ å…ƒæ–¹æ³•ä¸­æŸ¥çœ‹æ˜¯å¦ä¼ å…¥ key2 é”®çš„å‚æ•°ï¼ˆç¤ºä¾‹ä¸­ mytable.key2 å·²è®¾ç½®ï¼‰ï¼Œå¦‚æœä¼ å…¥ key2 å‚æ•°è¿”å› metatablevalueï¼Œå¦åˆ™è¿”å› mytable å¯¹åº”çš„é”®å€¼ã€‚ ä»¥ä¸Šä»£ç å¯ä»¥ç®€åŒ–ä¸ºï¼š mytable = setmetatable({key1 = \"value1\"}, { __index = {key2 = \"metatablevalue\"} }) print(mytable.key1, mytable.key2) ä¸‰ã€__newindex å…ƒæ–¹æ³• __newindex å…ƒæ–¹æ³•ç”¨æ¥å¯¹è¡¨æ›´æ–°ï¼Œ__index åˆ™ç”¨æ¥å¯¹è¡¨è®¿é—® ã€‚ å½“å°† __newindex æ·»åŠ åˆ° metatable æ—¶ï¼Œå¦‚æœè¡¨ä¸­æ²¡æœ‰é”®ï¼Œåˆ™æ–°é”®çš„è¡Œä¸ºå°†ç”±å…ƒæ–¹æ³•å®šä¹‰ã€‚ å½“ä½ ç»™è¡¨çš„ä¸€ä¸ªç¼ºå°‘çš„ç´¢å¼•èµ‹å€¼ï¼Œè§£é‡Šå™¨å°±ä¼šæŸ¥æ‰¾ __newindex å…ƒæ–¹æ³•ï¼šå¦‚æœå­˜åœ¨åˆ™è°ƒç”¨è¿™ä¸ªå‡½æ•°è€Œä¸è¿›è¡Œèµ‹å€¼æ“ä½œã€‚ å¦‚ä¸‹ç¤ºä¾‹ï¼šå½“ä¸»è¡¨ä¸­æ²¡æœ‰ç´¢å¼•æ—¶è®¾ç½® metatable ç´¢å¼•ã€‚ mymetatable = {} mytable = setmetatable({key1 = \"value1\"}, { __newindex = mymetatable }) print(mytable.key1) --> value1 mytable.newkey = \"æ–°å€¼2\" print(mytable.newkey, mymetatable.newkey) --> nil æ–°å€¼2 mytable.key1 = \"æ–°å€¼1\" print(mytable.key1, mymetatable.newkey1) --> æ–°å€¼1 nil ä»¥ä¸Šå®ä¾‹ä¸­è¡¨è®¾ç½®äº†å…ƒæ–¹æ³• __newindexï¼Œåœ¨å¯¹æ–°ç´¢å¼•é”®ï¼ˆnewkeyï¼‰èµ‹å€¼æ—¶ï¼ˆmytable.newkey = \"æ–°å€¼2\"ï¼‰ï¼Œä¼šè°ƒç”¨å…ƒæ–¹æ³•ï¼Œè€Œä¸è¿›è¡Œèµ‹å€¼ã€‚è€Œå¦‚æœå¯¹å·²å­˜åœ¨çš„ç´¢å¼•é”®ï¼ˆkey1ï¼‰ï¼Œåˆ™ä¼šè¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸è°ƒç”¨å…ƒæ–¹æ³• __newindexã€‚ rawset å‡½æ•° ä»¥ä¸‹å®ä¾‹ä½¿ç”¨äº† rawset å‡½æ•°æ¥æ›´æ–°è¡¨ï¼š mytable = setmetatable({key1 = \"value1\"}, { __newindex = function(mytable, key, value) print(key, value) rawset(mytable, key, \"\\\"\"..value..\"\\\"\") end }) mytable.key1 = \"new value\" mytable.key2 = 4 mytable.key3 = 'abc' print(mytable.key1, mytable.key2, mytable.key3) æ‰§è¡Œç»“æœ key2 4 key3 abc new value \"4\" \"abc\" rawset è®¾ç½®å€¼è€Œä¸ä½¿ç”¨å…ƒè¡¨çš„ __newindexã€‚ ç±»ä¼¼åœ°ï¼Œæœ‰ä¸€ä¸ª rawget å¯ä»¥åœ¨ä¸ä½¿ç”¨ __index çš„æƒ…å†µä¸‹è·å–å€¼ã€‚ å››ã€å…ƒç´ æ·»åŠ æ“ä½œç¬¦ ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†ä¸¤è¡¨ç›¸åŠ æ“ä½œï¼š -- ä¸¤è¡¨ç›¸åŠ æ“ä½œ mytable = setmetatable({ 1, 2, 3 }, { __add = function(mytable, newtable) for i = 1, #(newtable) do table.insert(mytable, #(mytable)+1, newtable[i]) -- æ’å…¥ end return mytable end }) secondtable = {4, 5, 6} mytable = mytable + secondtable for k,v in ipairs(mytable) do print(k,v) end æ‰§è¡Œç»“æœ 1 1 2 2 3 3 4 4 5 5 6 6 __add æ˜¯å…ƒæ–¹æ³•ï¼ˆMetaMethodï¼‰ï¼Œè¿™æ˜¯ Lua å†…å»ºçº¦å®šçš„ï¼Œå…¶å®ƒçš„è¿˜æœ‰å¦‚ä¸‹çš„ MetaMethod æ¨¡å¼ æè¿° __add(a, b) å¯¹åº”è¡¨è¾¾å¼ a + b __sub(a, b) å¯¹åº”è¡¨è¾¾å¼ a - b __mul(a, b) å¯¹åº”è¡¨è¾¾å¼ a * b __div(a, b) å¯¹åº”è¡¨è¾¾å¼ a / b __mod(a, b) å¯¹åº”è¡¨è¾¾å¼ a % b __pow(a, b) å¯¹åº”è¡¨è¾¾å¼ a ^ b __unm(a) å¯¹åº”è¡¨è¾¾å¼ -a __concat(a, b) å¯¹åº”è¡¨è¾¾å¼ a .. b __len(a) å¯¹åº”è¡¨è¾¾å¼ #a __eq(a, b) å¯¹åº”è¡¨è¾¾å¼ a == b __lt(a, b) å¯¹åº”è¡¨è¾¾å¼ a __le(a, b) å¯¹åº”è¡¨è¾¾å¼ a __index(a, b) å¯¹åº”è¡¨è¾¾å¼ a.b __newindex(a, b, c) å¯¹åº”è¡¨è¾¾å¼ a.b = c __call(a, ...) å¯¹åº”è¡¨è¾¾å¼ a(...) __call å…ƒæ–¹æ³• __call å…ƒæ–¹æ³•åœ¨ Lua è°ƒç”¨ä¸€ä¸ªå€¼æ—¶è°ƒç”¨ã€‚ ä»¥ä¸‹å®ä¾‹æ¼”ç¤ºäº†è®¡ç®—è¡¨ä¸­å…ƒç´ çš„å’Œï¼š mytable = setmetatable({10}, { __call = function(mytable, newtable) sum = 0 for i = 1, #(mytable) do sum = sum + mytable[i] end for i = 1, #(newtable) do sum = sum + newtable[i] end return sum end }) newtable = {10,20,30} print(mytable(newtable)) --> 70 __tostring å…ƒæ–¹æ³• __tostring å…ƒæ–¹æ³•ç”¨äºä¿®æ”¹è¡¨çš„è¾“å‡ºè¡Œä¸ºã€‚ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬è‡ªå®šä¹‰äº†è¡¨çš„è¾“å‡ºå†…å®¹ï¼š mytable = setmetatable({ 10, 20, 30 }, { __tostring = function(mytable) sum = 0 for k, v in pairs(mytable) do sum = sum + v end return \"è¡¨æ‰€æœ‰å…ƒç´ çš„å’Œä¸º \" .. sum end }) print(mytable) --> è¡¨æ‰€æœ‰å…ƒç´ çš„å’Œä¸º 60 ä»æœ¬æ–‡ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“å…ƒè¡¨å¯ä»¥å¾ˆå¥½çš„ç®€åŒ–æˆ‘ä»¬çš„ä»£ç åŠŸèƒ½ï¼Œæ‰€ä»¥äº†è§£ Lua çš„å…ƒè¡¨ï¼Œå¯ä»¥è®©æˆ‘ä»¬å†™å‡ºæ›´åŠ ç®€å•ä¼˜ç§€çš„ Lua ä»£ç ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-17 19:04:00 "},"base/LuaååŒç¨‹åº.html":{"url":"base/LuaååŒç¨‹åº.html","title":"Lua ååŒç¨‹åº","keywords":"","body":"Lua ååŒç¨‹åº coroutine ä¸€ã€ååŒ (coroutine) ååŒç¨‹åº ä¸ çº¿ç¨‹ æ¯”è¾ƒç±»ä¼¼ï¼šæ‹¥æœ‰ç‹¬ç«‹çš„å †æ ˆï¼Œç‹¬ç«‹çš„å±€éƒ¨å˜é‡ï¼Œç‹¬ç«‹çš„æŒ‡ä»¤æŒ‡é’ˆï¼ŒåŒæ—¶åˆä¸å…¶å®ƒååŒç¨‹åºå…±äº«å…¨å±€å˜é‡å’Œå…¶å®ƒå¤§éƒ¨åˆ†ä¸œè¥¿ã€‚ ååŒæ˜¯éå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œä½†æ˜¯ç”¨èµ·æ¥ä¹Ÿå¾ˆå¤æ‚ã€‚ çº¿ç¨‹å’ŒååŒç¨‹åºåŒºåˆ« ä¸€ä¸ªå…·æœ‰å¤šä¸ªçº¿ç¨‹çš„ç¨‹åºå¯ä»¥åŒæ—¶è¿è¡Œå‡ ä¸ªçº¿ç¨‹ï¼Œè€ŒååŒç¨‹åºå´éœ€è¦å½¼æ­¤åä½œçš„è¿è¡Œã€‚ åœ¨ä»»ä¸€æŒ‡å®šæ—¶åˆ»åªæœ‰ä¸€ä¸ªååŒç¨‹åºåœ¨è¿è¡Œï¼Œå¹¶ä¸”è¿™ä¸ªæ­£åœ¨è¿è¡Œçš„ååŒç¨‹åºåªæœ‰åœ¨æ˜ç¡®çš„è¢«è¦æ±‚æŒ‚èµ·çš„æ—¶å€™æ‰ä¼šè¢«æŒ‚èµ·ã€‚ ååŒç¨‹åºæœ‰ç‚¹ç±»ä¼¼åŒæ­¥çš„å¤šçº¿ç¨‹ï¼Œåœ¨ç­‰å¾…åŒä¸€ä¸ªçº¿ç¨‹é”çš„å‡ ä¸ªçº¿ç¨‹æœ‰ç‚¹ç±»ä¼¼ååŒã€‚ äºŒã€æ–¹æ³• æ–¹æ³• ä½œç”¨æè¿° coroutine.create(f) ä½¿ç”¨å‡½æ•° f åˆ›å»ºä¸€ä¸ªæ–°çš„ååŒç¨‹åºï¼Œå¹¶è¿”å› thread ç±»å‹çš„å¯¹è±¡ã€‚ coroutine.resume(co [, val1, ...]) æ¢å¤ï¼ˆé‡å¯ï¼‰åç¨‹ co å¹¶ä¼ é€’å‚æ•°(å¦‚æœæœ‰çš„è¯)ã€‚å®ƒè¿”å›æ“ä½œçŠ¶æ€å’Œå¯é€‰çš„å…¶ä»–è¿”å›å€¼ã€‚ coroutine.running() è¿”å›æ­£åœ¨è·‘çš„coroutineï¼Œå½“ä½¿ç”¨ running çš„æ—¶å€™ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªcoroutingçš„çº¿ç¨‹å·ã€‚ coroutine.status(co) æŸ¥çœ‹coroutineçš„çŠ¶æ€ï¼Œæœ‰ deadï¼Œsuspendï¼Œrunning ä¸‰ç§ã€‚ coroutine.wrap(f) ä¸ create ä¸€æ ·ï¼Œcoroutine.wrap å‡½æ•°ä¼šåˆ›å»ºä¸€ä¸ªååŒç¨‹åºï¼Œä½†å®ƒä¸ä¼šè¿”å›ååŒç¨‹åºæœ¬èº«ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå½“è°ƒç”¨å®ƒæ—¶ï¼Œå®ƒä¼šæ¢å¤ååŒç¨‹åºã€‚ coroutine.yield(...) æŒ‚èµ·coroutineï¼Œæš‚åœæ­£åœ¨è¿è¡Œçš„ååŒç¨‹åºã€‚ä¼ é€’ç»™æ­¤æ–¹æ³•çš„å‚æ•°å……å½“ resume å‡½æ•°çš„é™„åŠ è¿”å›å€¼ã€‚ ä¸‰ã€ç¤ºä¾‹ ç¤ºä¾‹1 -- coroutine_test.lua æ–‡ä»¶ co = coroutine.create(function(i) print(i); end) coroutine.resume(co, 1) --> 1 print(coroutine.status(co)) --> deadï¼ˆæ­»äº¡ï¼‰ print(\"----------\") co = coroutine.wrap(function(i) print(i); end) -- å‡½æ•°è°ƒç”¨ co(10) --> 10 print(\"----------\") co2 = coroutine.create(function() for i=1,10 do print(i) if i == 3 then print(coroutine.status(co2)) --> runningï¼ˆè¿è¡Œï¼‰ print(coroutine.running()) --> thread: xxxxxx false end coroutine.yield() end end) coroutine.resume(co2) --> 1 coroutine.resume(co2) --> 2 coroutine.resume(co2) --> 3 print(coroutine.status(co2)) --> suspendedï¼ˆæŒ‚èµ·ï¼‰ print(coroutine.running()) --> thread: xxxxxx true print(\"----------\") æ‰§è¡Œç»“æœ 1 dead ---------- 10 ---------- 1 2 3 running thread: 0x1c49fd8 false suspended thread: 0x1c3d018 true ---------- å¦‚æœå°† coroutine.yield() ä¸€è¡Œæ³¨é‡Šæ‰ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ 1 dead ---------- 10 ---------- 1 2 3 running thread: 0x7fe6f1505258 false 4 5 6 7 8 9 10 dead thread: 0x7fe6f2000008 true ---------- coroutine.running å°±å¯ä»¥çœ‹å‡ºæ¥ coroutine åœ¨åº•å±‚å®ç°å°±æ˜¯ä¸€ä¸ªçº¿ç¨‹ã€‚ å½“ create ä¸€ä¸ª coroutine çš„æ—¶å€™å°±æ˜¯åœ¨æ–°çº¿ç¨‹ä¸­æ³¨å†Œäº†ä¸€ä¸ªäº‹ä»¶ã€‚ å½“ä½¿ç”¨ resume è§¦å‘äº‹ä»¶çš„æ—¶å€™ï¼Œcreate çš„ coroutine å‡½æ•°å°±è¢«æ‰§è¡Œäº† å½“é‡åˆ° yield çš„æ—¶å€™å°±ä»£è¡¨æŒ‚èµ·å½“å‰çº¿ç¨‹ï¼Œç­‰å€™å†æ¬¡ resume è§¦å‘äº‹ä»¶ã€‚ ç¤ºä¾‹2 æ¥ä¸‹æ¥æˆ‘ä»¬åˆ†æä¸€ä¸ªæ›´è¯¦ç»†çš„å®ä¾‹ï¼š function foo (a) print(\"foo å‡½æ•°è¾“å‡º\", a) return coroutine.yield(2 * a) -- è¿”å› 2*a çš„å€¼ end co = coroutine.create(function (a, b) print(\"ç¬¬ä¸€æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º\", a, b) local r = foo(a + 1) print(\"ç¬¬äºŒæ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º\", r) local r, s = coroutine.yield(a+b, a-b) -- aï¼Œb çš„å€¼ä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ååŒç¨‹åºæ—¶ä¼ å…¥ print(\"ç¬¬ä¸‰æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º\", r, s) return b, \"ç»“æŸååŒç¨‹åº\" -- bçš„å€¼ä¸ºç¬¬äºŒæ¬¡è°ƒç”¨ååŒç¨‹åºæ—¶ä¼ å…¥ end) print(\"main\", coroutine.resume(co, 1, 10)) print() print(\"main\", coroutine.resume(co, \"r\")) print() print(\"main\", coroutine.resume(co, \"x\", \"y\")) print() print(\"main\", coroutine.resume(co, \"x\", \"y\")) æ‰§è¡Œç»“æœ ç¬¬ä¸€æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º 1 10 foo å‡½æ•°è¾“å‡º 2 main true 4 ç¬¬äºŒæ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º r main true 11 -9 ç¬¬ä¸‰æ¬¡ååŒç¨‹åºæ‰§è¡Œè¾“å‡º x y main true 10 ç»“æŸååŒç¨‹åº main false cannot resume dead coroutine åˆ†æ ç¬¬ä¸€æ¬¡ resumeï¼Œå°†ååŒç¨‹åºå”¤é†’ï¼Œresume æ“ä½œæˆåŠŸè¿”å› trueã€‚ ååŒç¨‹åºè¿è¡Œï¼Œè¿è¡Œåˆ° yield æŒ‚èµ·ååŒç¨‹åºï¼Œç¬¬ä¸€æ¬¡ resume è¿”å›ï¼ˆæ­¤å¤„ yield è¿”å›ï¼Œå‚æ•°æ˜¯ resume çš„å‚æ•°ï¼‰ã€‚ ç¬¬äºŒæ¬¡ resumeï¼Œå†æ¬¡å”¤é†’ååŒç¨‹åºï¼ˆæ­¤å¤„resumeçš„å‚æ•°ä¸­ï¼Œé™¤äº†ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå‰©ä¸‹çš„å‚æ•°å°†ä½œä¸ºyieldçš„å‚æ•°ï¼‰ã€‚ ååŒç¨‹åºè¿è¡Œï¼Œè¿è¡Œåˆ° yield æŒ‚èµ·ååŒç¨‹åºï¼Œç¬¬äºŒæ¬¡ resume è¿”å›ã€‚ ååŒç¨‹åºç»§ç»­è¿è¡Œï¼Œé‡å¤å¦‚ä¸Šæ­¥éª¤ã€‚ å¦‚æœååŒç¨‹åºè¿è¡Œå®Œæˆåï¼Œç»§ç»­è°ƒç”¨ resume æ–¹æ³•åˆ™è¾“å‡ºï¼šcannot resume dead coroutine resume å’Œ yield çš„é…åˆå¼ºå¤§ä¹‹å¤„åœ¨äº resume å¤„äºä¸»ç¨‹ä¸­ï¼Œå®ƒå°†å¤–éƒ¨çŠ¶æ€ï¼ˆæ•°æ®ï¼‰ä¼ å…¥åˆ°ååŒç¨‹åºå†…éƒ¨ã€‚ yield åˆ™å°†å†…éƒ¨çš„çŠ¶æ€ï¼ˆæ•°æ®ï¼‰è¿”å›åˆ°ä¸»ç¨‹ä¸­ã€‚ å››ã€ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜ ä½¿ç”¨ Lua çš„ååŒç¨‹åºæ¥å®Œæˆç”Ÿäº§è€…-æ¶ˆè´¹è€…è¿™ä¸€ç»å…¸é—®é¢˜ã€‚ local newProductor function productor() local i = 0 while true do i = i + 1 send(i) -- å°†ç”Ÿäº§çš„ç‰©å“å‘é€ç»™æ¶ˆè´¹è€… end end function consumer() while true do local i = receive() -- ä»ç”Ÿäº§è€…é‚£é‡Œå¾—åˆ°ç‰©å“ print('æ¶ˆè´¹è€…', i) end end function receive() local status, value = coroutine.resume(newProductor) return value end function send(x) coroutine.yield(x) -- xè¡¨ç¤ºéœ€è¦å‘é€çš„å€¼ï¼Œå€¼è¿”å›ä»¥åï¼Œå°±æŒ‚èµ·è¯¥ååŒç¨‹åº end -- å¯åŠ¨ç¨‹åº newProductor = coroutine.create(productor) consumer() ä»¥ä¸Šå®ä¾‹æ‰§è¡Œè¾“å‡ºç»“æœä¸ºï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 â€¦â€¦ é€šå¸¸ä¼šå°†ååŒç¨‹åºä¸å¤šè·¯ç¨‹åºè®¾è®¡è¯­è¨€çš„çº¿ç¨‹è¿›è¡Œæ¯”è¾ƒï¼Œä½†éœ€è¦äº†è§£ååŒç¨‹åºå…·æœ‰ç±»ä¼¼çš„çº¿ç¨‹åŠŸèƒ½ï¼Œä½†ååŒç¨‹åºä¸€æ¬¡åªæ‰§è¡Œä¸€ä¸ªç¨‹åºï¼Œå¹¶ä¸”æ°¸è¿œä¸ä¼šåŒæ—¶æ‰§è¡Œã€‚ é€šè¿‡æš‚æ—¶ä¿ç•™æŸäº›ä¿¡æ¯æ¥æ§åˆ¶ç¨‹åºæ‰§è¡Œé¡ºåºä»¥æ»¡è¶³éœ€æ±‚ã€‚ä½¿ç”¨å¸¦æœ‰ååŒç¨‹åºçš„å…¨å±€å˜é‡ä¸ºååŒç¨‹åºæä¾›äº†æ›´å¤§çš„çµæ´»æ€§ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-17 21:12:13 "},"base/Luaæ–‡ä»¶æ“ä½œ.html":{"url":"base/Luaæ–‡ä»¶æ“ä½œ.html","title":"Lua æ–‡ä»¶æ“ä½œ","keywords":"","body":"Lua æ–‡ä»¶ I/O æ“ä½œ Lua I/O åº“ç”¨äºè¯»å–å’Œå¤„ç†æ–‡ä»¶ï¼Œåˆ†ä¸ºä¸¤ç§æ¨¡å¼ã€‚ éšå¼æ–‡ä»¶å¥æŸ„ æˆ– ç®€å•æ¨¡å¼ï¼šæ‹¥æœ‰ä¸€ä¸ªå½“å‰è¾“å…¥æ–‡ä»¶å’Œä¸€ä¸ªå½“å‰è¾“å‡ºæ–‡ä»¶ï¼Œå¹¶ä¸”æä¾›é’ˆå¯¹è¿™äº›æ–‡ä»¶ç›¸å…³çš„æ“ä½œã€‚ æ˜¾ç¤ºæ–‡ä»¶å¥æŸ„ æˆ– å®Œå…¨æ¨¡å¼ï¼šä½¿ç”¨å¤–éƒ¨çš„æ–‡ä»¶å¥æŸ„æ¥å®ç°ã€‚å®ƒä»¥ä¸€ç§é¢å¯¹å¯¹è±¡çš„å½¢å¼ï¼Œå°†æ‰€æœ‰çš„æ–‡ä»¶æ“ä½œå®šä¹‰ä¸ºæ–‡ä»¶å¥æŸ„çš„æ–¹æ³• ç®€å•æ¨¡å¼åœ¨åšä¸€äº›ç®€å•çš„æ–‡ä»¶æ“ä½œæ—¶è¾ƒä¸ºåˆé€‚ã€‚åŒæ—¶è¯»å–å¤šä¸ªæ–‡ä»¶è¿™æ ·çš„æ“ä½œï¼Œä½¿ç”¨å®Œå…¨æ¨¡å¼åˆ™è¾ƒä¸ºåˆé€‚ã€‚ ä¸€ã€è¯­æ³• -- æ‰“å¼€æ–‡ä»¶ file = io.open (filename [, mode]) è¿™ä¸ªå‡½æ•°ç”¨å­—ç¬¦ä¸² mode æŒ‡å®šçš„æ¨¡å¼æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ã€‚è¿”å›æ–°çš„æ–‡ä»¶å¥æŸ„ã€‚å½“å‡ºé”™æ—¶ï¼Œè¿”å› nil åŠ é”™è¯¯æ¶ˆæ¯ã€‚ mode å­—ç¬¦ä¸²å¯ä»¥æ˜¯ä¸‹åˆ—ä»»æ„å€¼ï¼š rï¼šåªè¯»æ¨¡å¼ï¼Œè¯¥æ–‡ä»¶å¿…é¡»å­˜åœ¨ã€‚ wï¼šå¯å†™æ¨¡å¼ï¼Œå…è®¸ä¿®æ”¹å·²ç»å­˜åœ¨çš„æ–‡ä»¶å’Œåˆ›å»ºæ–°æ–‡ä»¶(ä¸å¯è¯»)ã€‚ aï¼šé™„åŠ æ¨¡å¼ï¼Œç”¨äºæ‰“å¼€ç°æœ‰æ–‡ä»¶æˆ–åˆ›å»ºæ–°æ–‡ä»¶ä»¥è¿›è¡Œè¿½åŠ ã€‚ r+ï¼šè¯»å†™æ¨¡å¼æ‰“å¼€å·²å­˜çš„åœ¨æ–‡ä»¶ã€‚ w+ï¼šå¦‚æœæ–‡ä»¶å·²å­˜åœ¨åˆ™åˆ é™¤æ–‡ä»¶ä¸­æ•°æ®ï¼›è‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™æ–°å»ºæ–‡ä»¶ã€‚è¯»å†™æ¨¡å¼æ‰“å¼€ã€‚ a+ï¼šä»¥å¯è¯»çš„è¿½åŠ æ¨¡å¼æ‰“å¼€å·²å­˜åœ¨æ–‡ä»¶ï¼Œè‹¥æ–‡ä»¶ä¸å­˜åœ¨åˆ™æ–°å»ºæ–‡ä»¶ã€‚ ä¸Šé¢çš„ + å·è¡¨ç¤ºå¯¹æ–‡ä»¶æ—¢å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™ã€‚mode å­—ç¬¦ä¸²å¯ä»¥åœ¨æœ€ååŠ ä¸€ä¸ª bï¼Œè¿™ä¼šåœ¨æŸäº›ç³»ç»Ÿä¸Šä»¥äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚ å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶ local file = io.open(\"./test.txt\") file:close() æ¨¡å¼\"r\",\"r+\",ä¼šæç¤ºé”™è¯¯,è¿™ä¸¤ç§æ¨¡å¼ä¸ä¼šè‡ªåŠ¨åˆ›å»ºä¸ºéš¾ã€‚ æ¨¡å¼\"a\",\"a+\",\"w\",\"w+\"éƒ½ä¼šåˆ›å»ºæ–‡ä»¶ ä¸‰ã€ç®€å•æ¨¡å¼ ç®€å•æ¨¡å¼ä½¿ç”¨æ ‡å‡†çš„ I/O æˆ–ä½¿ç”¨ä¸€ä¸ªå½“å‰è¾“å…¥æ–‡ä»¶å’Œä¸€ä¸ªå½“å‰è¾“å‡ºæ–‡ä»¶ã€‚ ä»¥ä¸‹ä¸º file.lua æ–‡ä»¶ä»£ç ï¼Œå‡è®¾æˆ‘çš„ test.lua æ–‡ä»¶é‡Œé¢æ²¡æœ‰ä»»ä½•å†…å®¹ï¼Œä»£ç å¦‚ä¸‹ï¼š -- ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ file = io.open(\"test.lua\", \"r\") -- è¾“å…¥æ–‡ä»¶ä¸º test.lua io.input(file) -- è¾“å‡ºæ–‡ä»¶ç¬¬ä¸€è¡Œ print(io.read()) -- å…³é—­æ‰“å¼€çš„æ–‡ä»¶ io.close(file) -- ä»¥é™„åŠ çš„æ–¹å¼æ‰“å¼€åªå†™æ–‡ä»¶ file = io.open(\"test.lua\", \"a\") -- è®¾ç½®è¾“å‡ºæ–‡ä»¶ä¸º test.lua io.output(file) -- åœ¨æ–‡ä»¶æœ€åä¸€è¡Œæ·»åŠ  Lua æ³¨é‡Š io.write(\"-- æ–‡ä»¶æœ«å°¾æ³¨é‡Š\") -- å…³é—­æ‰“å¼€çš„æ–‡ä»¶ io.close(file) æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œé¦–æ¬¡æ‰§è¡Œæ— å†…å®¹è¾“å‡º nilï¼Œå¹¶æ·»åŠ ä¸€è¡Œæ³¨é‡Šåˆ°æ–‡ä»¶ï¼Œç¬¬äºŒæ¬¡æ‰§è¡Œè¾“å‡º test.lua æ–‡ä»¶çš„ç¬¬ä¸€è¡Œä¿¡æ¯ã€‚ âœ code-test lua file.lua nil âœ code-test lua file.lua -- æ–‡ä»¶æœ«å°¾æ³¨é‡Š åœ¨ä»¥ä¸Šå®ä¾‹ä¸­æˆ‘ä»¬ä½¿ç”¨äº† io.\"x\" æ–¹æ³•ï¼Œå…¶ä¸­ io.read() ä¸­æˆ‘ä»¬æ²¡æœ‰å¸¦å‚æ•°ï¼Œå‚æ•°å¯ä»¥æ˜¯ä¸‹è¡¨ä¸­çš„ä¸€ç§ï¼š æ¨¡å¼ æè¿° ç¤ºä¾‹ \"*n\" ä»å½“å‰æ–‡ä»¶ä½ç½®è¯»å–å¹¶è¿”å›ä¸€ä¸ªæ•°å­—(å¦‚æœå­˜åœ¨äºæ–‡ä»¶ä½ç½®æˆ–è¿”å›nil)ã€‚ file.read(\"*n\") \"*a\" ä»å½“å‰æ–‡ä»¶ä½ç½®è¿”å›æ–‡ä»¶çš„æ‰€æœ‰å†…å®¹ã€‚ file.read(\"*a\") \"*l\"ï¼ˆé»˜è®¤ï¼‰ ä»å½“å‰æ–‡ä»¶ä½ç½®è¯»å–è¡Œï¼Œå¹¶å°†æ–‡ä»¶ä½ç½®ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚ file.read(\"*l\") number è¯»å–å‡½æ•°ä¸­æŒ‡å®šçš„å­—èŠ‚æ•°ã€‚ file.read(5) å…¶ä»–çš„ I/O æ–¹æ³•æœ‰ï¼š io.tmpfile()ï¼šè¿”å›ä¸€ä¸ªä¸´æ—¶æ–‡ä»¶å¥æŸ„ï¼Œè¯¥æ–‡ä»¶ä»¥æ›´æ–°æ¨¡å¼æ‰“å¼€ï¼Œç¨‹åºç»“æŸæ—¶è‡ªåŠ¨åˆ é™¤ã€‚ io.type(file)ï¼šæ£€æµ‹ obj æ˜¯å¦ä¸€ä¸ªå¯ç”¨çš„æ–‡ä»¶å¥æŸ„ã€‚ io.flush()ï¼šå‘æ–‡ä»¶å†™å…¥ç¼“å†²ä¸­çš„æ‰€æœ‰æ•°æ®ã€‚ io.lines(optional file name)ï¼šè¿”å›ä¸€ä¸ªè¿­ä»£å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨å°†è·å¾—æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹ï¼Œå½“åˆ°æ–‡ä»¶å°¾æ—¶ï¼Œå°†è¿” å›nilï¼Œä½†ä¸å…³é—­æ–‡ä»¶ å››ã€å®Œå…¨æ¨¡å¼ å®Œå…¨æ¨¡å¼ï¼šå…è®¸ä¸€æ¬¡æ“ä½œå¤šä¸ªæ–‡ä»¶ã€‚è¿™äº›å‡½æ•°ä¸ç®€å•æ¨¡å¼éå¸¸ç›¸ä¼¼ã€‚ä½¿ç”¨ file:function_nameï¼Œè€Œä¸æ˜¯ io.function_nameã€‚ å¦‚ä¸‹ç¤ºä¾‹ -- ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ file = io.open(\"test.lua\", \"r\") -- è¾“å‡ºæ–‡ä»¶ç¬¬ä¸€è¡Œ print(file:read()) -- å…³é—­æ‰“å¼€çš„æ–‡ä»¶ file:close() -- ä»¥é™„åŠ çš„æ–¹å¼æ‰“å¼€åªå†™æ–‡ä»¶ file = io.open(\"test.lua\", \"a\") -- åœ¨æ–‡ä»¶æœ€åä¸€è¡Œæ·»åŠ  Lua æ³¨é‡Š file:write(\"--test\") -- å…³é—­æ‰“å¼€çš„æ–‡ä»¶ file:close() read çš„å‚æ•°ä¸ç®€å•æ¨¡å¼ä¸€è‡´ã€‚ å…¶ä»–æ–¹æ³•: file:seek(optional whence, optional offset)ï¼šè®¾ç½®å’Œè·å–å½“å‰æ–‡ä»¶ä½ï¼ŒæˆåŠŸåˆ™è¿”å›æœ€ç»ˆçš„æ–‡ä»¶ä½ç½®(æŒ‰å­—èŠ‚)ï¼Œå¤±è´¥åˆ™è¿”å› nil å’Œé”™è¯¯ä¿¡æ¯ã€‚å‚æ•° whence å€¼æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š setï¼šä»æ–‡ä»¶å¤´å¼€å§‹ curï¼šä»å½“å‰ä½ç½®å¼€å§‹[é»˜è®¤] endï¼šä»æ–‡ä»¶å°¾å¼€å§‹ï¼Œåˆ™å®šä½åˆ°æ–‡ä»¶å°¾å¹¶è¿”å›æ–‡ä»¶å¤§å° offsetï¼šé»˜è®¤ä¸º0 file:flush()ï¼šå‘æ–‡ä»¶å†™å…¥ç¼“å†²ä¸­çš„æ‰€æœ‰æ•°æ® io.lines(optional file name)ï¼šæ‰“å¼€æŒ‡å®šçš„æ–‡ä»¶ filename ä¸ºè¯»æ¨¡å¼å¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å‡½æ•°ï¼Œæ¯æ¬¡è°ƒç”¨å°†è·å¾—æ–‡ä»¶ä¸­çš„ä¸€è¡Œå†…å®¹ï¼Œå½“åˆ°æ–‡ä»¶å°¾æ—¶ï¼Œå°†è¿”å› nilï¼Œå¹¶è‡ªåŠ¨å…³é—­æ–‡ä»¶ã€‚ ä»¥ä¸‹å®ä¾‹ä½¿ç”¨äº† seek æ–¹æ³•ï¼Œå®šä½åˆ°æ–‡ä»¶å€’æ•°ç¬¬ 25 ä¸ªä½ç½®å¹¶ä½¿ç”¨ read æ–¹æ³•çš„ *a å‚æ•°ï¼Œå³ä»å½“æœŸä½ç½®(å€’æ•°ç¬¬ 25 ä¸ªä½ç½®)è¯»å–æ•´ä¸ªæ–‡ä»¶ã€‚ -- ä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ file = io.open(\"test.lua\", \"r\") file:seek(\"end\", -25) print(file:read(\"*a\")) -- å…³é—­æ‰“å¼€çš„æ–‡ä»¶ file:close() æ‰§è¡Œç»“æœ âœ code-test lua file.lua ?é‡Š-- æ–‡ä»¶æœ«å°¾æ³¨é‡Š ç»“æœä¸­æœ‰äº†ä¸€æ®µå„¿çš„ä¹±ç ï¼Œè¿™æ˜¯å› ä¸ºä¸€ä¸ªå­—ç¬¦åŒ…å«çš„é•¿åº¦æ˜¯ 3 ä¸ªï¼Œå½“æˆªå–çš„é•¿åº¦å¹¶éåˆšå¥½è¯»å–å®Œæ•´å­—ç¬¦æ—¶å°±æ˜¾ç¤ºäº†ä¹±ç ã€‚æ¯”å¦‚ä¸Šé¢çš„æŠŠ -25 ä¿®æ”¹ä¸º 27 å°±æ­£å¸¸äº†ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-19 15:56:35 "},"base/Luaé”™è¯¯å¤„ç†.html":{"url":"base/Luaé”™è¯¯å¤„ç†.html","title":"Lua é”™è¯¯å¤„ç†","keywords":"","body":"Lua é”™è¯¯å¤„ç† ç¨‹åºè¿è¡Œä¸­é”™è¯¯å¤„ç†æ˜¯å¿…è¦çš„ï¼Œåœ¨æˆ‘ä»¬è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œæ•°æ®è½¬ç§»åŠweb service è°ƒç”¨è¿‡ç¨‹ä¸­éƒ½ä¼šå‡ºç°ä¸å¯é¢„æœŸçš„é”™è¯¯ã€‚å¦‚æœä¸æ³¨é‡é”™è¯¯ä¿¡æ¯çš„å¤„ç†ï¼Œå°±ä¼šé€ æˆä¿¡æ¯æ³„éœ²ï¼Œç¨‹åºæ— æ³•è¿è¡Œç­‰æƒ…å†µã€‚ ä»»ä½•ç¨‹åºè¯­è¨€ä¸­ï¼Œéƒ½éœ€è¦é”™è¯¯å¤„ç†ã€‚é”™è¯¯ç±»å‹æœ‰ï¼š è¯­æ³•é”™è¯¯ è¿è¡Œé”™è¯¯ ä¸€ã€è¯­æ³•é”™è¯¯ è¯­æ³•é”™è¯¯é€šå¸¸æ˜¯ç”±äºå¯¹ç¨‹åºçš„ç»„ä»¶ï¼ˆå¦‚è¿ç®—ç¬¦ã€è¡¨è¾¾å¼ï¼‰ä½¿ç”¨ä¸å½“å¼•èµ·çš„ã€‚ä¸€ä¸ªç®€å•çš„å®ä¾‹å¦‚ä¸‹ï¼š a == 2 ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœä¸ºï¼š lua: test.lua:2: syntax error near '==' æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä»¥ä¸Šå‡ºç°äº†è¯­æ³•é”™è¯¯ï¼Œä¸€ä¸ª \"=\" å·è·Ÿä¸¤ä¸ª \"=\" å·æ˜¯æœ‰åŒºåˆ«çš„ã€‚ä¸€ä¸ª \"=\" æ˜¯èµ‹å€¼è¡¨è¾¾å¼ä¸¤ä¸ª \"=\" æ˜¯æ¯”è¾ƒè¿ç®—ã€‚ å¦å¤–ä¸€ä¸ªå®ä¾‹: for a= 1,10 print(a) end æ‰§è¡Œä»¥ä¸Šç¨‹åºä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š lua: test2.lua:2: 'do' expected near 'print' è¯­æ³•é”™è¯¯æ¯”ç¨‹åºè¿è¡Œé”™è¯¯æ›´ç®€å•ï¼Œè¿è¡Œé”™è¯¯æ— æ³•å®šä½å…·ä½“é”™è¯¯ï¼Œè€Œè¯­æ³•é”™è¯¯æˆ‘ä»¬å¯ä»¥å¾ˆå¿«çš„è§£å†³ï¼Œå¦‚ä»¥ä¸Šå®ä¾‹æˆ‘ä»¬åªè¦åœ¨ for è¯­å¥ä¸‹æ·»åŠ  do å³å¯ï¼š for a= 1,10 do print(a) end äºŒã€è¿è¡Œé”™è¯¯ è¿è¡Œé”™è¯¯æ˜¯ç¨‹åºå¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œä½†æ˜¯ä¼šè¾“å‡ºæŠ¥é”™ä¿¡æ¯ã€‚å¦‚ä¸‹å®ä¾‹ç”±äºå‚æ•°è¾“å…¥é”™è¯¯ï¼Œç¨‹åºæ‰§è¡Œæ—¶æŠ¥é”™ï¼š function add(a,b) return a+b end add(10) å½“æˆ‘ä»¬ç¼–è¯‘è¿è¡Œä»¥ä¸‹ä»£ç æ—¶ï¼Œç¼–è¯‘æ˜¯å¯ä»¥æˆåŠŸçš„ï¼Œä½†åœ¨è¿è¡Œçš„æ—¶å€™ä¼šäº§ç”Ÿå¦‚ä¸‹é”™è¯¯ï¼š lua: test2.lua:2: attempt to perform arithmetic on local 'b' (a nil value) stack traceback: test2.lua:2: in function 'add' test2.lua:5: in main chunk [C]: ? ä»¥ä¸‹æŠ¥é”™ä¿¡æ¯æ˜¯ç”±äºç¨‹åºç¼ºå°‘ b å‚æ•°å¼•èµ·çš„ã€‚ ä¸‰ã€é”™è¯¯å¤„ç† - æ–­è¨€å’Œé”™è¯¯åŠŸèƒ½ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ä¸ªå‡½æ•°ï¼šassert å’Œ error æ¥å¤„ç†é”™è¯¯ã€‚ å®ä¾‹å¦‚ä¸‹ï¼š 1ã€assert å‡½æ•° local function add(a,b) assert(type(a) == \"number\", \"a ä¸æ˜¯ä¸€ä¸ªæ•°å­—\") assert(type(b) == \"number\", \"b ä¸æ˜¯ä¸€ä¸ªæ•°å­—\") return a+b end add(10) æ‰§è¡Œä»¥ä¸Šç¨‹åºä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯ï¼š lua: test.lua:3: b ä¸æ˜¯ä¸€ä¸ªæ•°å­— stack traceback: [C]: in function 'assert' test.lua:3: in local 'add' test.lua:6: in main chunk [C]: in ? å®ä¾‹ä¸­ assert é¦–å…ˆæ£€æŸ¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè‹¥æ²¡é—®é¢˜ï¼Œassert ä¸åšä»»ä½•äº‹æƒ…ï¼›å¦åˆ™ï¼Œassert ä»¥ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºé”™è¯¯ä¿¡æ¯æŠ›å‡ºã€‚ 2ã€error å‡½æ•° è¯­æ³•æ ¼å¼ï¼š error (message [, level]) åŠŸèƒ½ï¼šç»ˆæ­¢æ­£åœ¨æ‰§è¡Œçš„å‡½æ•°ï¼Œå¹¶è¿”å› message çš„å†…å®¹ä½œä¸ºé”™è¯¯ä¿¡æ¯(error å‡½æ•°æ°¸è¿œéƒ½ä¸ä¼šè¿”å›) é€šå¸¸æƒ…å†µä¸‹ï¼Œerror ä¼šé™„åŠ ä¸€äº›é”™è¯¯ä½ç½®çš„ä¿¡æ¯åˆ° message å¤´éƒ¨ã€‚ Levelå‚æ•°æŒ‡ç¤ºè·å¾—é”™è¯¯çš„ä½ç½®: Level=1[é»˜è®¤]ï¼šä¸ºè°ƒç”¨ error ä½ç½®(æ–‡ä»¶+è¡Œå·) Level=2ï¼šæŒ‡å‡ºå“ªä¸ªè°ƒç”¨ error çš„å‡½æ•°çš„å‡½æ•° Level=0ï¼šä¸æ·»åŠ é”™è¯¯ä½ç½®ä¿¡æ¯ å››ã€pcall å’Œ xpcall åœ¨ Lua ç¼–ç¨‹ä¸­ï¼Œä¸ºäº†é¿å…æŠ›å‡ºè¿™äº›é”™è¯¯å’Œå¤„ç†é”™è¯¯ï¼Œéœ€è¦ä½¿ç”¨ pcall æˆ– xpcall å‡½æ•°ã€‚ pcall(fï¼Œarg1ï¼Œ...) å‡½æ•°åœ¨ä¿æŠ¤æ¨¡å¼ä¸‹è°ƒç”¨æ‰€è¯·æ±‚çš„å‡½æ•°ã€‚å¦‚æœå‡½æ•° f ä¸­å‘ç”ŸæŸäº›é”™è¯¯ï¼Œåˆ™ä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚å®ƒåªè¿”å›é”™è¯¯çŠ¶æ€ã€‚ ä½¿ç”¨ pcall çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚ function myfunction() n = n/nil end if pcall(myfunction) then print(\"Success\") else print(\"Failure\") end å½“æ„å»ºä¸Šé¢ç¨‹åºæ—¶ï¼Œå®ƒå°†æˆåŠŸæ„å»ºå¹¶è¿è¡Œã€‚è¿è¡Œåï¼Œæ˜¾ç¤ºè¿è¡Œæ—¶é”™è¯¯ã€‚ Failure xpcall(fï¼Œerr) å‡½æ•°è°ƒç”¨æ‰€è¯·æ±‚çš„å‡½æ•°ï¼Œå¹¶è®¾ç½®é”™è¯¯å¤„ç†ç¨‹åºã€‚f å†…çš„ä»»ä½•é”™è¯¯éƒ½ä¸ä¼šä¼ æ’­; è€Œ xpcall åªæ•è·é”™è¯¯ï¼Œä½¿ç”¨åŸå§‹é”™è¯¯å¯¹è±¡è°ƒç”¨ err å‡½æ•°ï¼Œå¹¶è¿”å›çŠ¶æ€ä»£ç ã€‚ ä½¿ç”¨ xpcall å‡½æ•°çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚ function myfunction() n = n/nil end function myerrorhandler(err) print(\"ERROR:\", err) end status = xpcall(myfunction, myerrorhandler) print(status) å½“è¿è¡Œä¸Šé¢çš„ç¨‹åºæ—¶ï¼Œå°†å¾—åˆ°ä»¥ä¸‹è¾“å‡ºã€‚ ERROR: input:2: attempt to perform arithmetic on a nil value (global 'n') false ä½œä¸ºç¨‹åºå‘˜ï¼Œæœ€é‡è¦çš„æ˜¯ç¡®ä¿åœ¨ç¼–å†™çš„ç¨‹åºä¸­å¤„ç†æ­£ç¡®çš„é”™è¯¯å¤„ç†ã€‚ ä½¿ç”¨é”™è¯¯å¤„ç†å¯ä»¥ç¡®ä¿å¤„ç†è¶…å‡ºè¾¹ç•Œæ¡ä»¶çš„æ„å¤–æ¡ä»¶è€Œä¸ä¼šå¹²æ‰°ç¨‹åºçš„ç”¨æˆ·ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-19 23:02:32 "},"base/Luaè°ƒè¯•.html":{"url":"base/Luaè°ƒè¯•.html","title":"Lua è°ƒè¯•","keywords":"","body":"Lua Debug è°ƒè¯• Lua æä¾›äº†ä¸€ä¸ªè°ƒè¯•åº“ï¼Œå®ƒæä¾›äº†åˆ›å»ºè‡ªå·±çš„è°ƒè¯•å™¨çš„åŸå§‹å‡½æ•°ã€‚ å³ä½¿æ²¡æœ‰å†…ç½®çš„ Lua è°ƒè¯•å™¨ï¼Œä¹Ÿæœ‰è®¸å¤šç¬¬ä¸‰æ–¹ Lua è°ƒè¯•å™¨ï¼Œç”±å„ç§å¼€å‘äººå‘˜åˆ›å»ºï¼Œå…¶ä¸­è®¸å¤šæ˜¯å¼€æºçš„ã€‚ ä¸€ã€Debug å‡½æ•° ï¼ˆ1ï¼‰debug() è¿›å…¥ç”¨äºè°ƒè¯•çš„äº¤äº’æ¨¡å¼ï¼Œè¯¥æ¨¡å¼ä¿æŒæ´»åŠ¨çŠ¶æ€ï¼Œç›´åˆ°ç”¨æˆ·åªè¾“å…¥ä¸€è¡Œä¸­çš„ cont å¹¶æŒ‰Enteré”®ã€‚ ç”¨æˆ·å¯ä»¥ä½¿ç”¨å…¶ä»–åŠŸèƒ½åœ¨æ­¤æ¨¡å¼ä¸‹æ£€æŸ¥å˜é‡ã€‚ ï¼ˆ2ï¼‰getfenv(object) è¿”å›å¯¹è±¡çš„ç¯å¢ƒå˜é‡ã€‚ ï¼ˆ3ï¼‰gethook(optional thread) è¿”å›çº¿ç¨‹çš„å½“å‰æŒ‚é’©è®¾ç½®ï¼Œæœ‰ä¸‰ä¸ªå€¼ï¼šå½“å‰æŒ‚é’©å‡½æ•°ï¼Œå½“å‰æŒ‚é’©æ©ç å’Œå½“å‰æŒ‚é’©è®¡æ•°ã€‚ ï¼ˆ4ï¼‰getinfo(optional thread, function or stack level, optional flag) è¿”å›ä¸€ä¸ªåŒ…å«å‡½æ•°ä¿¡æ¯çš„è¡¨ã€‚å¯ä»¥ç›´æ¥ç»™å‡ºå‡½æ•°ï¼Œæˆ–è€…å¯ä»¥ç»™ä¸€ä¸ªæ•°å­—ä½œä¸ºå‡½æ•°çš„å€¼ï¼Œåœ¨ç»™å®šçº¿ç¨‹çš„è°ƒç”¨å †æ ˆçš„çº§åˆ«å‡½æ•°ä¸Šè¿è¡Œçš„å‡½æ•° çº§åˆ« 0 ä¸ºå½“å‰å‡½æ•°(getinfoæœ¬èº«); çº§åˆ« 1 ä¸ºè°ƒç”¨ getinfo çš„å‡½æ•°; å¦‚æœ function æ˜¯ä¸€ä¸ªå¤§äºæ´»åŠ¨å‡½æ•°æ•°çš„æ•°å­—ï¼Œåˆ™ getinfo è¿”å› nilã€‚ ï¼ˆ5ï¼‰debug.getlocal([thread,] f, local) æ­¤å‡½æ•°è¿”å›åœ¨æ ˆçš„ f å±‚å¤„å‡½æ•°çš„ç´¢å¼•ä¸º local çš„å±€éƒ¨å˜é‡ çš„åå­—å’Œå€¼ã€‚è¿™ä¸ªå‡½æ•°ä¸ä»…ç”¨äºè®¿é—®æ˜¾å¼å®šä¹‰çš„å±€éƒ¨å˜é‡ï¼Œä¹ŸåŒ…æ‹¬å½¢å‚ã€ä¸´æ—¶å˜é‡ç­‰ã€‚ ï¼ˆ6ï¼‰getmetatable(value) è¿”å›ç»™å®šå¯¹è±¡çš„å…ƒè¡¨ï¼Œå¦‚æœæ²¡æœ‰å…ƒè¡¨ï¼Œåˆ™è¿”å› nilã€‚ ï¼ˆ7ï¼‰getregistry() è¿”å›æ³¨å†Œè¡¨è¡¨ï¼Œè¿™æ˜¯ä¸€ä¸ªé¢„å®šä¹‰å‡ºæ¥çš„è¡¨ï¼Œå¯ä»¥ç”¨æ¥ä¿å­˜ä»»ä½• C ä»£ç æƒ³ä¿å­˜çš„ Lua å€¼ã€‚ ï¼ˆ8ï¼‰getupvalue(function, upvalue index) æ­¤å‡½æ•°è¿”å› upvalue çš„åç§°å’Œå€¼ï¼Œç´¢å¼•ä¸ºå‡½æ•° funcã€‚å¦‚æœç»™å®šç´¢å¼•æ²¡æœ‰ upvalueï¼Œåˆ™å‡½æ•°è¿”å› nilã€‚ ï¼ˆ9ï¼‰setupvalue(f, up, value) è¿™ä¸ªå‡½æ•°å°† value è®¾ä¸ºå‡½æ•° f çš„ç¬¬ up ä¸ªä¸Šå€¼ã€‚ å¦‚æœå‡½æ•°æ²¡æœ‰é‚£ä¸ªä¸Šå€¼ï¼Œè¿”å› nil å¦åˆ™ï¼Œè¿”å›è¯¥ä¸Šå€¼çš„åå­—ã€‚ ï¼ˆ9ï¼‰setfenv(function or thread or userdata, environment table) å°†ç»™å®šå¯¹è±¡çš„ç¯å¢ƒè®¾ç½®ä¸ºç»™å®šè¡¨ï¼Œè¿”å›å¯¹è±¡ã€‚ ï¼ˆ10ï¼‰sethook(optional thread, hook function, hook mask string with \"c\" and/or \"r\" and/or \"l\", optional instruction count) å°†ç»™å®šå‡½æ•°è®¾ç½®ä¸ºé’©å­ã€‚å­—ç¬¦ä¸² mask ä»¥åŠæ•°å­— count å†³å®šäº†é’©å­å°†åœ¨ä½•æ—¶è°ƒç”¨ã€‚ æ©ç æ˜¯ç”±ä¸‹åˆ—å­—ç¬¦ç»„åˆæˆçš„å­—ç¬¦ä¸²ï¼Œæ¯ä¸ªå­—ç¬¦æœ‰å…¶å«ä¹‰ï¼š 'c'ï¼šæ¯å½“ Lua è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œè°ƒç”¨é’©å­ï¼› 'r'ï¼šæ¯å½“ Lua ä»ä¸€ä¸ªå‡½æ•°å†…è¿”å›æ—¶ï¼Œè°ƒç”¨é’©å­ï¼› 'l'ï¼šæ¯å½“ Lua è¿›å…¥æ–°çš„ä¸€è¡Œæ—¶ï¼Œè°ƒç”¨é’©å­ã€‚ ï¼ˆ11ï¼‰ssetlocal(optional thread, stack level, local index, value) å°† value èµ‹è¿™ä¸ªå‡½æ•°çš„ç¬¬ level çº§åˆ«å‡½æ•°çš„ç¬¬ local ä¸ªå±€éƒ¨å˜é‡ã€‚å¦‚æœæ²¡æœ‰é‚£ä¸ªå˜é‡ï¼Œå‡½æ•°è¿”å› nil ã€‚ å¦‚æœ level è¶Šç•Œï¼ŒæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚ setmetatable(value, table) å°† value çš„å…ƒè¡¨è®¾ä¸º table ï¼ˆå¯ä»¥æ˜¯ nilï¼‰ã€‚ è¿”å› valueã€‚ tracebacks([thread,] [message [, level]]) å¦‚æœ message æœ‰ï¼Œä¸”ä¸æ˜¯å­—ç¬¦ä¸²æˆ– nilï¼Œå‡½æ•°ä¸åšä»»ä½•å¤„ç†ç›´æ¥è¿”å› messageã€‚å¦åˆ™ï¼Œè¿”å›è°ƒç”¨æ ˆçš„æ ˆå›æº¯ä¿¡æ¯ã€‚ å­—ç¬¦ä¸²å¯é€‰é¡¹ message è¢«æ·»åŠ åœ¨æ ˆå›æº¯ä¿¡æ¯çš„å¼€å¤´ã€‚æ•°å­—å¯é€‰é¡¹ level æŒ‡æ˜ä»æ ˆçš„å“ªä¸€å±‚å¼€å§‹å›æº¯ ï¼ˆé»˜è®¤ä¸º 1ï¼Œå³è°ƒç”¨ traceback çš„é‚£é‡Œï¼‰ã€‚ äºŒã€ç¤ºä¾‹ function myfunction () print(debug.traceback(\"Stack trace\")) print(debug.getinfo(1)) print(\"Stack trace end\") return 10 end myfunction () print(debug.getinfo(1)) æ‰§è¡Œç»“æœ âœ code-test lua test.lua Stack trace stack traceback: test.lua:2: in function 'myfunction' test.lua:7: in main chunk [C]: in ? table: 0x7ff4cc500580 Stack trace end table: 0x7ff4cc407130 åœ¨ä¸Šé¢çš„ç¤ºä¾‹ç¨‹åºä¸­ï¼Œä½¿ç”¨è°ƒè¯•åº“ä¸­æä¾›çš„ debug.trace å‡½æ•°æ‰“å°å †æ ˆè·Ÿè¸ªã€‚debug.getinfo è·å–å‡½æ•°çš„å½“å‰è¡¨ã€‚ ä¸‰ã€ç¤ºä¾‹ è°ƒè¯•ç¤ºä¾‹å¼€å‘äººå‘˜ç»å¸¸ä¸ºäº†çŸ¥é“å‡½æ•°çš„å±€éƒ¨å˜é‡ä»¥è¿›è¡Œè°ƒè¯•ã€‚ ä¸ºæ­¤ï¼Œå¯ä»¥ä½¿ç”¨ getupvalue å’Œä½¿ç”¨ setupvalue å¹¶è®¾ç½®è¿™äº›å±€éƒ¨å˜é‡ã€‚ ä¸€ä¸ªç®€å•çš„ä¾‹å­å¦‚ä¸‹æ‰€ç¤ºã€‚ function newCounter () local n = 0 local k = 0 return function () k = n n = n + 1 return n end end counter = newCounter () print(counter()) --> 1 print(counter()) --> 2 local i = 1 repeat name, val = debug.getupvalue(counter, i) if name then print(\"index\", i, name, \"=\", val) if(name == \"n\") then debug.setupvalue(counter, 2, 10) end i = i + 1 end until not name print(counter()) æ‰§è¡Œç»“æœ 1 2 index 1 k = 1 index 2 n = 2 11 åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œè®¡æ•°å™¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šæ›´æ–°ä¸€æ¬¡ã€‚å¯ä»¥ä½¿ç”¨ getupvalue å‡½æ•°æŸ¥çœ‹å±€éƒ¨å˜é‡çš„å½“å‰çŠ¶æ€ã€‚ç„¶åå°†å±€éƒ¨å˜é‡è®¾ç½®ä¸ºæ–°å€¼ã€‚è¿™é‡Œï¼Œåœ¨è°ƒç”¨ set æ“ä½œä¹‹å‰ n ä¸º 2ã€‚ä½¿ç”¨ setupvalue å‡½æ•°ï¼Œå®ƒæ›´æ–°ä¸º 10ã€‚ç°åœ¨å½“è°ƒç”¨è®¡æ•°å™¨å‡½æ•°æ—¶ï¼Œå®ƒå°†è¿”å› 11 è€Œä¸æ˜¯ 3ã€‚ å››ã€è°ƒè¯•ç±»å‹ å‘½ä»¤è¡Œè°ƒè¯• å›¾å½¢ç•Œé¢è°ƒè¯• å‘½ä»¤è¡Œè°ƒè¯• å‘½ä»¤è¡Œè°ƒè¯•æ˜¯ä½¿ç”¨å‘½ä»¤å’Œæ‰“å°è¯­å¥åœ¨å‘½ä»¤è¡Œè¿›è¡Œè°ƒè¯•çš„è°ƒè¯•ç±»å‹ã€‚ Lua æœ‰è®¸å¤šå‘½ä»¤è¡Œè°ƒè¯•å™¨ï¼Œä¸‹é¢åˆ—å‡ºäº†ä¸€äº›ã€‚ RemDebugï¼šå®ƒæ˜¯ Lua 5.0 å’Œ Lua 5.1 çš„è¿œç¨‹è°ƒè¯•å™¨ã€‚å®ƒå…è®¸è¿œç¨‹æ§åˆ¶å¦ä¸€ä¸ªLuaç¨‹åºçš„æ‰§è¡Œï¼Œè®¾ç½®æ–­ç‚¹å¹¶æ£€æŸ¥ç¨‹åºçš„å½“å‰çŠ¶æ€ã€‚å®ƒè¿˜å¯ä»¥è°ƒè¯• CGILua è„šæœ¬ã€‚ clidebuggerï¼šå®ƒæ˜¯ Lua 5.1 çš„ç®€å•å‘½ä»¤è¡Œç•Œé¢è°ƒè¯•å™¨ï¼Œç”¨çº¯Luaç¼–å†™ã€‚é™¤äº†æ ‡å‡†çš„ Lua 5.1 åº“ä¹‹å¤–ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•å…¶ä»–ä¸œè¥¿ã€‚å®ƒçš„çµæ„Ÿæ¥è‡ª RemDebugï¼Œä½†æ²¡æœ‰è¿œç¨‹å·¥å…·ã€‚ ctraceï¼šç”¨äºè·Ÿè¸ªLua APIè°ƒç”¨çš„å·¥å…·ã€‚ xdbLuaï¼šç”¨äºWindowså¹³å°çš„ç®€å•Luaå‘½ä»¤è¡Œè°ƒè¯•ç¨‹åºã€‚ LuaInterface Debuggerï¼šå®ƒæ˜¯ LuaInterface çš„è°ƒè¯•å™¨æ‰©å±•ã€‚å®ƒå°†å†…ç½®çš„Luaè°ƒè¯•æ¥å£æå‡åˆ°æ›´é«˜çš„çº§åˆ«ã€‚ä¸è°ƒè¯•å™¨çš„äº¤äº’ç”±äº‹ä»¶å’Œæ–¹æ³•è°ƒç”¨å®Œæˆã€‚ Rldbï¼šå®ƒæ˜¯ä¸€ä¸ªé€šè¿‡å¥—æ¥å­—çš„è¿œç¨‹Luaè°ƒè¯•å™¨ï¼Œå¯åœ¨ Windows å’Œ Linux ä¸Šä½¿ç”¨ã€‚å®ƒå¯ä»¥ä¸ºæ‚¨æä¾›æ¯”ç°æœ‰åŠŸèƒ½æ›´å¤šçš„åŠŸèƒ½ã€‚ ModDebugï¼šè¿™å…è®¸è¿œç¨‹æ§åˆ¶å¦ä¸€ä¸ªLuaç¨‹åºçš„æ‰§è¡Œï¼Œè®¾ç½®æ–­ç‚¹ï¼Œå¹¶æ£€æŸ¥ç¨‹åºçš„å½“å‰çŠ¶æ€ã€‚ å›¾å½¢è°ƒè¯• åœ¨IDEä¸‹å¯ä»¥è¿›è¡Œå›¾å½¢è°ƒè¯•ï¼Œåœ¨IDEä¸­å¯ä¸ºå„ç§çŠ¶æ€ï¼ˆå¦‚å˜é‡å€¼ï¼Œå †æ ˆè·Ÿè¸ªå’Œå…¶ä»–ç›¸å…³ä¿¡æ¯ï¼‰è¿›è¡Œå¯è§†åŒ–è°ƒè¯•ã€‚å€ŸåŠ©æ–­ç‚¹ï¼Œæ­¥å…¥ï¼Œæ­¥è¿›å’ŒIDEä¸­çš„å…¶ä»–æŒ‰é’®ï¼Œå¯ä»¥å®ç°å¯è§†åŒ–è¡¨ç¤ºå’Œé€æ­¥æ§åˆ¶æ‰§è¡Œã€‚ Luaæœ‰è®¸å¤šå›¾å½¢è°ƒè¯•å™¨ï¼Œä¸‹é¢åˆ—å‡ºäº†ä¸€äº›ã€‚ SciTEï¼šLua çš„é»˜è®¤ Windows IDE æä¾›äº†å¤šä¸ªè°ƒè¯•å·¥å…·ï¼Œå¦‚æ–­ç‚¹ï¼Œæ­¥éª¤ï¼Œæ­¥å…¥ï¼Œæ­¥è¿›ï¼Œç›‘è§†å˜é‡ç­‰ã€‚ Decodaï¼šè¿™æ˜¯ä¸€ä¸ªå…·æœ‰è¿œç¨‹è°ƒè¯•æ”¯æŒçš„å›¾å½¢è°ƒè¯•å™¨ã€‚ ZeroBrane Studioï¼šLua IDE é›†æˆäº†è¿œç¨‹è°ƒè¯•å™¨ï¼Œå †æ ˆè§†å›¾ï¼Œç›‘è§†è§†å›¾ï¼Œè¿œç¨‹æ§åˆ¶å°ï¼Œé™æ€åˆ†æå™¨ç­‰ã€‚é€‚ç”¨äº LuaJITï¼ŒLove2dï¼ŒMoai å’Œå…¶ä»–Luaå¼•æ“; Windowsï¼ŒOSXå’ŒLinuxã€‚ akdebuggerï¼šè¿™æ˜¯Eclipseè°ƒè¯•å™¨å’Œç¼–è¾‘å™¨çš„Luaæ’ä»¶ã€‚ luaeditï¼šè¿™åŒ…æ‹¬è¿œç¨‹è°ƒè¯•ï¼Œæœ¬åœ°è°ƒè¯•ï¼Œè¯­æ³•çªå‡ºæ˜¾ç¤ºï¼Œå®Œæˆå»ºè®®åˆ—è¡¨ï¼Œå‚æ•°å‘½é¢˜å¼•æ“ï¼Œé«˜çº§æ–­ç‚¹ç®¡ç†ï¼ˆåŒ…æ‹¬æ–­ç‚¹å’Œå‘½ä¸­è®¡æ•°çš„æ¡ä»¶ç³»ç»Ÿï¼‰ï¼ŒåŠŸèƒ½åˆ—è¡¨ï¼Œå…¨å±€å’Œå±€éƒ¨å˜é‡åˆ—è¡¨ï¼Œç›‘è§†ï¼Œé¢å‘è§£å†³æ–¹æ¡ˆçš„ç®¡ç†ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-22 17:17:09 "},"base/Luaåƒåœ¾æ”¶é›†.html":{"url":"base/Luaåƒåœ¾æ”¶é›†.html","title":"Lua åƒåœ¾æ”¶é›†","keywords":"","body":"Lua åƒåœ¾æ”¶é›† Lua ä½¿ç”¨è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œè¯¥ç®¡ç†ä½¿ç”¨åŸºäº Lua å†…ç½®çš„æŸäº›ç®—æ³•çš„åƒåœ¾æ”¶é›†ã€‚è‡ªåŠ¨å†…å­˜ç®¡ç†æ”¶é›†ï¼Œä½œä¸ºå¼€å‘äººå‘˜æ— éœ€æ‹…å¿ƒä¸ºå¯¹è±¡åˆ†é…å†…å­˜ã€‚é™¤éå°†å…¶è®¾ç½®ä¸ºé›¶ï¼Œå¦åˆ™æ— éœ€åœ¨ä¸å†éœ€è¦æ—¶é‡Šæ”¾å®ƒä»¬ã€‚ Lua ä½¿ç”¨åƒåœ¾æ”¶é›†å™¨å®ƒåœ¨åå°ä¼šæ—¶ä¸æ—¶åœ°è¿è¡Œï¼Œæ”¶é›†å’Œé”€æ¯ Lua ç¨‹åºè®¿é—®çš„æ­»å¯¹è±¡ã€‚ åŒ…æ‹¬è¡¨ï¼Œç”¨æˆ·æ•°æ®ï¼Œå‡½æ•°ï¼Œçº¿ç¨‹ï¼Œå­—ç¬¦ä¸²ç­‰åœ¨å†…çš„æ‰€æœ‰å¯¹è±¡éƒ½éœ€è¦è¿›è¡Œè‡ªåŠ¨å†…å­˜ç®¡ç†ã€‚ Luaä½¿ç”¨å¢é‡æ ‡è®°å’Œæ‰«ææ”¶é›†å™¨ï¼Œå®ƒä½¿ç”¨ä¸¤ä¸ªæ•°å­—æ¥æ§åˆ¶å…¶åƒåœ¾æ”¶é›†å‘¨æœŸï¼Œå³åƒåœ¾æ”¶é›†å™¨æš‚åœå’Œåƒåœ¾æ”¶é›†å™¨æ­¥éª¤å€å¢å™¨ã€‚ è¿™äº›å€¼ä»¥ç™¾åˆ†æ¯”è¡¨ç¤ºï¼Œå€¼ 100 é€šå¸¸åœ¨å†…éƒ¨ç­‰äº 1ã€‚ ä¸€ã€åƒåœ¾æ”¶é›†å™¨æš‚åœ åƒåœ¾æ”¶é›†å™¨æš‚åœç”¨äºæ§åˆ¶åƒåœ¾æ”¶é›†å™¨ä¹‹å‰éœ€è¦ç­‰å¾…å¤šé•¿æ—¶é—´; Lua çš„è‡ªåŠ¨å†…å­˜ç®¡ç†å†æ¬¡è°ƒç”¨ã€‚å°äº 100 çš„å€¼æ„å‘³ç€ Lua ä¸ä¼šç­‰å¾…ä¸‹ä¸€ä¸ªå‘¨æœŸã€‚ç±»ä¼¼åœ°ï¼Œè¯¥å€¼çš„è¾ƒé«˜å€¼å°†å¯¼è‡´åƒåœ¾æ”¶é›†å™¨ç¼“æ…¢ã€‚200 çš„å€¼è¡¨ç¤ºæ”¶é›†å™¨åœ¨å¼€å§‹æ–°å¾ªç¯ä¹‹å‰ç­‰å¾…ä½¿ç”¨çš„æ€»å†…å­˜åŠ å€ã€‚å› æ­¤ï¼Œæ ¹æ®åº”ç”¨ç¨‹åºçš„æ€§è´¨å’Œé€Ÿåº¦ï¼Œå¯èƒ½éœ€è¦æ›´æ”¹æ­¤å€¼ä»¥åœ¨ Lua åº”ç”¨ç¨‹åºä¸­è·å¾—æœ€ä½³æ€§èƒ½ã€‚ äºŒã€åƒåœ¾æ”¶é›†å™¨æ­¥éª¤ä¹˜æ•° æ­¤æ­¥éª¤ä¹˜æ•°æ§åˆ¶åƒåœ¾æ”¶é›†å™¨ä¸ Lua ç¨‹åºä¸­å†…å­˜åˆ†é…çš„ç›¸å¯¹é€Ÿåº¦ã€‚è¾ƒå¤§çš„æ­¥é•¿å€¼å°†å¯¼è‡´åƒåœ¾æ”¶é›†å™¨æ›´å…·ä¾µç•¥æ€§ï¼Œå¹¶ä¸”è¿˜ä¼šå¢åŠ åƒåœ¾æ”¶é›†çš„æ¯ä¸ªå¢é‡æ­¥éª¤çš„æ­¥é•¿ã€‚å°äº 100 çš„å€¼é€šå¸¸å¯ä»¥é¿å…åƒåœ¾æ”¶é›†å™¨ä¸å®Œæˆå¾ªç¯å¹¶ä¸”é€šå¸¸ä¸æ˜¯ä¼˜é€‰çš„ã€‚é»˜è®¤å€¼ä¸º 200ï¼Œè¿™æ„å‘³ç€åƒåœ¾æ”¶é›†å™¨çš„è¿è¡Œé€Ÿåº¦æ˜¯å†…å­˜åˆ†é…çš„ä¸¤å€ã€‚ ä¸‰ã€åƒåœ¾å›æ”¶å™¨å‡½æ•° ä½œä¸ºå¼€å‘äººå‘˜ï¼Œç¡®å®å¯ä»¥æ§åˆ¶ Lua ä¸­çš„è‡ªåŠ¨å†…å­˜ç®¡ç†ã€‚æœ‰ä»¥ä¸‹æ–¹æ³•å¯ä»¥ä½¿ç”¨ã€‚ Lua æä¾›äº†ä»¥ä¸‹å‡½æ•° collectgarbage ([opt [, arg]]) ç”¨æ¥æ§åˆ¶è‡ªåŠ¨å†…å­˜ç®¡ç†: collectgarbage(\"collect\")ï¼šè¿è¡Œä¸€ä¸ªå®Œæ•´çš„åƒåœ¾æ”¶é›†å¾ªç¯ã€‚ collectgarbage(\"count\")ï¼šè¿”å›ç¨‹åºå½“å‰ä»¥åƒå­—èŠ‚ k ä¸ºå•ä½çš„å†…å­˜é‡ã€‚ collectgarbage(\"restart\")ï¼šå¦‚æœåƒåœ¾æ”¶é›†å™¨å·²åœæ­¢ï¼Œåˆ™é‡æ–°å¯åŠ¨å®ƒã€‚ collectgarbage(\"setpause\")ï¼šå°†ç»™å®šçš„å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°é™¤ä»¥ 100ï¼Œå°†å®ƒè®¾ç½®ä¸ºåƒåœ¾æ”¶é›†å™¨æš‚åœå˜é‡ã€‚ collectgarbage(\"setstepmul\")ï¼šå°†ç»™å®šçš„å€¼ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°é™¤ä»¥ 100ï¼Œå°†å®ƒè®¾ç½®ä¸ºåƒåœ¾æ­¥éª¤ä¹˜æ•°å˜é‡ã€‚ collectgarbage(\"step\")ï¼šè¿è¡Œåƒåœ¾æ”¶é›†çš„ä¸€æ­¥ã€‚ç¬¬äºŒä¸ªå‚æ•°è¶Šå¤§ï¼Œæ­¤æ­¥éª¤è¶Šå¤§ã€‚å¦‚æœè§¦å‘çš„æ­¥éª¤æ˜¯åƒåœ¾æ”¶é›†å‘¨æœŸçš„æœ€åä¸€æ­¥ï¼Œåˆ™ collectgarbage å°†è¿”å› trueã€‚ collectgarbage(\"stop\")ï¼šå¦‚æœåƒåœ¾æ”¶é›†å™¨æ­£åœ¨è¿è¡Œï¼Œåˆ™åœæ­¢å®ƒã€‚ ä½¿ç”¨åƒåœ¾æ”¶é›†å™¨ç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚ mytable = {\"apple\", \"orange\", \"banana\"} print(collectgarbage(\"count\")) mytable = nil print(collectgarbage(\"count\")) print(collectgarbage(\"collect\")) print(collectgarbage(\"count\")) å½“è¿è¡Œä¸Šé¢çš„ç¨‹åºæ—¶ï¼Œå°†å¾—åˆ°ä»¥ä¸‹è¾“å‡ºã€‚è¯·æ³¨æ„ï¼Œç”±äºæ“ä½œç³»ç»Ÿç±»å‹çš„ä¸åŒä»¥åŠ Lua çš„è‡ªåŠ¨å†…å­˜ç®¡ç†åŠŸèƒ½ï¼Œæ­¤ç»“æœä¼šæœ‰æ‰€ä¸åŒã€‚ 23.6669921875 23.7744140625 0 23.0810546875 åœ¨ä¸Šé¢çš„ç¨‹åºä¸­çœ‹åˆ°ï¼Œå®Œæˆåƒåœ¾æ”¶é›†ï¼Œå®ƒå°±å‡å°‘äº†ä½¿ç”¨çš„å†…å­˜ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ˜¯å¼ºåˆ¶è¦æ±‚ã€‚å³ä½¿ä¸è°ƒç”¨å®ƒä»¬ï¼Œå®ƒä¹Ÿä¼šåœ¨é¢„å®šä¹‰çš„æ—¶é—´æ®µåç”±Luaè§£é‡Šå™¨åœ¨ç¨åé˜¶æ®µè‡ªåŠ¨æ‰§è¡Œã€‚ æ˜¾ç„¶ï¼Œå¦‚æœéœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨è¿™äº›å‡½æ•°æ¥æ”¹å˜åƒåœ¾æ”¶é›†å™¨çš„è¡Œä¸ºã€‚è¿™äº›å‡½æ•°ä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€äº›é¢å¤–çš„åŠŸèƒ½æ¥å¤„ç†å¤æ‚çš„æƒ…å†µã€‚æ ¹æ®ç¨‹åºæ‰€éœ€çš„å†…å­˜ç±»å‹ï¼Œä¹Ÿå¯èƒ½ä¸ä¼šä½¿ç”¨æ­¤åŠŸèƒ½ã€‚ä½†äº†è§£åº”ç”¨ç¨‹åºä¸­çš„å†…å­˜ä½¿ç”¨æƒ…å†µå¹¶åœ¨ç¼–ç¨‹æœŸé—´æ£€æŸ¥å®ƒä»¥é¿å…åœ¨éƒ¨ç½²åå‡ºç°æ„å¤–ç»“æœéå¸¸æœ‰ç”¨ã€‚ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-22 17:30:47 "},"base/Luaé¢å‘å¯¹è±¡ç¼–ç¨‹.html":{"url":"base/Luaé¢å‘å¯¹è±¡ç¼–ç¨‹.html","title":"Lua é¢å‘å¯¹è±¡ç¼–ç¨‹","keywords":"","body":"Lua é¢å‘å¯¹è±¡ç¼–ç¨‹ é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆObject Oriented Programmingï¼ŒOOPï¼‰æ˜¯ä¸€ç§éå¸¸æµè¡Œçš„è®¡ç®—æœºç¼–ç¨‹æ¶æ„ã€‚ ä»¥ä¸‹å‡ ç§ç¼–ç¨‹è¯­è¨€éƒ½æ”¯æŒé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼š C++ Java Objective-C Smalltalk C# Ruby ä¸€ã€é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ ç±»ï¼šç±»æ˜¯ç”¨äºåˆ›å»ºå¯¹è±¡çš„å¯æ‰©å±•æ¨¡æ¿ï¼Œä¸ºçŠ¶æ€(æˆå‘˜å˜é‡)å’Œè¡Œä¸ºå®ç°æä¾›åˆå§‹å€¼ã€‚ å¯¹è±¡ï¼šå®ƒæ˜¯ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä¸ºè‡ªå·±åˆ†é…äº†å•ç‹¬çš„å†…å­˜ã€‚ ç»§æ‰¿ï¼šè¿™æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œé€šè¿‡è¯¥æ¦‚å¿µï¼Œä¸€ä¸ªç±»çš„å˜é‡å’Œå‡½æ•°ç”±å¦ä¸€ä¸ªç±»ç»§æ‰¿ã€‚ å°è£…ï¼šè¿™æ˜¯åœ¨ç±»ä¸­ç»„åˆæ•°æ®å’Œå‡½æ•°çš„è¿‡ç¨‹ã€‚å€ŸåŠ©å‡½æ•°å¯ä»¥åœ¨ç±»çš„å¤–éƒ¨è®¿é—®æ•°æ®ã€‚ å®ƒä¹Ÿè¢«ç§°ä¸ºæ•°æ®æŠ½è±¡ã€‚ äºŒã€Lua é¢å‘å¯¹è±¡ æˆ‘ä»¬çŸ¥é“ï¼Œå¯¹è±¡ç”±å±æ€§å’Œæ–¹æ³•ç»„æˆã€‚Lua ä¸­æœ€åŸºæœ¬çš„ç»“æ„æ˜¯ tableï¼Œæ‰€ä»¥éœ€è¦ç”¨ table æ¥æè¿°å¯¹è±¡çš„å±æ€§ã€‚ Lua ä¸­ function å¯ä»¥ç”¨æ¥è¡¨ç¤ºæ–¹æ³•ã€‚é‚£ä¹ˆç±»å°±å¯ä»¥é€šè¿‡ table + function æ¨¡æ‹Ÿå‡ºæ¥ã€‚ è‡³äºç»§æ‰¿ï¼Œå¯ä»¥é€šè¿‡ metetable æ¨¡æ‹Ÿå‡ºæ¥ï¼ˆä¸æ¨èç”¨ï¼Œåªæ¨¡æ‹Ÿæœ€åŸºæœ¬çš„å¯¹è±¡å¤§éƒ¨åˆ†æ—¶é—´å¤Ÿç”¨äº†ï¼‰ã€‚ Lua ä¸­çš„è¡¨ä¸ä»…åœ¨æŸç§æ„ä¹‰ä¸Šæ˜¯ä¸€ç§å¯¹è±¡ã€‚åƒå¯¹è±¡ä¸€æ ·ï¼Œè¡¨ä¹Ÿæœ‰çŠ¶æ€ï¼ˆæˆå‘˜å˜é‡ï¼‰ï¼Œä¹Ÿæœ‰ä¸å¯¹è±¡çš„å€¼ç‹¬ç«‹çš„æœ¬æ€§ï¼Œç‰¹åˆ«æ˜¯æ‹¥æœ‰ä¸¤ä¸ªä¸åŒå€¼çš„å¯¹è±¡ï¼ˆtableï¼‰ä»£è¡¨ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼›ä¸€ä¸ªå¯¹è±¡åœ¨ä¸åŒçš„æ—¶å€™ä¹Ÿå¯ä»¥æœ‰ä¸åŒçš„å€¼ï¼Œä½†ä»–å§‹ç»ˆæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼› ä¸‰ã€é¢å‘å¯¹è±¡ç¤ºä¾‹ è€ƒè™‘ä¸€ä¸ªç®€å•çš„æ•°å­¦ä¾‹å­ã€‚æˆ‘ä»¬ç»å¸¸é‡åˆ°å¤„ç†ä¸åŒå½¢çŠ¶çš„æƒ…å†µï¼Œå¦‚åœ†å½¢ï¼ŒçŸ©å½¢å’Œæ–¹å½¢ã€‚ å½¢çŠ¶å¯ä»¥å…·æœ‰å…±åŒçš„å±æ€§ areaã€‚å› æ­¤ï¼Œä½¿ç”¨å…¬å…±å±æ€§åŒºåŸŸä»åŸºç¡€å¯¹è±¡å½¢çŠ¶æ‰©å±•å…¶ä»–å½¢çŠ¶ã€‚æ¯ä¸ªå½¢çŠ¶éƒ½å¯ä»¥æœ‰è‡ªå·±çš„å±æ€§ï¼ŒåƒçŸ©å½¢è¿™æ ·çš„å‡½æ•°å¯ä»¥å…·æœ‰å±æ€§ lengthï¼Œwidthï¼Œarea ä½œä¸ºå±æ€§ï¼ŒprintArea å’Œ calculateArea ä½œä¸ºå®ƒçš„å‡½æ•°ã€‚ 1ã€åˆ›å»ºä¸€ä¸ªç®€å•çš„ç±» ä¸‹é¢æ˜¾ç¤ºäº†å…·æœ‰ä¸‰ä¸ªå±æ€§ lengthï¼Œwidth å’Œ area çš„çŸ©å½¢çš„ç®€å•ç±»å®ç°ã€‚å®ƒè¿˜æœ‰ä¸€ä¸ª printArea å‡½æ•°æ¥æ‰“å°è®¡ç®—åŒºåŸŸé¢ç§¯ã€‚ -- Meta class Rectangle = {area = 0, length = 0, breadth = 0} -- æ´¾ç”Ÿç±»çš„æ–¹æ³• new function Rectangle:new(o, length, breadth) o = o or {} setmetatable(o, self) self.__index = self self.length = length or 0 self.breadth = breadth or 0 self.area = length * breadth; return o end -- æ´¾ç”Ÿç±»çš„æ–¹æ³• printArea function Rectangle:printArea () print(\"çŸ©å½¢é¢ç§¯ä¸º \", self.area) end 2ã€åˆ›å»ºä¸€ä¸ªå¯¹è±¡ åˆ›å»ºå¯¹è±¡æ˜¯ä¸ºç±»å®ä¾‹åˆ†é…å†…å­˜çš„è¿‡ç¨‹ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å†…å­˜å¹¶å…±äº«å…¬å…±ç±»æ•°æ®ã€‚ r = Rectangle:new(nil,10,20) 3ã€è®¿é—®å±æ€§ å¯ä»¥ä½¿ç”¨ç‚¹(.)è¿ç®—ç¬¦è®¿é—®ç±»ä¸­çš„å±æ€§ã€‚ print(r.length) 4ã€è®¿é—®æˆå‘˜å‡½æ•° ä½¿ç”¨å¸¦æœ‰å¯¹è±¡çš„å†’å·(:)è¿ç®—ç¬¦è®¿é—®æˆå‘˜å‡½æ•°ã€‚ r = Rectangle:new(nil,10,20) r:printArea() åˆ†é…å†…å­˜å¹¶è®¾ç½®åˆå§‹å€¼ã€‚ 5ã€å®Œæ•´å®ä¾‹ ä»¥ä¸‹æˆ‘ä»¬æ¼”ç¤ºäº† Lua é¢å‘å¯¹è±¡çš„å®Œæ•´å®ä¾‹ï¼š -- Meta class Rectangle = {area = 0, length = 0, breadth = 0} -- æ´¾ç”Ÿç±»çš„æ–¹æ³• new function Rectangle:new(o, length, breadth) o = o or {} setmetatable(o, self) self.__index = self self.length = length or 0 self.breadth = breadth or 0 self.area = length * breadth; return o end -- æ´¾ç”Ÿç±»çš„æ–¹æ³• printArea function Rectangle:printArea () print(\"çŸ©å½¢é¢ç§¯ä¸º \", self.area) end -- åˆ›å»ºå¯¹è±¡ myshape = Rectangle:new(nil, 10, 20) -- æ‰§è¡Œæˆå‘˜å‡½æ•° myshape:printArea() æ‰§è¡Œä»¥ä¸Šç¨‹åºï¼Œè¾“å‡ºç»“æœä¸ºï¼š é¢ç§¯ä¸º 200 å››ã€Lua ç»§æ‰¿ ç»§æ‰¿æ˜¯æŒ‡ä¸€ä¸ªå¯¹è±¡ç›´æ¥ä½¿ç”¨å¦ä¸€å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚å¯ç”¨äºæ‰©å±•åŸºç¡€ç±»çš„å±æ€§å’Œæ–¹æ³•ã€‚ ä»¥ä¸‹æ¼”ç¤ºäº†ä¸€ä¸ªç®€å•çš„ç»§æ‰¿å®ä¾‹ï¼š -- Meta class Shape = {area = 0} -- åŸºç¡€ç±»æ–¹æ³• new function Shape:new(o, side) o = o or {} setmetatable(o, self) self.__index = self side = side or 0 self.area = side * side; return o end -- åŸºç¡€ç±»æ–¹æ³• printArea function Shape:printArea () print(\"é¢ç§¯ä¸º \",self.area) end æ¥ä¸‹æ¥çš„å®ä¾‹ï¼ŒSquare å¯¹è±¡ç»§æ‰¿äº† Shape ç±»: Square = Shape:new() -- æ´¾ç”Ÿæ–°ç±» function Square:new (o, side) o = o or Shape:new(o,side) setmetatable(o, self) self.__index = self return o end å®Œæ•´å®ä¾‹ ä»¥ä¸‹å®ä¾‹æˆ‘ä»¬ç»§æ‰¿äº†ä¸€ä¸ªç®€å•çš„ç±»ï¼Œæ¥æ‰©å±•æ´¾ç”Ÿç±»çš„æ–¹æ³•ï¼Œæ´¾ç”Ÿç±»ä¸­ä¿ç•™äº†ç»§æ‰¿ç±»çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚ -- Meta class Shape = {area = 0} -- åŸºç¡€ç±»æ–¹æ³• new function Shape:new (o,side) o = o or {} setmetatable(o, self) self.__index = self side = side or 0 self.area = side*side; return o end -- åŸºç¡€ç±»æ–¹æ³• printArea function Shape:printArea () print(\"é¢ç§¯ä¸º \",self.area) end -- åˆ›å»ºå¯¹è±¡ myshape = Shape:new(nil,10) myshape:printArea() Square = Shape:new() -- æ´¾ç”Ÿç±»æ–¹æ³• new function Square:new (o,side) o = o or Shape:new(o,side) setmetatable(o, self) self.__index = self return o end -- æ´¾ç”Ÿç±»æ–¹æ³• printArea function Square:printArea () print(\"æ­£æ–¹å½¢é¢ç§¯ä¸º \",self.area) end -- åˆ›å»ºå¯¹è±¡ mysquare = Square:new(nil,10) mysquare:printArea() Rectangle = Shape:new() -- æ´¾ç”Ÿç±»æ–¹æ³• new function Rectangle:new (o,length,breadth) o = o or Shape:new(o) setmetatable(o, self) self.__index = self self.area = length * breadth return o end -- æ´¾ç”Ÿç±»æ–¹æ³• printArea function Rectangle:printArea () print(\"çŸ©å½¢é¢ç§¯ä¸º \",self.area) end -- åˆ›å»ºå¯¹è±¡ myrectangle = Rectangle:new(nil,10,20) myrectangle:printArea() æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¾“å‡ºç»“æœä¸ºï¼š é¢ç§¯ä¸º 100 æ­£æ–¹å½¢é¢ç§¯ä¸º 100 çŸ©å½¢é¢ç§¯ä¸º 200 åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºäº†ä¸¤ä¸ªæ´¾ç”Ÿç±»ï¼šSquare å’Œ Rectangleã€‚å¹¶åœ¨æ´¾ç”Ÿç±»ä¸­è¦†ç›–åŸºç±»çš„å‡½æ•°ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæ´¾ç”Ÿç±»ä¼šè¦†ç›–å‡½æ•° printAreaã€‚ å‡½æ•°é‡å†™ Lua ä¸­æˆ‘ä»¬å¯ä»¥é‡å†™åŸºç¡€ç±»çš„å‡½æ•°ï¼Œåœ¨æ´¾ç”Ÿç±»ä¸­å®šä¹‰è‡ªå·±çš„å®ç°æ–¹å¼ï¼š -- æ´¾ç”Ÿç±»æ–¹æ³• printArea function Square:printArea () print(\"æ­£æ–¹å½¢é¢ç§¯ \", self.area) end powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-22 19:03:50 "},"base/LuaMySQLæ“ä½œ.html":{"url":"base/LuaMySQLæ“ä½œ.html","title":"Lua MySQLæ“ä½œ","keywords":"","body":"Lua MySQLæ“ä½œ å¯¹äºç®€å•çš„æ•°æ®æ“ä½œï¼Œå¯ä½¿ç”¨æ–‡ä»¶å¤„ç†ã€‚ä½†æœ‰æ—¶ï¼Œè¿™äº›æ–‡ä»¶æ“ä½œå¯èƒ½æ•ˆç‡ä¸é«˜ï¼Œå¯æ‰©å±•ä¸”åŠŸèƒ½å¼ºå¤§ï¼Œä¸ºæ­¤ç»å¸¸éœ€è¦ä½¿ç”¨æ•°æ®åº“ã€‚ ä¸€ã€LuaSQL ä»‹ç» LuaSQL æ˜¯ä¸€ä¸ªä» Lua åˆ° DBMS çš„ç®€å•æ¥å£ã€‚ å®ƒä½¿Luaç¨‹åºèƒ½å¤Ÿï¼š è¿æ¥åˆ° ODBCï¼ŒADOï¼ŒOracleï¼ŒMySQLï¼ŒSQLiteï¼ŒFirebird å’Œ PostgreSQL æ•°æ®åº“; æ‰§è¡Œä»»æ„SQLè¯­å¥; ä»¥é€è¡Œå…‰æ ‡æ–¹å¼æ£€ç´¢ç»“æœã€‚ LuaSQLæ˜¯å…è´¹è½¯ä»¶ï¼Œä½¿ç”¨ä¸Lua 5.1ç›¸åŒçš„è®¸å¯è¯ã€‚ LuaSQL å¯ä»¥ä½¿ç”¨ LuaRocks æ¥å®‰è£…å¯ä»¥æ ¹æ®éœ€è¦å®‰è£…ä½ éœ€è¦çš„æ•°æ®åº“é©±åŠ¨ã€‚ LuaRocks å®˜ç½‘ï¼šhttps://luarocks.org/ LuaSQL å®˜ç½‘ï¼šhttp://keplerproject.github.io/luasql/ LuaSQL GitHubï¼šhttps://github.com/keplerproject/luasql äºŒã€LuaRocks å®‰è£… Linux ç¯å¢ƒ # ä¸‹è½½ $ wget http://luarocks.org/releases/luarocks-2.2.1.tar.gz # è§£å‹ $ tar zxpf luarocks-2.2.1.tar.gz # è¿›å…¥ $ cd luarocks-2.2.1 # ç¼–è¯‘ $ ./configure; sudo make bootstrap # å®‰è£… $ sudo luarocks install luasocket # lua å‘½ä»¤è¡Œ $ lua Lua 5.3.0 Copyright (C) 1994-2015 Lua.org, PUC-Rio > require \"socket\" > Window ç¯å¢ƒ Window ä¸‹å®‰è£… LuaRocksï¼šhttps://github.com/keplerproject/luarocks/wiki/Installation-instructions-for-Windows ä¸‰ã€å®‰è£…ä¸åŒæ•°æ®åº“é©±åŠ¨ï¼š luarocks install luasql-sqlite3 luarocks install luasql-postgres luarocks install luasql-mysql luarocks install luasql-sqlite luarocks install luasql-odbc ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨æºç å®‰è£…æ–¹å¼ï¼ŒLua Github æºç åœ°å€ï¼šhttps://github.com/keplerproject/luasql å››ã€Lua è¿æ¥MySql æ•°æ®åº“ï¼š require \"luasql.mysql\" --åˆ›å»ºç¯å¢ƒå¯¹è±¡ env = luasql.mysql() --è¿æ¥æ•°æ®åº“ conn = env:connect(\"erp\",\"yklyx\",\"99ykTour!99YingK\",\"192.168.128.36\",3306) --è®¾ç½®æ•°æ®åº“çš„ç¼–ç æ ¼å¼ conn:execute\"SET NAMES UTF8\" --æ‰§è¡Œæ•°æ®åº“æ“ä½œ cur = conn:execute(\"select * from bom_applied\") row = cur:fetch({}, \"a\") --æ–‡ä»¶å¯¹è±¡çš„åˆ›å»º file = io.open(\"role.txt\",\"w+\"); while row do var = string.format(\"%d %s\\n\", row.id, row.name) print(var) file:write(var) row = cur:fetch(row,\"a\") end file:close() --å…³é—­æ–‡ä»¶å¯¹è±¡ conn:close() --å…³é—­æ•°æ®åº“è¿æ¥ env:close() --å…³é—­æ•°æ®åº“ç¯å¢ƒ powered by Gitbookè¯¥æ–‡ä»¶ä¿®è®¢æ—¶é—´ï¼š 2019-04-22 19:47:42 "}}